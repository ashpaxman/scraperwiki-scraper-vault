<html>
<head>
<title>Protovis streamgraph example</title>
<script type="text/javascript" src="http://retout.co.uk/2011/protovis-3.2/protovis-r3.2.js"></script>
<script type="text/javascript">
/* Inspired by Lee Byron's test data generator. */
function layers(n, m) {
  function bump(a) {
    var x = 1 / (.1 + Math.random()),
        y = 2 * Math.random() - .5,
        z = 10 / (.1 + Math.random());
    for (var i = 0; i < m; i++) {
      var w = (i / m - y) * z;
      a[i] += x * Math.exp(-w * w);
    }
  }
  return pv.range(n).map(function() {
      var a = [], i;
      for (i = 0; i < m; i++) a[i] = 0;
      for (i = 0; i < 5; i++) bump(a);
      return a;
    });
}
</script>
<style type="text/css">
body {
    margin: 0;
}
</style>
</head>
<body>
<script type="text/javascript+protovis">
var n = 20, // number of layers
    m = 400, // number of samples per layer
    data = layers(n, m);
 
var w = document.body.clientWidth,
    h = document.body.clientHeight,
    x = pv.Scale.linear(0, m - 1).range(0, w),
    y = pv.Scale.linear(0, 2 * n).range(0, h);
 
var vis = new pv.Panel()
    .width(w)
    .height(h);
 
vis.add(pv.Layout.Stack)
    .layers(data)
    .order("inside-out")
    .offset("wiggle")
    .x(x.by(pv.index))
    .y(y)
  .layer.add(pv.Area)
    .fillStyle(pv.ramp("#aad", "#556").by(Math.random))
    .strokeStyle(function() this.fillStyle().alpha(.5));
 
vis.render();
</script>
</body>
</html><html>
<head>
<title>Protovis streamgraph example</title>
<script type="text/javascript" src="http://retout.co.uk/2011/protovis-3.2/protovis-r3.2.js"></script>
<script type="text/javascript">
/* Inspired by Lee Byron's test data generator. */
function layers(n, m) {
  function bump(a) {
    var x = 1 / (.1 + Math.random()),
        y = 2 * Math.random() - .5,
        z = 10 / (.1 + Math.random());
    for (var i = 0; i < m; i++) {
      var w = (i / m - y) * z;
      a[i] += x * Math.exp(-w * w);
    }
  }
  return pv.range(n).map(function() {
      var a = [], i;
      for (i = 0; i < m; i++) a[i] = 0;
      for (i = 0; i < 5; i++) bump(a);
      return a;
    });
}
</script>
<style type="text/css">
body {
    margin: 0;
}
</style>
</head>
<body>
<script type="text/javascript+protovis">
var n = 20, // number of layers
    m = 400, // number of samples per layer
    data = layers(n, m);
 
var w = document.body.clientWidth,
    h = document.body.clientHeight,
    x = pv.Scale.linear(0, m - 1).range(0, w),
    y = pv.Scale.linear(0, 2 * n).range(0, h);
 
var vis = new pv.Panel()
    .width(w)
    .height(h);
 
vis.add(pv.Layout.Stack)
    .layers(data)
    .order("inside-out")
    .offset("wiggle")
    .x(x.by(pv.index))
    .y(y)
  .layer.add(pv.Area)
    .fillStyle(pv.ramp("#aad", "#556").by(Math.random))
    .strokeStyle(function() this.fillStyle().alpha(.5));
 
vis.render();
</script>
</body>
</html>