import scraperwiki
import lxml.html           

print "Hello, coding in the cloud!"
html = scraperwiki.scrape("http://www.goldenleaf.org/searchgrants.php?grant_cycle%5B%5D=2012+Special+Initiatives&grant_cycle%5B%5D=2012+Rural+Health+Care+Initiative&grant_cycle%5B%5D=2012+Open+Grants+Program&grant_cycle%5B%5D=2012+Golden+LEAF+Scholarships&grant_cycle%5B%5D=2012+Economic+Catalyst&grant_cycle%5B%5D=2012+Community+Assistance+Initiative&grant_cycle%5B%5D=2011+STEM+Initiative&grant_cycle%5B%5D=2011+Rural+Health+Care+Intiative&grant_cycle%5B%5D=2011+Open+Grants+Program&grant_cycle%5B%5D=2011+Golden+LEAF+Scholarships&grant_cycle%5B%5D=2011+Golden+LEAF+Rural+Broadband+Initiative&grant_cycle%5B%5D=2011+GLOW+-+AM&grant_cycle%5B%5D=2011+GLF%2F+UNC-Chapel+Hill+Outreach+Collaborative&grant_cycle%5B%5D=2011+Economic+Catalyst&grant_cycle%5B%5D=2011+Community+Assistance+Initiative&grant_cycle%5B%5D=2011+Ag-biotech+Initiative&grant_cycle%5B%5D=2010+Self-Help+Loan+Loss+Reserve+Initiative&grant_cycle%5B%5D=2010+Rural+Health+Care+Initiative&grant_cycle%5B%5D=2010+Open+Grants+Program&grant_cycle%5B%5D=2010+Local+Foods+Initiative&grant_cycle%5B%5D=2010+Golden+LEAF+Scholarships&grant_cycle%5B%5D=2010+Golden+LEAF+Rural+Broadband+Initiative&grant_cycle%5B%5D=2010+GLOW+-+AM&grant_cycle%5B%5D=2010+GLOW&grant_cycle%5B%5D=2010+GLF%2F+UNC-Chapel+Hill+Outreach+Collaborative&grant_cycle%5B%5D=2010+Economic+Catalyst&grant_cycle%5B%5D=2010+Community+Assistance+Initiative&grant_cycle%5B%5D=2010+Ag-biotech+Initiative&grant_cycle%5B%5D=2009+GLOW&grant_cycle%5B%5D=2009+GLF%2F+UNC-Chapel+Hill+Outreach+Collaborative&grant_cycle%5B%5D=2009+Economic+Catalyst&grant_cycle%5B%5D=2009+Community+Assistance+Initiative&grant_cycle%5B%5D=2009+Annual+Grant+Cycle&grant_cycle%5B%5D=2009+Aerospace+Alliance+Initiative&grant_cycle%5B%5D=2008+GLF%2F+UNC-Chapel+Hill+Outreach+Collaborative&grant_cycle%5B%5D=2008+Economic+Catalyst&grant_cycle%5B%5D=2008+Community+Assistance+Initiative&grant_cycle%5B%5D=2008+Annual+Grant+Cycle&grant_cycle%5B%5D=2007+Economic+Catalyst&grant_cycle%5B%5D=2007+Community+Assistance+Initiative&grant_cycle%5B%5D=2007+Biotechnology+Training+Initiative&grant_cycle%5B%5D=2007+Annual+Grant+Cycle&grant_cycle%5B%5D=2007+Aerospace+Alliance+Initiative&grant_cycle%5B%5D=2006+Economic+Stimulus&grant_cycle%5B%5D=2006+Economic+Catalyst&grant_cycle%5B%5D=2006+Biotechnology+Training+Initiative&grant_cycle%5B%5D=2006+Annual+Grant+Cycle&grant_cycle%5B%5D=2006+Aerospace+Alliance+Initiative&grant_cycle%5B%5D=2005+Economic+Stimulus&grant_cycle%5B%5D=2005+Economic+Catalyst&grant_cycle%5B%5D=2005+Annual+Grant+Cycle&grant_cycle%5B%5D=2005+Aerospace+Alliance+Initiative&grant_cycle%5B%5D=2004+Economic+Stimulus&grant_cycle%5B%5D=2004+Biotechnology+Training+Initiative&grant_cycle%5B%5D=2004+Annual+Grant+Cycle&grant_cycle%5B%5D=2002+Economic+Stimulus&grant_cycle%5B%5D=2002+Annual+Grant+Cycle&grant_cycle%5B%5D=2001+Annual+Grant+Cycle&grant_cycle%5B%5D=2000+Annual+Grant+Cycle&region=None&county%5B%5D=1&county%5B%5D=2&county%5B%5D=3&county%5B%5D=4&county%5B%5D=5&county%5B%5D=6&county%5B%5D=7&county%5B%5D=8&county%5B%5D=9&county%5B%5D=10&county%5B%5D=11&county%5B%5D=12&county%5B%5D=13&county%5B%5D=14&county%5B%5D=15&county%5B%5D=16&county%5B%5D=17&county%5B%5D=18&county%5B%5D=19&county%5B%5D=20&county%5B%5D=21&county%5B%5D=22&county%5B%5D=23&county%5B%5D=24&county%5B%5D=25&county%5B%5D=26&county%5B%5D=27&county%5B%5D=28&county%5B%5D=29&county%5B%5D=30&county%5B%5D=31&county%5B%5D=32&county%5B%5D=33&county%5B%5D=34&county%5B%5D=35&county%5B%5D=36&county%5B%5D=37&county%5B%5D=38&county%5B%5D=39&county%5B%5D=40&county%5B%5D=41&county%5B%5D=42&county%5B%5D=43&county%5B%5D=44&county%5B%5D=45&county%5B%5D=46&county%5B%5D=47&county%5B%5D=48&county%5B%5D=49&county%5B%5D=50&county%5B%5D=51&county%5B%5D=52&county%5B%5D=53&county%5B%5D=54&county%5B%5D=55&county%5B%5D=56&county%5B%5D=57&county%5B%5D=58&county%5B%5D=59&county%5B%5D=60&county%5B%5D=61&county%5B%5D=62&county%5B%5D=63&county%5B%5D=64&county%5B%5D=65&county%5B%5D=66&county%5B%5D=67&county%5B%5D=68&county%5B%5D=69&county%5B%5D=70&county%5B%5D=71&county%5B%5D=72&county%5B%5D=73&county%5B%5D=74&county%5B%5D=75&county%5B%5D=76&county%5B%5D=77&county%5B%5D=78&county%5B%5D=79&county%5B%5D=80&county%5B%5D=81&county%5B%5D=82&county%5B%5D=83&county%5B%5D=84&county%5B%5D=85&county%5B%5D=86&county%5B%5D=87&county%5B%5D=88&county%5B%5D=89&county%5B%5D=90&county%5B%5D=91&county%5B%5D=92&county%5B%5D=93&county%5B%5D=94&county%5B%5D=95&county%5B%5D=96&county%5B%5D=97&county%5B%5D=98&county%5B%5D=99&county%5B%5D=100&order=&grant_search_submit=search")
print html
root = lxml.html.fromstring(html)
for tr in root.cssselect("div[align='left'] tr.tcont"):
    tds = tr.cssselect("td")
    data = {
      'Organization' : tds[0].text_content(),
    }
    print data
scraperwiki.sqlite.save(unique_keys=['Organization'], data=data)
import scraperwiki
import lxml.html           

print "Hello, coding in the cloud!"
html = scraperwiki.scrape("http://www.goldenleaf.org/searchgrants.php?grant_cycle%5B%5D=2012+Special+Initiatives&grant_cycle%5B%5D=2012+Rural+Health+Care+Initiative&grant_cycle%5B%5D=2012+Open+Grants+Program&grant_cycle%5B%5D=2012+Golden+LEAF+Scholarships&grant_cycle%5B%5D=2012+Economic+Catalyst&grant_cycle%5B%5D=2012+Community+Assistance+Initiative&grant_cycle%5B%5D=2011+STEM+Initiative&grant_cycle%5B%5D=2011+Rural+Health+Care+Intiative&grant_cycle%5B%5D=2011+Open+Grants+Program&grant_cycle%5B%5D=2011+Golden+LEAF+Scholarships&grant_cycle%5B%5D=2011+Golden+LEAF+Rural+Broadband+Initiative&grant_cycle%5B%5D=2011+GLOW+-+AM&grant_cycle%5B%5D=2011+GLF%2F+UNC-Chapel+Hill+Outreach+Collaborative&grant_cycle%5B%5D=2011+Economic+Catalyst&grant_cycle%5B%5D=2011+Community+Assistance+Initiative&grant_cycle%5B%5D=2011+Ag-biotech+Initiative&grant_cycle%5B%5D=2010+Self-Help+Loan+Loss+Reserve+Initiative&grant_cycle%5B%5D=2010+Rural+Health+Care+Initiative&grant_cycle%5B%5D=2010+Open+Grants+Program&grant_cycle%5B%5D=2010+Local+Foods+Initiative&grant_cycle%5B%5D=2010+Golden+LEAF+Scholarships&grant_cycle%5B%5D=2010+Golden+LEAF+Rural+Broadband+Initiative&grant_cycle%5B%5D=2010+GLOW+-+AM&grant_cycle%5B%5D=2010+GLOW&grant_cycle%5B%5D=2010+GLF%2F+UNC-Chapel+Hill+Outreach+Collaborative&grant_cycle%5B%5D=2010+Economic+Catalyst&grant_cycle%5B%5D=2010+Community+Assistance+Initiative&grant_cycle%5B%5D=2010+Ag-biotech+Initiative&grant_cycle%5B%5D=2009+GLOW&grant_cycle%5B%5D=2009+GLF%2F+UNC-Chapel+Hill+Outreach+Collaborative&grant_cycle%5B%5D=2009+Economic+Catalyst&grant_cycle%5B%5D=2009+Community+Assistance+Initiative&grant_cycle%5B%5D=2009+Annual+Grant+Cycle&grant_cycle%5B%5D=2009+Aerospace+Alliance+Initiative&grant_cycle%5B%5D=2008+GLF%2F+UNC-Chapel+Hill+Outreach+Collaborative&grant_cycle%5B%5D=2008+Economic+Catalyst&grant_cycle%5B%5D=2008+Community+Assistance+Initiative&grant_cycle%5B%5D=2008+Annual+Grant+Cycle&grant_cycle%5B%5D=2007+Economic+Catalyst&grant_cycle%5B%5D=2007+Community+Assistance+Initiative&grant_cycle%5B%5D=2007+Biotechnology+Training+Initiative&grant_cycle%5B%5D=2007+Annual+Grant+Cycle&grant_cycle%5B%5D=2007+Aerospace+Alliance+Initiative&grant_cycle%5B%5D=2006+Economic+Stimulus&grant_cycle%5B%5D=2006+Economic+Catalyst&grant_cycle%5B%5D=2006+Biotechnology+Training+Initiative&grant_cycle%5B%5D=2006+Annual+Grant+Cycle&grant_cycle%5B%5D=2006+Aerospace+Alliance+Initiative&grant_cycle%5B%5D=2005+Economic+Stimulus&grant_cycle%5B%5D=2005+Economic+Catalyst&grant_cycle%5B%5D=2005+Annual+Grant+Cycle&grant_cycle%5B%5D=2005+Aerospace+Alliance+Initiative&grant_cycle%5B%5D=2004+Economic+Stimulus&grant_cycle%5B%5D=2004+Biotechnology+Training+Initiative&grant_cycle%5B%5D=2004+Annual+Grant+Cycle&grant_cycle%5B%5D=2002+Economic+Stimulus&grant_cycle%5B%5D=2002+Annual+Grant+Cycle&grant_cycle%5B%5D=2001+Annual+Grant+Cycle&grant_cycle%5B%5D=2000+Annual+Grant+Cycle&region=None&county%5B%5D=1&county%5B%5D=2&county%5B%5D=3&county%5B%5D=4&county%5B%5D=5&county%5B%5D=6&county%5B%5D=7&county%5B%5D=8&county%5B%5D=9&county%5B%5D=10&county%5B%5D=11&county%5B%5D=12&county%5B%5D=13&county%5B%5D=14&county%5B%5D=15&county%5B%5D=16&county%5B%5D=17&county%5B%5D=18&county%5B%5D=19&county%5B%5D=20&county%5B%5D=21&county%5B%5D=22&county%5B%5D=23&county%5B%5D=24&county%5B%5D=25&county%5B%5D=26&county%5B%5D=27&county%5B%5D=28&county%5B%5D=29&county%5B%5D=30&county%5B%5D=31&county%5B%5D=32&county%5B%5D=33&county%5B%5D=34&county%5B%5D=35&county%5B%5D=36&county%5B%5D=37&county%5B%5D=38&county%5B%5D=39&county%5B%5D=40&county%5B%5D=41&county%5B%5D=42&county%5B%5D=43&county%5B%5D=44&county%5B%5D=45&county%5B%5D=46&county%5B%5D=47&county%5B%5D=48&county%5B%5D=49&county%5B%5D=50&county%5B%5D=51&county%5B%5D=52&county%5B%5D=53&county%5B%5D=54&county%5B%5D=55&county%5B%5D=56&county%5B%5D=57&county%5B%5D=58&county%5B%5D=59&county%5B%5D=60&county%5B%5D=61&county%5B%5D=62&county%5B%5D=63&county%5B%5D=64&county%5B%5D=65&county%5B%5D=66&county%5B%5D=67&county%5B%5D=68&county%5B%5D=69&county%5B%5D=70&county%5B%5D=71&county%5B%5D=72&county%5B%5D=73&county%5B%5D=74&county%5B%5D=75&county%5B%5D=76&county%5B%5D=77&county%5B%5D=78&county%5B%5D=79&county%5B%5D=80&county%5B%5D=81&county%5B%5D=82&county%5B%5D=83&county%5B%5D=84&county%5B%5D=85&county%5B%5D=86&county%5B%5D=87&county%5B%5D=88&county%5B%5D=89&county%5B%5D=90&county%5B%5D=91&county%5B%5D=92&county%5B%5D=93&county%5B%5D=94&county%5B%5D=95&county%5B%5D=96&county%5B%5D=97&county%5B%5D=98&county%5B%5D=99&county%5B%5D=100&order=&grant_search_submit=search")
print html
root = lxml.html.fromstring(html)
for tr in root.cssselect("div[align='left'] tr.tcont"):
    tds = tr.cssselect("td")
    data = {
      'Organization' : tds[0].text_content(),
    }
    print data
scraperwiki.sqlite.save(unique_keys=['Organization'], data=data)
