<?php
/*
$url = array("abguss-sammlung-antiker-plastik-berlin","akademie-der-kuenste-hanseatenweg","akademie-der-kuenste-pariser-platz","alliiertenmuseum","alte-nationalgalerie","altes-museum","anna-seghers-gedenkstaette","anne-frank-zentrum","anti-kriegs-museum","antikensammlung","archenhold-sternwarte-berlin","architekturmuseum-der-tu","Ägyptisches-museum-und-papyrussammlung","bauakademie","bauhaus-archiv-museum-fuer-gestaltung","belvedere-auf-dem-klausberg","belvedere-auf-dem-potsdamer-pfingstberg","belvedere-im-schlosspark-charlottenburg","berliner-dom","berliner-medizinhistorisches-museum-der-charite","berliner-planetarium-und-sternwarte-wilhelm-foerster","berliner-s-bahn-museum","berliner-u-bahn-museum","berliner-unterwelten-museum","berliner-waldmuseum-mit-waldschule-grunewald","berlinische-galerie","bezirksmuseum-friedrichshain-kreuzberg","bezirksmuseum-marzahn-hellersdorf","bildergalerie-am-schloss-sanssouci","bildungszentrum-berlin-des-bstu","bildungszentrum-der-stasi-unterlagenbehoerde","bockwindmuehle-berlin-marzahn","bode-museum","botanischer-garten-und-botanisches-museum-berlin-dahlem","broehan-museum");


$url = array("bruecke-museum-berlin","brecht-weigel-gedenkstaette","britzer-muehle","buchstabenmuseum","centrum-judaicum","chinesisches-haus-im-park-sanssouci","computerspielemuseum","daimler-contemporary-berlin","dampfmaschinenhaus-moschee","das-verborgene-museum","ddr-museum","denkmal-fuer-die-ermordeten-juden-europas","deutsch-russisches-museum-berlin-karlshorst","deutsche-guggenheim","deutsche-kinemathek-museum-fuer-film-und-fernsehen","deutsches-blinden-museum-berlin","deutsches-historisches-museum","deutsches-technikmuseum","dokumentationszentrum-ns-zwangsarbeit-berlin-schoeneweide","domaene-dahlem-landgut-und-museum","energie-museum-berlin","ephraim-palais-stadtmuseum-berlin","erinnerungsstaette-notaufnahmelager-marienfelde","erstes-berliner-ddr-motorradmuseum","ethnologisches-museum","feuerwehrmuseum-berlin","flatowturm-im-park-babelsberg","forum-willy-brandt-berlin","friedenskirche-im-park-sanssouci","friedrichswerdersche-kirche","gaslaternen-freilichtmuseum-berlin","gaerten-der-welt-im-erholungspark-marzahn","gedenkstaette-berlin-hohenschoenhausen","gedenkstaette-berliner-mauer");


$url = array("gedenkstaette-deutscher-widerstand","gedenkstaette-koepenicker-blutwoche-juni-1933","gedenkstaette-ploetzensee","gedenkstaette-stille-helden","gedenkstaette-und-museum-sachsenhausen","gemaeldegalerie","georg-kolbe-museum","gipsformerei","gotisches-haus","gruenauer-wassersportmuseum","gruenderzeitmuseum-im-gutshaus-mahlsdorf","grenzerfahrungen-alltag-der-deutschen-teilung","hamburger-bahnhof-museum-fuer-gegenwart-berlin","hanf-museum-berlin","haus-am-waldsee","haus-der-kulturen-der-welt","haus-der-wannsee-konferenz","heimatmuseum-reinickendorf","heimatmuseum-zehlendorf","heizungsmuseum-koepenick","historische-muehle-im-park-von-sanssouci","hugenottenmuseum","humboldt-museum","jagdschloss-grunewald","jagdschloss-stern","juedisches-museum-berlin","jugend-museum-im-schoeneberg-museum","juniormuseum-im-ethnologischen-museum","kaethe-kollwitz-museum-berlin","keramik-museum-berlin-kmb","kindermuseum-im-fez-berlin","knoblauchhaus-stadtmuseum-berlin","kpm-welt","kunstbibliothek","kunstforum-der-berliner-volksbank");


$url = array("kunstgewerbemuseum","kunstraum-kreuzbergbethanien","kupferstichkabinett","kw-institute-for-contemporary-art","labyrinth-kindermuseum-berlin","liebermann-villa-am-wannsee","machmit!-museum-fuer-kinder","marmorpalais","martin-gropius-bau","mauermuseum","mausoleum-im-schlosspark-charlottenburg","max-liebermann-haus","maerkisches-museum-stadtmuseum-berlin","muenzkabinett","mendelssohn-remise","militaerhistorisches-museum-der-bundeswehr-luftwaffenmuseum","miniaturmuseum-arikalex","mitte-museum","mori-ogai-gedenkstaette","museum-berggruen","museum-blindenwerkstatt-otto-weidt","museum-charlottenburg-wilmersdorf","museum-der-staatlichen-muenze-berlin","museum-der-unerhoerten-dinge","museum-europaeischer-kulturen","museum-fuer-asiatische-kunst","museum-fuer-fotografie-helmut-newton-stiftung","museum-fuer-islamische-kunst","museum-fuer-kommunikation-berlin","museum-fuer-naturkunde","museum-fuer-vor-und-fruehgeschichte","museum-im-historischen-sudhaus","museum-im-wasserwerk","museum-koepenick","museum-kesselhaus-herzberge","museum-lichtenberg-im-stadthaus");


$url=array("museum-neukoelln","museum-treptow","museumsdorf-dueppel-stadtmuseum-berlin","museumsverbund-pankow","museumsverbund-pankow-heynstrasse-8","museumswohnung-wbs-70","musikinstrumenten-museum-simpk","naturwissenschaftliche-sammlung-stadtmuseum-berlin","neue-kammern-am-schloss-sanssouci","neue-nationalgalerie","neues-museum","neues-palais","nikolaikirche-stadtmuseum-berlin","nolde-stiftung-seebuell-dependance-berlin","orangerieschloss-im-park-sanssouci","pergamonmuseum","pfaueninsel","polizeihistorische-sammlung","pomonatempel-auf-dem-pfingstberg","puppentheater-museum-berlin","roemische-baeder","rotkreuz-museum-berlin","sammlung-industrielle-gestaltung","sammlung-kindheit-und-jugend-stadtmuseum-berlin","sammlung-scharf-gerstenberg","sammlungen-des-winckelmann-instituts","schloss-babelsberg","schloss-britz","schloss-caputh","schloss-cecilienhof","schloss-charlottenburg","schloss-charlottenburg-kleine-orangerie","schloss-charlottenhof","schloss-friedrichsfelde","schloss-glienicke","schloss-koenigs-wusterhausen","schloss-koepenick","schloss-paretz","schloss-rheinsberg","schloss-sanssouci");


$url=array("schloss-schoenhausen","schlossmuseum-oranienburg","schwules-museum","science-center-spectrum","skulpturensammlung-und-museum-fuer-byzantinische-kunst","spandovia-sacra","sportmuseum-berlin","stadtgeschichtliches-museum-spandau","stasimuseum-berlin","steglitz-museum","tempelhof-museum","the-kennedys","the-story-of-berlin","topographie-des-terrors","vorderasiatisches-museum","werkbundarchiv-museum-der-dinge","zeiss-grossplanetarium-berlin","zille-museum","zucker-museum","zweiradmuseum");
*/
$url=array("grenzerfahrungen-alltag-der-deutschen-teilung","haus-der-kulturen-der-welt","haus-der-wannsee-konferenz","heimatmuseum-reinickendorf","heimatmuseum-zehlendorf","heizungsmuseum-koepenick","historische-muehle-im-park-von-sanssouci","hugenottenmuseum","humboldt-museum","jagdschloss-grunewald","jagdschloss-stern","juedisches-museum-berlin","jugend-museum-im-schoeneberg-museum","juniormuseum-im-ethnologischen-museum","kaethe-kollwitz-museum-berlin","keramik-museum-berlin-kmb","kindermuseum-im-fez-berlin","knoblauchhaus-stadtmuseum-berlin","kpm-welt","kunstbibliothek","kunstforum-der-berliner-volksbank");


######################################
# Basic PHP scraper
######################################

require  'scraperwiki/simple_html_dom.php';


for ($i = 0; $i <  count($url); $i++) {

$html = scraperwiki::scrape("http://www.museumsportal-berlin.de/museen/museum-details/$url[$i].html");
print $html;

# Use the PHP Simple HTML DOM Parser to extract <td> tags
$dom = new simple_html_dom();
$dom->load($html);

foreach($dom->find('span[class=fn org]') as $name)
{
    # Store data in the datastore
    print $name->plaintext . "\n";
    //scraperwiki::save(array('str'), array('str' => $str->plaintext));
}


foreach($dom->find('span[class=street-address]') as $str)
{

    
    # Store data in the datastore
   // print $str->plaintext . "\n";
    //scraperwiki::save(array('str'), array('str' => $str->plaintext));
}

foreach($dom->find('span[class=postal-code]') as $plz)
 {
     # Store data in the datastore
    // print $plz->plaintext . "\n";
     //scraperwiki::save(array('plz'), array('plz' => $plz->plaintext));
 }

foreach($dom->find('span[class=locality]') as $stadt)
 {
     # Store data in the datastore
     //print $stadt->plaintext . "\n";
     //scraperwiki::save(array('plz'), array('plz' => $plz->plaintext));
 }


foreach($dom->find('span[class=tel] span[class=value]') as $tel)
  {
        $tel->plaintext = str_replace(' ','',$tel->plaintext);
        $tel->plaintext = str_replace('(','',$tel->plaintext);
        $tel->plaintext = str_replace(')','',$tel->plaintext);
        $tel->plaintext = str_replace('+49','',$tel->plaintext);
         $tel->plaintext = str_replace('-','',$tel->plaintext);
          $tel->plaintext = str_replace('.','',$tel->plaintext);
        break;
     // print $tel->plaintext . "\n";
      //scraperwiki::save(array('plz'), array('plz' => $plz->plaintext));
  }
/*
foreach($dom->find('span[class=tel] span[class=value]',2) as $fax)
   {
       # Store data in the datastore
       print $fax->plaintext . "\n";
       //scraperwiki::save(array('plz'), array('plz' => $plz->plaintext));
   }
*/




//email
foreach($dom->find('span[class=email] a') as $email)
   {
          $email->plaintext = str_replace('(at)','@',$email->plaintext);

       # Store data in the datastore
       //print $email->plaintext . "\n";
       //scraperwiki::save(array('plz'), array('plz' => $plz->plaintext));
   }

foreach($dom->find('span[class=extern] a[href]') as $web)
   {
       # Store data in the datastore
        $web->plaintext = $web->href;
       //print $web . "\n";
       //scraperwiki::save(array('plz'), array('plz' => $plz->plaintext));
   }

scraperwiki::save(array('name','str','plz','stadt','tel','email','web'), array('name' => $name->plaintext ,'str' => $str->plaintext, 'plz' => $plz->plaintext, 'stadt' => $stadt->plaintext, 'tel' => $tel->plaintext, 'email' => $email->plaintext, 'web' => $web->plaintext));


$name=null;
$str=null;
$nr=null;
$plz=null;
$stadt=null;
$tel=null;
$email=null;
$web=null;

}

print(count($url));

?>
<?php
/*
$url = array("abguss-sammlung-antiker-plastik-berlin","akademie-der-kuenste-hanseatenweg","akademie-der-kuenste-pariser-platz","alliiertenmuseum","alte-nationalgalerie","altes-museum","anna-seghers-gedenkstaette","anne-frank-zentrum","anti-kriegs-museum","antikensammlung","archenhold-sternwarte-berlin","architekturmuseum-der-tu","Ägyptisches-museum-und-papyrussammlung","bauakademie","bauhaus-archiv-museum-fuer-gestaltung","belvedere-auf-dem-klausberg","belvedere-auf-dem-potsdamer-pfingstberg","belvedere-im-schlosspark-charlottenburg","berliner-dom","berliner-medizinhistorisches-museum-der-charite","berliner-planetarium-und-sternwarte-wilhelm-foerster","berliner-s-bahn-museum","berliner-u-bahn-museum","berliner-unterwelten-museum","berliner-waldmuseum-mit-waldschule-grunewald","berlinische-galerie","bezirksmuseum-friedrichshain-kreuzberg","bezirksmuseum-marzahn-hellersdorf","bildergalerie-am-schloss-sanssouci","bildungszentrum-berlin-des-bstu","bildungszentrum-der-stasi-unterlagenbehoerde","bockwindmuehle-berlin-marzahn","bode-museum","botanischer-garten-und-botanisches-museum-berlin-dahlem","broehan-museum");


$url = array("bruecke-museum-berlin","brecht-weigel-gedenkstaette","britzer-muehle","buchstabenmuseum","centrum-judaicum","chinesisches-haus-im-park-sanssouci","computerspielemuseum","daimler-contemporary-berlin","dampfmaschinenhaus-moschee","das-verborgene-museum","ddr-museum","denkmal-fuer-die-ermordeten-juden-europas","deutsch-russisches-museum-berlin-karlshorst","deutsche-guggenheim","deutsche-kinemathek-museum-fuer-film-und-fernsehen","deutsches-blinden-museum-berlin","deutsches-historisches-museum","deutsches-technikmuseum","dokumentationszentrum-ns-zwangsarbeit-berlin-schoeneweide","domaene-dahlem-landgut-und-museum","energie-museum-berlin","ephraim-palais-stadtmuseum-berlin","erinnerungsstaette-notaufnahmelager-marienfelde","erstes-berliner-ddr-motorradmuseum","ethnologisches-museum","feuerwehrmuseum-berlin","flatowturm-im-park-babelsberg","forum-willy-brandt-berlin","friedenskirche-im-park-sanssouci","friedrichswerdersche-kirche","gaslaternen-freilichtmuseum-berlin","gaerten-der-welt-im-erholungspark-marzahn","gedenkstaette-berlin-hohenschoenhausen","gedenkstaette-berliner-mauer");


$url = array("gedenkstaette-deutscher-widerstand","gedenkstaette-koepenicker-blutwoche-juni-1933","gedenkstaette-ploetzensee","gedenkstaette-stille-helden","gedenkstaette-und-museum-sachsenhausen","gemaeldegalerie","georg-kolbe-museum","gipsformerei","gotisches-haus","gruenauer-wassersportmuseum","gruenderzeitmuseum-im-gutshaus-mahlsdorf","grenzerfahrungen-alltag-der-deutschen-teilung","hamburger-bahnhof-museum-fuer-gegenwart-berlin","hanf-museum-berlin","haus-am-waldsee","haus-der-kulturen-der-welt","haus-der-wannsee-konferenz","heimatmuseum-reinickendorf","heimatmuseum-zehlendorf","heizungsmuseum-koepenick","historische-muehle-im-park-von-sanssouci","hugenottenmuseum","humboldt-museum","jagdschloss-grunewald","jagdschloss-stern","juedisches-museum-berlin","jugend-museum-im-schoeneberg-museum","juniormuseum-im-ethnologischen-museum","kaethe-kollwitz-museum-berlin","keramik-museum-berlin-kmb","kindermuseum-im-fez-berlin","knoblauchhaus-stadtmuseum-berlin","kpm-welt","kunstbibliothek","kunstforum-der-berliner-volksbank");


$url = array("kunstgewerbemuseum","kunstraum-kreuzbergbethanien","kupferstichkabinett","kw-institute-for-contemporary-art","labyrinth-kindermuseum-berlin","liebermann-villa-am-wannsee","machmit!-museum-fuer-kinder","marmorpalais","martin-gropius-bau","mauermuseum","mausoleum-im-schlosspark-charlottenburg","max-liebermann-haus","maerkisches-museum-stadtmuseum-berlin","muenzkabinett","mendelssohn-remise","militaerhistorisches-museum-der-bundeswehr-luftwaffenmuseum","miniaturmuseum-arikalex","mitte-museum","mori-ogai-gedenkstaette","museum-berggruen","museum-blindenwerkstatt-otto-weidt","museum-charlottenburg-wilmersdorf","museum-der-staatlichen-muenze-berlin","museum-der-unerhoerten-dinge","museum-europaeischer-kulturen","museum-fuer-asiatische-kunst","museum-fuer-fotografie-helmut-newton-stiftung","museum-fuer-islamische-kunst","museum-fuer-kommunikation-berlin","museum-fuer-naturkunde","museum-fuer-vor-und-fruehgeschichte","museum-im-historischen-sudhaus","museum-im-wasserwerk","museum-koepenick","museum-kesselhaus-herzberge","museum-lichtenberg-im-stadthaus");


$url=array("museum-neukoelln","museum-treptow","museumsdorf-dueppel-stadtmuseum-berlin","museumsverbund-pankow","museumsverbund-pankow-heynstrasse-8","museumswohnung-wbs-70","musikinstrumenten-museum-simpk","naturwissenschaftliche-sammlung-stadtmuseum-berlin","neue-kammern-am-schloss-sanssouci","neue-nationalgalerie","neues-museum","neues-palais","nikolaikirche-stadtmuseum-berlin","nolde-stiftung-seebuell-dependance-berlin","orangerieschloss-im-park-sanssouci","pergamonmuseum","pfaueninsel","polizeihistorische-sammlung","pomonatempel-auf-dem-pfingstberg","puppentheater-museum-berlin","roemische-baeder","rotkreuz-museum-berlin","sammlung-industrielle-gestaltung","sammlung-kindheit-und-jugend-stadtmuseum-berlin","sammlung-scharf-gerstenberg","sammlungen-des-winckelmann-instituts","schloss-babelsberg","schloss-britz","schloss-caputh","schloss-cecilienhof","schloss-charlottenburg","schloss-charlottenburg-kleine-orangerie","schloss-charlottenhof","schloss-friedrichsfelde","schloss-glienicke","schloss-koenigs-wusterhausen","schloss-koepenick","schloss-paretz","schloss-rheinsberg","schloss-sanssouci");


$url=array("schloss-schoenhausen","schlossmuseum-oranienburg","schwules-museum","science-center-spectrum","skulpturensammlung-und-museum-fuer-byzantinische-kunst","spandovia-sacra","sportmuseum-berlin","stadtgeschichtliches-museum-spandau","stasimuseum-berlin","steglitz-museum","tempelhof-museum","the-kennedys","the-story-of-berlin","topographie-des-terrors","vorderasiatisches-museum","werkbundarchiv-museum-der-dinge","zeiss-grossplanetarium-berlin","zille-museum","zucker-museum","zweiradmuseum");
*/
$url=array("grenzerfahrungen-alltag-der-deutschen-teilung","haus-der-kulturen-der-welt","haus-der-wannsee-konferenz","heimatmuseum-reinickendorf","heimatmuseum-zehlendorf","heizungsmuseum-koepenick","historische-muehle-im-park-von-sanssouci","hugenottenmuseum","humboldt-museum","jagdschloss-grunewald","jagdschloss-stern","juedisches-museum-berlin","jugend-museum-im-schoeneberg-museum","juniormuseum-im-ethnologischen-museum","kaethe-kollwitz-museum-berlin","keramik-museum-berlin-kmb","kindermuseum-im-fez-berlin","knoblauchhaus-stadtmuseum-berlin","kpm-welt","kunstbibliothek","kunstforum-der-berliner-volksbank");


######################################
# Basic PHP scraper
######################################

require  'scraperwiki/simple_html_dom.php';


for ($i = 0; $i <  count($url); $i++) {

$html = scraperwiki::scrape("http://www.museumsportal-berlin.de/museen/museum-details/$url[$i].html");
print $html;

# Use the PHP Simple HTML DOM Parser to extract <td> tags
$dom = new simple_html_dom();
$dom->load($html);

foreach($dom->find('span[class=fn org]') as $name)
{
    # Store data in the datastore
    print $name->plaintext . "\n";
    //scraperwiki::save(array('str'), array('str' => $str->plaintext));
}


foreach($dom->find('span[class=street-address]') as $str)
{

    
    # Store data in the datastore
   // print $str->plaintext . "\n";
    //scraperwiki::save(array('str'), array('str' => $str->plaintext));
}

foreach($dom->find('span[class=postal-code]') as $plz)
 {
     # Store data in the datastore
    // print $plz->plaintext . "\n";
     //scraperwiki::save(array('plz'), array('plz' => $plz->plaintext));
 }

foreach($dom->find('span[class=locality]') as $stadt)
 {
     # Store data in the datastore
     //print $stadt->plaintext . "\n";
     //scraperwiki::save(array('plz'), array('plz' => $plz->plaintext));
 }


foreach($dom->find('span[class=tel] span[class=value]') as $tel)
  {
        $tel->plaintext = str_replace(' ','',$tel->plaintext);
        $tel->plaintext = str_replace('(','',$tel->plaintext);
        $tel->plaintext = str_replace(')','',$tel->plaintext);
        $tel->plaintext = str_replace('+49','',$tel->plaintext);
         $tel->plaintext = str_replace('-','',$tel->plaintext);
          $tel->plaintext = str_replace('.','',$tel->plaintext);
        break;
     // print $tel->plaintext . "\n";
      //scraperwiki::save(array('plz'), array('plz' => $plz->plaintext));
  }
/*
foreach($dom->find('span[class=tel] span[class=value]',2) as $fax)
   {
       # Store data in the datastore
       print $fax->plaintext . "\n";
       //scraperwiki::save(array('plz'), array('plz' => $plz->plaintext));
   }
*/




//email
foreach($dom->find('span[class=email] a') as $email)
   {
          $email->plaintext = str_replace('(at)','@',$email->plaintext);

       # Store data in the datastore
       //print $email->plaintext . "\n";
       //scraperwiki::save(array('plz'), array('plz' => $plz->plaintext));
   }

foreach($dom->find('span[class=extern] a[href]') as $web)
   {
       # Store data in the datastore
        $web->plaintext = $web->href;
       //print $web . "\n";
       //scraperwiki::save(array('plz'), array('plz' => $plz->plaintext));
   }

scraperwiki::save(array('name','str','plz','stadt','tel','email','web'), array('name' => $name->plaintext ,'str' => $str->plaintext, 'plz' => $plz->plaintext, 'stadt' => $stadt->plaintext, 'tel' => $tel->plaintext, 'email' => $email->plaintext, 'web' => $web->plaintext));


$name=null;
$str=null;
$nr=null;
$plz=null;
$stadt=null;
$tel=null;
$email=null;
$web=null;

}

print(count($url));

?>
