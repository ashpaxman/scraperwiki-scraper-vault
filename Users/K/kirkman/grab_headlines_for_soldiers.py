import scraperwiki
import re
from string import Template
from BeautifulSoup import BeautifulSoup


# this is the main body of the script.
# parse through a team's roster list, grab their names, IDs, URLs, etc, then add to a database

# Make list of teams listed on the Playoff Picture bracket
def scrapeArticlePage(theUrl):

    html1 = scraperwiki.scrape(theUrl)
    soup1 = BeautifulSoup(html1)
    
    titleBlock = soup1.find('div', { 'class':re.compile(r'\btitle-block\b') })
    if titleBlock == None:
        vmixBlock = soup1.find('article', { 'id':'vmix' })
        if vmixBlock == None:
            contentAreaBlock = soup1.find('div', { 'id':'content-area' })
            if contentAreaBlock == None:
                myCaptureBlock = soup1.find('div', { 'class':'MYCImageHeader' })
                if myCaptureBlock == None:
                    galleryBlock = soup1.find('title')
                    headline = galleryBlock.contents[0]
                else:
                    headline = myCaptureBlock.find('a').contents[0]
            else:
                headline = contentAreaBlock.find('h1').contents[0]
        else:
            headline = vmixBlock.find('h1').contents[0]
    else:
        headline = titleBlock.find('h1').contents[0]
    return headline



# this is the code to establish a schema. Only need it the first time I run.

#scraperwiki.sqlite.execute("drop table if exists `swdata`")
#scraperwiki.sqlite.execute("CREATE TABLE `swdata` (`playerId` text, `playerFirstName` text, `playerLastName` text, `playerFullName` text, `playerUrl` text, `playerTeam` text, `playerTeamId` text, `playerPos` text, `playerUni` text)")



# this is the code to launch the script

urlList = ["###","http://www.stltoday.com/news/local/military/marine-who-went-to-siue-dies-in-iraq/article_c13b75f0-bf18-11e1-a235-0019bb30f31a.html","http://www.stltoday.com/news/local/military/marine-corps-will-investigate-drownings-of-two-in-iraq/article_a1df42f8-bf19-11e1-83db-0019bb30f31a.html","http://www.stltoday.com/news/local/military/the-soldier-who-won-t-be-coming-home/article_0418f6e4-bf1a-11e1-818a-0019bb30f31a.html","http://www.stltoday.com/news/local/military/more-than-pay-tribute-to-fallen-marine-from-illinois/article_96626db8-bf1b-11e1-9539-0019bb30f31a.html","http://www.stltoday.com/news/local/military/salute-to-fallen-marine-draws-thanks-from-corps/article_f8d47fcc-bf1b-11e1-8177-0019bb30f31a.html","http://www.stltoday.com/news/local/military/a-year-later-reflections-on-iraq-war-you-have-to/article_56706f06-bf1c-11e1-bccf-0019bb30f31a.html","http://www.stltoday.com/news/local/military/moving-on-without-letting-go/article_536414b0-bf1d-11e1-9b1c-0019bb30f31a.html","@@@","###","http://www.stltoday.com/illinois-man-killed-in-iraq-loved-being-a-marine-family/article_aeabcdb2-bf23-11e1-8161-0019bb30f31a.html","@@@","###","http://www.stltoday.com/news/local/military/soldier-s-unexplained-death-in-iraq-stuns-family/article_ca0478ea-ae96-11e1-a0a0-0019bb30f31a.html","http://www.stltoday.com/news/local/military/soldier-who-died-in-iraq-loved-being-out-there/article_6250002e-ae97-11e1-ac70-0019bb30f31a.html","http://www.stltoday.com/news/local/military/iraqi-heat-killed-u-s-soldier-from-east-alton/article_4af20950-ae9b-11e1-abbe-0019bb30f31a.html","http://www.stltoday.com/news/local/obituaries/perfect-son-perfect-soldier/article_a89f2fd8-ae9b-11e1-a582-0019bb30f31a.html","@@@","###","http://www.stltoday.com/news/local/military/black-hawk-pilot-from-missouri-dies-in-crash-in-iraq/article_87674302-b8bc-11e1-9844-0019bb30f31a.html","@@@","###","http://www.stltoday.com/news/local/military/shooting-at-iraqi-bank-led-to-chopper-disaster/article_f474c4f6-b9ac-11e1-8786-0019bb30f31a.html","http://www.stltoday.com/news/local/military/soldier-killed-in-crash-loved-black-hawks/article_c6de52b8-b9ad-11e1-9ee3-0019bb30f31a.html","http://www.stltoday.com/news/local/military/they-re-all-heroes-says-father-of-gi-killed-in/article_117fca54-b9ae-11e1-826f-0019bb30f31a.html","http://www.stltoday.com/news/local/military/soldier-killed-in-iraq-will-be-buried-dec-with-honors/article_472625e0-b9ae-11e1-b31c-0019bb30f31a.html","http://www.stltoday.com/news/local/military/fairview-heights-soldier-is-laid-to-rest-amid-sights-sounds/article_997b5bb2-b9ae-11e1-afa9-0019bb30f31a.html","@@@","###","http://www.stltoday.com/news/local/military/soldier-from-missouri-is-killed-in-blast-in-iraq/article_ae42d728-b9b3-11e1-b221-0019bb30f31a.html","http://www.stltoday.com/news/local/military/memorial-services-are-set-for-missouri-gi-killed-in-iraq/article_69906e50-b9b4-11e1-8c76-0019bb30f31a.html","http://www.stltoday.com/news/local/military/family-and-small-town-grieve-for-marine/article_bccdc4fe-b9b5-11e1-b810-0019bb30f31a.html","http://www.stltoday.com/news/local/military/casket-of-illinois-marine-killed-in-iraq-comes-home/article_4b96f3c6-b9b7-11e1-b977-0019bb30f31a.html","http://www.stltoday.com/news/local/military/farewell-proud-marine/article_86bf12b2-b9b7-11e1-aaa2-0019bb30f31a.html","@@@","###","http://www.stltoday.com/news/local/military/former-granite-city-resident-killed-in-iraq-combat/article_75a40014-b8b3-11e1-963d-0019bb30f31a.html","http://www.stltoday.com/news/local/military/siue-alumnus-killed-in-iraq-is-laid-to-rest-in/article_03934aec-b8b4-11e1-af00-0019bb30f31a.html","http://www.stltoday.com/news/local/military/blast-in-iraq-kills-soldier-from-area/article_9cbb05de-aea5-11e1-b744-0019bb30f31a.html","http://www.stltoday.com/news/local/military/family-and-fellow-soldiers-weep-at-iraq-casualty-s-funeral/article_48691a2e-aea6-11e1-bb3b-0019bb30f31a.html","http://www.stltoday.com/news/local/military/group-honors-fallen-soldier-with-gifts-for-his-comrades/article_9f2663e4-aea6-11e1-aff3-0019bb30f31a.html","@@@","###","http://www.stltoday.com/news/local/military/marine-featured-on-poster-is-killed/article_ccd19adc-aea8-11e1-a41b-0019bb30f31a.html","http://www.stltoday.com/news/local/military/town-mourns-one-of-its-own/article_08e64676-aea9-11e1-9d38-0019bb30f31a.html","http://www.stltoday.com/news/local/military/marine-s-body-is-returned-from-iraq/article_3d70c02e-aea9-11e1-a012-0019bb30f31a.html","@@@","###","http://www.stltoday.com/news/local/military/alton-area-marine-is-killed-in-iraq/article_bcfeffd4-b671-11e1-a2a7-0019bb30f31a.html","http://www.stltoday.com/news/local/military/christopher-belchik/article_0bfaced8-b672-11e1-b23e-0019bb30f31a.html","http://www.stltoday.com/news/local/military/area-soldier-saved-lives-of-colleagues-in-iraq/article_356e66c6-b672-11e1-82e1-0019bb30f31a.html","http://www.stltoday.com/news/local/military/tree-is-planted-for-marine-killed-in-iraq/article_c4e51278-b672-11e1-9237-0019bb30f31a.html","http://www.stltoday.com/war-widow-believes-iraq-is-better-off/article_98dce7f7-2e67-5396-a50b-3e02bf5da6ab.html","http://www.stltoday.com/news/local/metro/reflections-on-end-of-iraq-war/article_56396507-9f18-54ef-a465-d903f78a6ce5.html","@@@","###","http://www.stltoday.com/news/local/military/fallen-soldier-remembered-in-st-louis/article_55361216-b8b5-11e1-9c8e-0019bb30f31a.html","http://www.stltoday.com/the-new-normal-mourning-those-killed-in-war/article_d6bb0e18-b8b5-11e1-afb6-0019bb30f31a.html","http://www.stltoday.com/news/local/military/southern-illinois-marine-dies-in-iraq-from-wound/article_fa430be8-b8b9-11e1-9e03-0019bb30f31a.html","http://www.stltoday.com/news/local/military/on-his-birthday-illinois-town-honors-fallen-marine/article_a9af38f4-b8ba-11e1-a942-0019bb30f31a.html","@@@","###","http://www.stltoday.com/news/local/military/soldier-from-here-dies-in-afghanistan/article_56eb0038-b0f1-11e1-bb06-001a4bcf6878.html","http://www.stltoday.com/news/local/military/soldier-killed-was-parkway-south-grad/article_e019e0e0-b0f1-11e1-a366-001a4bcf6878.html","http://www.stltoday.com/news/local/military/young-marine-from-millstadt-dies-in-suicide-bombing-in-iraq/article_105725a4-aeb0-11e1-9b45-0019bb30f31a.html","http://www.stltoday.com/news/local/military/illinois-marine-is-buried-with-salutes-and-love/article_53c31e4c-aeb0-11e1-96f1-0019bb30f31a.html","http://www.stltoday.com/news/local/military/medal-honors-marine-s-valor/article_b892ff0e-aeb0-11e1-ad11-0019bb30f31a.html","@@@","###","http://www.stltoday.com/news/local/military/one-illinois-soldier-killed-in-iraq-had-premonition/article_2d2a02ec-b990-11e1-b10d-0019bb30f31a.html","http://www.stltoday.com/news/local/military/two-illinois-soldier-mourned/article_a9b8e98e-b8cf-11e1-b9dd-0019bb30f31a.html","http://www.stltoday.com/news/local/military/one-illinois-soldier-killed-in-iraq-had-premonition/article_2d2a02ec-b990-11e1-b10d-0019bb30f31a.html","http://www.stltoday.com/news/local/military/two-illinois-soldier-mourned/article_a9b8e98e-b8cf-11e1-b9dd-0019bb30f31a.html","@@@","###","http://www.stltoday.com/news/local/military/bomb-in-iraq-killed-mehlville-high-grad/article_2bbe1158-b9b0-11e1-b6d5-0019bb30f31a.html","http://www.stltoday.com/news/local/military/friends-say-soldier-killed-in-iraq-war-was-selfless/article_4ba45ce2-b9b1-11e1-b7e1-0019bb30f31a.html","http://www.stltoday.com/news/local/military/marine-who-was-killed-hailed-from-rhineland-mo/article_adafa822-bf17-11e1-872c-0019bb30f31a.html","http://www.stltoday.com/news/local/military/services-will-be-friday-for-marine-killed-in-iraq/article_fdf1ca9a-bf17-11e1-bb9c-0019bb30f31a.html","@@@","###","http://www.stltoday.com/news/local/military/soldier-s-death-hits-family-hard/article_2f3f911e-aeaa-11e1-96fe-0019bb30f31a.html","http://www.stltoday.com/news/local/metro/from-florissant-soldier-s-family-lays-her-to-rest-among/article_644d6bee-a99f-11e0-9604-001a4bcf6878.html","http://www.stltoday.com/news/local/metro/from-dad-says-soldier-s-loose-teeth-head-wound-suggest/article_faadf242-a9a0-11e0-bfd0-001a4bcf6878.html","http://www.stltoday.com/news/local/metro/from-military-calls-soldier-s-death-suicide/article_dea31566-a9a3-11e0-9085-001a4bcf6878.html","http://www.stltoday.com/news/local/military/families-agonize-at-pace-of-inquiries/article_8ea11e66-b670-11e1-a800-0019bb30f31a.html","http://www.stltoday.com/news/local/metro/from-soldier-s-father-has-one-goal-i-m-trying/article_16b510ca-a9a5-11e0-a8e6-001a4bcf6878.html","http://www.stltoday.com/news/local/metro/students-to-seek-clues-into-death-of-florissant-soldier/article_7f0a2eca-9f83-5a92-9b0b-2ee79450e1b5.html","@@@","###","http://www.stltoday.com/news/local/military/family-learns-of-son-s-death-in-afghanistan/article_72f29d4c-b0fe-11e1-9d1b-001a4bcf6878.html","http://www.stltoday.com/news/local/military/neighbors-recall-with-warmth-soldier-killed-in-afghanistan/article_e21bcb9e-b103-11e1-9b98-001a4bcf6878.html","http://www.stltoday.com/news/local/military/soldier-is-eulogized-as-unselfish-and-loving-to-children/article_26a961f4-b104-11e1-8ccf-001a4bcf6878.html","@@@","###","http://www.stltoday.com/news/local/military/fallen-soldier-s-family-awaits-return-of-body/article_aae41516-b66a-11e1-a2a4-0019bb30f31a.html","@@@","###","http://www.stltoday.com/news/local/military/illinois-soldier-is-killed-fighting-in-iraq/article_494e4764-bf15-11e1-a272-0019bb30f31a.html","http://www.stltoday.com/news/local/military/memorial-for-soldier-is-not-disrupted/article_d924bcbe-bf16-11e1-9ed2-0019bb30f31a.html","http://www.stltoday.com/news/local/military/soldier-who-was-st-charles-county-sheriff-s-deputy-dies/article_0150d420-b670-11e1-8e5b-0019bb30f31a.html","http://www.stltoday.com/news/local/military/families-agonize-at-pace-of-inquiries/article_8ea11e66-b670-11e1-a800-0019bb30f31a.html","@@@","###","http://www.stltoday.com/news/local/military/soldier-from-wildwood-is-killed/article_17a8210a-b108-11e1-9674-001a4bcf6878.html","http://www.stltoday.com/news/local/military/spc-peter-j-pete-navarro/article_38a050de-b109-11e1-b422-001a4bcf6878.html","http://www.stltoday.com/news/local/military/family-members-lay-soldier-to-rest/article_7a6f22ba-b109-11e1-91d2-001a4bcf6878.html","@@@","###","http://www.stltoday.com/news/local/military/slain-soldier-lived-in-granite-city-west-county/article_3e12ad3c-aeac-11e1-bd34-0019bb30f31a.html","@@@","###","http://www.stltoday.com/news/local/military/bomb-kills-army-officer-from-st-louis/article_21c07aca-b0e5-11e1-b397-001a4bcf6878.html","@@@","###","http://www.stltoday.com/news/local/military/marine-from-southern-illinois-is-killed-in-iraq/article_592a4846-b997-11e1-97db-0019bb30f31a.html","http://www.stltoday.com/news/local/military/hundreds-in-illinois-town-mourn-iraq-casualty/article_3a0718bc-b8cb-11e1-9bfe-0019bb30f31a.html","http://www.stltoday.com/news/local/military/death-parts-combat-buddies/article_daac8cbc-ae9d-11e1-84c2-0019bb30f31a.html","http://www.stltoday.com/news/local/military/danger-couldn-t-deter-local-soldier/article_aafdbdb6-b0e5-11e1-8b7d-001a4bcf6878.html","http://www.stltoday.com/news/local/military/lemay-soldier-receives-an-emotional-farewell/article_c0c7a488-b0e8-11e1-874c-001a4bcf6878.html","@@@","###","http://www.stltoday.com/news/local/military/gi-here-is-killed-in-combat-in-iraq/article_985bdca6-b0e0-11e1-863b-001a4bcf6878.html","http://www.stltoday.com/news/local/military/mourners-remember-oakville-soldier-as-dedicated-patriot/article_e8c61634-b0e0-11e1-af9c-001a4bcf6878.html","http://www.stltoday.com/news/local/military/among-these-honored-dead-fresh-graves-in-section-n/article_ed5212d8-b0e1-11e1-a4e8-001a4bcf6878.html","@@@","###","http://www.stltoday.com/news/local/military/illinois-soldier-killed-in-afghanistan-found-purpose-and-pride-in/article_8c3e0296-b66c-11e1-a371-0019bb30f31a.html","http://www.stltoday.com/news/local/military/services-set-for-soldier-killed-in-afghanistan/article_1abac6ee-b66d-11e1-b7d5-0019bb30f31a.html","http://www.stltoday.com/news/local/military/the-scene-may-be-ugly-but-some-ask-didn-t/article_5d35d540-b66d-11e1-a266-0019bb30f31a.html","http://www.stltoday.com/war-foe-s-grandson-is-killed-in-iraq/article_cf2e2af0-b9a4-11e1-ad71-0019bb30f31a.html","http://www.stltoday.com/news/local/military/endless-worry/article_15cad368-b9a6-11e1-9aab-0019bb30f31a.html","@@@","###","http://www.stltoday.com/news/local/military/two-families-mourn-men-killed-serving-in-iraq/article_744f54c4-b99f-11e1-88b3-0019bb30f31a.html","http://www.stltoday.com/news/local/military/a-place-to-hunt-a-place-to-heal/article_0dd2f1ca-b9a3-11e1-92b2-0019bb30f31a.html","http://www.stltoday.com/news/local/military/area-marine-killed-in-combat-in-iraq/article_0ccf0de6-aeb2-11e1-b90b-0019bb30f31a.html","http://www.stltoday.com/news/local/military/eureka-mourns-its-hometown-hero/article_7a25b7d6-aeb3-11e1-9971-0019bb30f31a.html","http://www.stltoday.com/news/local/military/family-community-and-comrades-honor-marine/article_ecf172f0-aeb3-11e1-81f9-0019bb30f31a.html","@@@","###","http://www.stltoday.com/news/local/military/two-families-mourn-men-killed-serving-in-iraq/article_744f54c4-b99f-11e1-88b3-0019bb30f31a.html","http://www.stltoday.com/news/local/military/hillsboro-ill-honors-its-first-iraq-casualty/article_8f37cc24-b9a1-11e1-bbcd-0019bb30f31a.html","","@@@","###","http://www.stltoday.com/news/local/military/granite-city-soldier-is-id-d-as-iraq-crash-victim/article_c43d6906-aeac-11e1-89da-0019bb30f31a.html","http://www.stltoday.com/news/local/military/everyone-is-grieving/article_ff5f5d6e-aeac-11e1-aaef-0019bb30f31a.html","http://www.stltoday.com/news/local/military/family-friends-bury-medic-killed-in-iraq/article_62290b98-aead-11e1-9cf1-0019bb30f31a.html","http://www.stltoday.com/news/local/military/vets-tribute-shows-area-man-s-grave/article_e6ef1ad4-aead-11e1-a8fc-0019bb30f31a.html","@@@","###","http://www.stltoday.com/news/local/military/soldier-from-desloge-is-killed-in-iraq/article_4dcaf798-aea7-11e1-a4f4-0019bb30f31a.html","http://www.stltoday.com/news/local/military/neighbors-honor-fallen-soldier/article_b400099a-aea7-11e1-833e-0019bb30f31a.html","http://www.stltoday.com/news/local/military/medic-dedicated-life-to-helping-others/article_ed041c6c-b0fb-11e1-ad97-001a4bcf6878.html","http://www.stltoday.com/news/local/military/area-firefighters-honor-sailor-who-died-in-iraq/article_a049b610-b0fc-11e1-87b9-001a4bcf6878.html","http://www.stltoday.com/news/local/military/iraqi-baby-s-story-a-gift-mom-says/article_fb4e3fa4-b0fc-11e1-b92c-001a4bcf6878.html","@@@","###","http://www.stltoday.com/news/local/military/fallen-soldier-s-father-assails-u-s-role-in-iraq/article_c1d19e42-b8c7-11e1-8f24-0019bb30f31a.html","@@@","###","http://www.stltoday.com/news/local/military/bomb-blast-in-iraq-kills-soldier-from-union/article_6b88f130-b105-11e1-91c7-001a4bcf6878.html","@@@","###","http://www.stltoday.com/news/local/military/fallen-soldier-had-knack-for-languages/article_d660c576-b0da-11e1-a867-001a4bcf6878.html","http://www.stltoday.com/news/local/military/mass-honors-man-slain-in-iraq/article_5491b68a-b0db-11e1-969a-001a4bcf6878.html","http://www.stltoday.com/news/local/military/family-mourns-major-with-st-louis-ties/article_d4cd4e06-b0e3-11e1-ab82-001a4bcf6878.html","http://www.stltoday.com/news/local/military/ladue-high-grad-with-the-marines-is-killed-in-iraq/article_c21efb0e-b0ef-11e1-a14e-001a4bcf6878.html","http://www.stltoday.com/news/local/military/that-s-a-brave-young-man/article_0d579c8e-b0f0-11e1-999e-001a4bcf6878.html","@@@","###","http://www.stltoday.com/news/local/military/roosevelt-graduate-is-killed-in-iraq-wife-says/article_8b69ff10-b0e4-11e1-b4c5-001a4bcf6878.html","@@@","###","http://www.stltoday.com/news/local/military/area-marine-dies-in-iraq/article_d1eda0ce-b10a-11e1-a5e8-001a4bcf6878.html","http://www.stltoday.com/news/local/military/marine-made-time-to-laugh/article_175fcf06-b10b-11e1-af6a-001a4bcf6878.html","http://www.stltoday.com/news/local/military/afghan-crash-kills-area-gi/article_2dee52e6-b111-11e1-9764-001a4bcf6878.html","http://www.stltoday.com/news/local/military/spc-ryan-garbs-i-am-an-american-soldier/article_d95f8b90-b111-11e1-8edc-001a4bcf6878.html","http://www.stltoday.com/news/local/military/the-grieving-parents/article_e69ebeb0-b112-11e1-98cf-001a4bcf6878.html","@@@","###","http://www.stltoday.com/news/local/military/festus-soldier-called-back-to-duty-dies-in-iraq/article_93889746-b0ea-11e1-8733-001a4bcf6878.html","http://www.stltoday.com/news/local/military/soldier-foresaw-his-death-fianc-e-says/article_69a21686-b0eb-11e1-a6e8-001a4bcf6878.html","http://www.stltoday.com/news/local/military/thousands-mourn-soldier-killed-in-iraq/article_ed003918-b0eb-11e1-896b-001a4bcf6878.html","http://www.stltoday.com/news/local/military/fallen-soldier-memorial-to-be-dedicated-next-week/article_18f819b8-b0ed-11e1-91a5-001a4bcf6878.html","http://www.stltoday.com/news/local/military/playing-the-song-of-soldiers/article_63c54a4c-b0ed-11e1-9e05-001a4bcf6878.html","@@@","###","http://www.stltoday.com/marine-with-ties-to-area-dies/article_b4b5e560-aeae-11e1-bc65-0019bb30f31a.html","@@@","###","http://www.stltoday.com/news/local/military/soldier-from-greenfield-dies-in-iraq/article_b1b18cba-c183-11e1-acbc-0019bb30f31a.html","http://www.stltoday.com/news/local/military/laws-to-limit-protests-at-funerals-seem-to-be-having/article_24fd4db6-c185-11e1-91b5-0019bb30f31a.html","http://www.stltoday.com/news/local/military/area-man-is-killed-in-iraq/article_72c7a2aa-b0e9-11e1-8741-001a4bcf6878.html","http://www.stltoday.com/news/local/military/hundreds-show-respect-for-soldier/article_d69aaca0-b0e9-11e1-bf20-001a4bcf6878.html","@@@","###","http://www.stltoday.com/news/local/military/air-force-sergeant-from-o-fallon-ill-is-killed-in/article_ab9931e0-c186-11e1-8f7c-0019bb30f31a.html","http://www.stltoday.com/news/local/military/veterans-are-honored-at-school/article_18a2bee6-c187-11e1-91c5-0019bb30f31a.html","","@@@","###","http://www.stltoday.com/news/local/military/soldier-killed-in-iraq-starred-on-diamond/article_79ceaeae-c18d-11e1-84d6-0019bb30f31a.html","@@@","###","http://www.stltoday.com/news/local/military/meramec-mourns-wrestler-who-died-serving-in-iraq/article_cd4eb80e-c187-11e1-ad8b-0019bb30f31a.html","@@@","###","http://www.stltoday.com/news/local/military/guardsman-from-belleville-is-killed-by-grenade-in-iraq/article_ba4049e0-b0dd-11e1-b8a4-001a4bcf6878.html","@@@","###","","@@@","###","http://www.stltoday.com/news/local/military/marine-from-st-charles-is-reported-killed-in-iraq/article_96f01406-b0de-11e1-9eef-001a4bcf6878.html","http://www.stltoday.com/news/local/military/fallen-marine-is-buried-in-st-charles/article_c7fb1bcc-b0de-11e1-82f8-001a4bcf6878.html","http://www.stltoday.com/news/local/columns/susan-weich/a-young-man-to-remember-on-this-memorial-day/article_ba376d0a-b0df-11e1-9bcb-001a4bcf6878.html","@@@","###","http://www.stltoday.com/news/local/military/mourners-remember-soldier-s-loyalty-humor/article_b8dd6894-b10f-11e1-93eb-001a4bcf6878.html","http://www.stltoday.com/news/local/military/festus-high-grad-is-killed-in-action-in-iraq/article_71251afe-ab8a-11e1-adfb-0019bb30f31a.html","http://www.stltoday.com/news/local/military/military-families-cope-with-their-loss/article_4539b31a-b110-11e1-a86c-001a4bcf6878.html","@@@","###","http://www.stltoday.com/news/local/military/officer-from-area-is-killed-in-mortar-attack-in-iraq/article_3f7d1bc2-c18e-11e1-aa06-0019bb30f31a.html","http://www.stltoday.com/news/local/military/funeral-set-for-serviceman-killed-in-iraq/article_982e493a-c18e-11e1-9205-0019bb30f31a.html","http://www.stltoday.com/news/local/military/service-honors-iraq-war-victim/article_b8c0bac0-c18e-11e1-bc97-0019bb30f31a.html","@@@","###","http://www.stltoday.com/news/local/military/soldier-from-missouri-killed-in-iraq/article_d6c72772-b0d9-11e1-88a4-001a4bcf6878.html","@@@","###","http://www.stltoday.com/news/local/military/marine-from-fenton-area-is-killed-in-afghanistan/article_33110760-ab89-11e1-983d-0019bb30f31a.html","http://www.stltoday.com/news/local/military/slain-marine-arrives-from-afghanistan/article_57ee8acc-b114-11e1-9335-001a4bcf6878.html","","@@@","###","http://www.stltoday.com/news/local/military/afghan-battle-kills-hazelwood-west-grad/article_c81e7426-b0f4-11e1-8865-001a4bcf6878.html","http://www.stltoday.com/news/local/military/music-laughter-tears-mix-at-gi-s-funeral/article_26d8e28a-b0f5-11e1-a38b-001a4bcf6878.html","http://www.stltoday.com/news/local/military/grieving-veteran-fights-for-wish-to-be-buried-next-to/article_039caeea-b0f6-11e1-b064-001a4bcf6878.html","http://www.stltoday.com/news/was-battle-a-blunder/article_31635f64-ce90-5ddb-a23c-735fc48a25ad.html","http://www.stltoday.com/o-fallon-mo-man-disputes-afghan-battle/vmix_e5c755bc-b10b-11e1-9ed7-001a4bcf6878.html","http://www.stltoday.com/news/national/officers-avoid-reprimand-over-afghan-battle-that-killed-o-fallon/article_68506e30-81a2-5783-97c2-83b4b7c44787.html","@@@","###","http://www.stltoday.com/news/local/military/family-mourns-afghan-war-casualty/article_96535142-ab8f-11e1-b61d-0019bb30f31a.html","http://www.stltoday.com/news/multimedia/pictures/covering-grief/article_001d6b48-5706-5aec-ab7d-fc6722214c35.html","http://www.stltoday.com/news/local/metro/veterans-honor-lost-comrades-on-memorial-day/article_e8836d0d-6897-5e73-b1a2-6aaf1e3edb41.html","@@@","###","http://www.stltoday.com/news/local/military/wentzville-soldier-dies-at-military-base-in-iraq/article_44df2f54-ab92-11e1-9e0c-0019bb30f31a.html","@@@","###","http://www.stltoday.com/news/local/military/belleville-gi-is-killed-in-crash-in-iraq/article_86864340-b10d-11e1-8aba-001a4bcf6878.html","http://www.stltoday.com/news/local/military/family-remembers-soldier-from-belleville-killed-in-iraq/article_35ba843e-ab87-11e1-a255-0019bb30f31a.html","http://www.stltoday.com/news/local/military/fallen-illinois-soldier-loved-serving-in-the-military/article_7d5c815e-c17e-11e1-8747-0019bb30f31a.html","http://www.stltoday.com/news/local/military/hundreds-at-mass-in-highland-honor-their-hometown-hero/article_c46c50ec-c17e-11e1-b837-0019bb30f31a.html","@@@","###","http://www.stltoday.com/news/soldier-from-fenton-is-killed-in-iraq-public-safety/article_fef015f5-6aa2-56d5-9cd8-69a5a6602285.html","http://www.stltoday.com/news/services-this-weekend-for-soldier-killed-in-iraq/article_07e7a162-26cf-5270-8154-d1540bccbe9d.html","http://www.stltoday.com/news/family-friends-of-rockwood-summit-grad-get-chance-to-honor/article_83475d2e-68e0-5f62-b1a0-ed06c65de70c.html","http://interact.stltoday.com/mds/news/html/2439","@@@","###","http://www.stltoday.com/news/local/military/remains-of-area-gi-arrive-back-in-u-s/article_111287c0-a531-57a9-9fe0-11edb47dc8f5.html","http://www.stltoday.com/news/local/military/fallen-soldier-is-laid-to-rest/article_bf3b31f6-1e41-5b03-b022-8668a008ce4d.html","","@@@","###","http://www.stltoday.com/news/local/military/soldier-from-ladue-is-killed-in-afghanistan/article_7cd80493-bf86-5291-b7a1-d4903fd13a6d.html","http://www.stltoday.com/news/local/military/sad-farewell-to-air-force-officer-hundreds-fill-temple-to/article_1ef773ee-06c6-5124-86e2-3bd5039cffc4.html","http://www.stltoday.com/news/local/columns/deb-peterson/schulte-honored-and-remembered/article_b4b2d0a8-c175-11e1-bf68-0019bb30f31a.html","http://www.stltoday.com/news/local/columns/deb-peterson/goodfellow-renames-building-in-honor-of-the-late-st-lt/article_4b225b74-76a1-11e0-b828-0019bb30f31a.html","@@@","###","http://www.stltoday.com/news/local/military/missouri-national-guard-sergeant-is-killed-in-iraq/article_e8d31d52-5f66-5414-b10b-2a033207011e.html","@@@","###","http://www.stltoday.com/news/local/military/two-illinois-soldiers-are-killed-in-afghanistan/article_dbd896b1-a183-59e2-b76b-173f295bbfc3.html","http://www.stltoday.com/news/local/military/hometown-buries-hero/article_3fc8a49b-02ec-5c7a-bb84-929dcb96de47.html","","@@@","###","http://www.stltoday.com/news/local/military/two-illinois-soldiers-are-killed-in-afghanistan/article_dbd896b1-a183-59e2-b76b-173f295bbfc3.html","@@@","###","http://www.stltoday.com/news/local/military/soldier-from-wright-city-dies-in-iraq/article_ffae7794-a03d-5420-a39f-598e8d55a424.html","http://www.stltoday.com/news/local/military/still-no-answers-in-death-of-wright-city-soldier/article_a1f12f81-14c6-5dd8-a2a9-bd23fb0574ac.html","http://www.stltoday.com/suburban-journals/stcharles/young-soldier-had-purpose/article_f6ea4a79-c1c4-5ff9-9b5f-187bdc66313a.html","@@@","###","http://www.stltoday.com/news/local/military/airman-from-troy-ill-killed-in-afghanistan/article_90126182-8c10-5339-8680-3389b53e0e46.html","http://www.stltoday.com/news/local/military/bradley-smith-funeral-route-for-airman-will-be-lined-with/article_1396c5d1-269b-5c95-81c6-9922c5bb2460.html","http://www.stltoday.com/news/local/military/airman-from-troy-remembered-as-an-american-hero/article_67bb8718-9d2a-56d5-ab9b-3a2f460b6ff6.html","http://www.stltoday.com/news/local/crime-and-courts/airman-s-widow-faces-new-loss/article_583ee2ac-c17b-11e1-958e-0019bb30f31a.html","http://www.stltoday.com/news/local/crime-and-courts/second-suspect-arrested-in-theft-of-fallen-airman-s-effects/article_b9dc6b6c-83c8-5808-88fc-c0859bd29395.html","http://www.stltoday.com/news/local/illinois/airman-from-troy-ill-is-awarded-silver-star-posthumously/article_8ff62b1e-6353-11e1-b56b-0019bb30f31a.html","@@@","###","http://www.stltoday.com/news/local/stcharles/funeral-saturday-for-st-charles-soldier/article_d9aa6400-4629-54d6-83c5-53cc861d22a5.html","http://www.stltoday.com/news/local/obituaries/community-mourns-fallen-soldier/article_601ca0bf-865d-59a9-aab1-46f31ac61bc9.html","http://www.stltoday.com/news/local/metro/marine-from-here-dies-in-afghanistan/article_5c789d95-e288-5fc7-a7f4-612685c32807.html","http://www.stltoday.com/news/local/metro/grandmother-says-marine-killed-in-afghanistan-had-wanted-to-go/article_8b07ef65-c539-5bb9-b19b-0bd1287eff4f.html","http://www.stltoday.com/news/local/metro/family-friends-remember-fallen-oakville-marine/article_4259f72f-4784-5dfd-a48c-04e8dc2bc91c.html","@@@","###","http://www.stltoday.com/news/local/metro/marine-from-park-hills-killed-in-afghanistan/article_bf1ca70a-5481-537d-a108-b051d23c5906.html","http://www.stltoday.com/news/local/military/fallen-marine-arrives-home/article_f5d04813-4421-5a94-9b6b-40b8f329bff9.html","","@@@","###","http://www.stltoday.com/news/local/metro/soldier-from-ballwin-dies-in-afghanistan/article_7bf6cf23-57cd-5c33-89d4-bd28844353c7.html","http://www.stltoday.com/news/local/metro/funeral-set-for-ballwin-soldier-killed-in-afghanistan/article_8b09ba72-0753-551f-a568-63b444dc3589.html","http://stltoday.mycapture.com/mycapture/enlarge.asp?image=30732557&event=1047313&CategoryID=17311","http://www.stltoday.com/news/video-honoring-a-fallen-soldier-in-ballwin/vmix_eb6a5314-98f0-11df-993d-0017a4a78c22.html","@@@","###","http://www.stltoday.com/news/services-set-for-soldier-from-jefferson-county-killed-in-afghanistan/article_88f07b82-b623-11df-ab8c-00127992bc8b.html","http://www.stltoday.com/news/local/metro/de-soto-honors-soldier-killed-in-afghanistan/article_95234f4f-6757-5b0d-8a58-e5a4aed2f0f2.html","","http://www.stltoday.com/news/local/military/soldier-from-brighton-killed-in-afghanistan/article_e5ba81ed-32e7-5f9b-a1c9-ebff5603cfc5.html","http://www.stltoday.com/news/local/military/brighton-solider-was-beloved-and-loving/article_20ff8f02-2fc2-5579-91bc-e31ef461bb21.html","@@@","###","http://www.stltoday.com/news/local/stcharles/marine-from-st-charles-county-loved-serving/article_bb21b604-8fa8-5092-8ad6-825ac5688b9b.html","http://www.stltoday.com/news/local/metro/hundreds-gather-to-remember-st-charles-marine/article_372fbbc8-dd2e-11df-a3bf-00127992bc8b.html","","@@@","###","http://www.stltoday.com/news/local/military/town-honors-soldier-who-died-in-iraq/article_e52f664c-e55d-11df-90fd-0017a4a78c22.html","@@@","###","http://www.stltoday.com/news/local/military/marine-from-southern-illinois-killed-in-afghanistan/article_f18c1df4-c166-11e1-a0fe-0019bb30f31a.html","@@@","###","http://www.stltoday.com/news/local/illinois/southern-illinois-marine-dies-in-afghanistan/article_12c436c2-eac8-11df-b492-0017a4a78c22.html","@@@","###","http://www.stltoday.com/news/local/metro/soldier-from-area-killed-in-afghanistan/article_3fbbadae-5f60-5120-9ed4-c3a79a8726b7.html","@@@","###","http://www.stltoday.com/news/local/illinois/marine-from-bethalto-dies-from-injuries-suffered-in-afghanistan/article_7b2299f3-aa45-5bee-8b39-a3fe77c77a02.html","http://www.stltoday.com/news/local/illinois/bethalto-marine-mourned-buried-with-honors/article_c0385ce4-1911-11e0-bcce-0017a4a78c22.html","http://stltoday.mycapture.com/mycapture/enlarge.asp?image=33499294&event=1147430&CategoryID=38578","@@@","###","http://www.stltoday.com/news/local/metro/missouri-soldier-dies-of-injuries-after-afghan-missile-attack/article_a7cfd468-edc1-11e0-b4dc-0019bb30f31a.html","@@@","###","http://www.stltoday.com/news/local/metro/soldier-from-rolla-killed-in-afghanistan/article_3335ba84-9f4e-11e1-90e5-001a4bcf6878.html","http://www.stltoday.com/news/local/metro/veterans-honor-lost-comrades-on-memorial-day/article_e8836d0d-6897-5e73-b1a2-6aaf1e3edb41.html","","@@@","###","http://www.stltoday.com/news/local/obituaries/sean-patrick-sullivan-funeral-procession/collection_495e909c-5b4b-11e2-9e26-001a4bcf6878.html","@@@"]



rowcount = 0
totalcount = 0
resumecount = -1

for idx,url in enumerate(urlList):
#    if totalcount > resumecount:
        if url == '###':
            print url
        elif url == '@@@':
            print url
            rowcount += 1
        else:
            if url != '':
                theHed = scrapeArticlePage(url)
                print theHed
                print url
            else:
                theHed = ''
            totalcount += 1
            record = {}
            record['linkId'] = totalcount
            record['rowId'] = rowcount
            record['url'] = url
            record['hed'] = theHed
    
            #print record
            if record.has_key('linkId'):
                # save records to the datastore
                scraperwiki.sqlite.save(['linkId'],record)
