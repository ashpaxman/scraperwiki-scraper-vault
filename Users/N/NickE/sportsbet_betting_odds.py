import scraperwiki
import lxml.html

pages = ['http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Tangney-(WA)-570604.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/New-England-(NSW)-570605.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Barton-(NSW)-590889.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Goldstein-(VIC)-570503.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Wakefield-(SA)-590930.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Berowra-(NSW)-570403.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Grey-(SA)-570544.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Cowan-(WA)-570577.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Kingston-(SA)-570547.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Bass-(TAS)-570606.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Greenway-(NSW)-570566.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Dunkley-(VIC)-570419.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Makin-(SA)-570549.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Hindmarsh-(SA)-570545.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Aston-(VIC)-570399.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Bendigo-(VIC)-570404.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Groom-(QLD)-570657.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Isaacs-(VIC)-570511.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Shortland-(NSW)-570647.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Ballarat-(VIC)-570400.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Gorton-(VIC)-570504.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Cowper-(NSW)-570529.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Gellibrand-(VIC)-570421.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Flynn-(QLD)-570648.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Sydney-(NSW)-570649.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Batman-(VIC)-570401.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Cook-(NSW)-570526.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Casey-(VIC)-570408.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Mayo-(SA)-570550.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Banks-(NSW)-570398.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Melbourne-Ports-(VIC)-570531.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Lyne-(NSW)-570578.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Bennelong-(NSW)-570402.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Blaxland-(NSW)-570405.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Bruce-(VIC)-570406.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Hunter-(NSW)-570572.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Eden-Monaro-(NSW)-570540.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Hughes-(NSW)-570570.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Fairfax-(QLD)-570631.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Calwell-(VIC)-570407.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Jagajaga-(VIC)-570512.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Fisher-(QLD)-570645.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Hinkler-(QLD)-570663.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Dawson-(QLD)-570616.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Forde-(QLD)-570650.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Lyons-(TAS)-570615.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Chisholm-(VIC)-570409.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Corangamite-(VIC)-570416.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Lilley-(QLD)-570674.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Corio-(VIC)-570417.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Adelaide-(SA)-570564.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Kingsford-Smith-(NSW)-570573.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Reid-(NSW)-570636.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Calare-(NSW)-570513.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Deakin-(VIC)-570418.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Flinders-(VIC)-570420.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Lingiari-(NT)-570590.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Capricornia-(QLD)-570610.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Hume-(NSW)-570571.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Petrie-(QLD)-570703.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Curtin-(WA)-570579.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Brand-(WA)-570574.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Lindsay-(NSW)-570575.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Throsby-(NSW)-570651.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Cunningham-(NSW)-570533.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Indi-(VIC)-570509.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Melbourne-(VIC)-570528.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Page-(NSW)-570622.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Canning-(WA)-570576.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Bradfield-(NSW)-570510.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Charlton-(NSW)-570518.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Wide-Bay-(QLD)-570691.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Menzies-(VIC)-570534.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Moncrieff-(QLD)-570715.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Farrer-(NSW)-570541.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Oxley-(QLD)-570707.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Durack-(WA)-570580.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Forrest-(WA)-570581.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Newcastle-(NSW)-570608.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Dickson-(QLD)-570618.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Riverina-(NSW)-570642.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Warringah-(NSW)-570653.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Kennedy-(QLD)-570664.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Robertson-(NSW)-570646.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Griffith-(QLD)-570654.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Longman-(QLD)-570679.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Moreton-(QLD)-570713.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Boothby-(SA)-570542.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Maranoa-(QLD)-570680.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Ryan-(QLD)-570694.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Blair-(QLD)-570582.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Braddon-(TAS)-570609.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Watson-(NSW)-570656.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Murray-(VIC)-570535.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Macarthur-(NSW)-570583.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Bowman-(QLD)-570591.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/North-Sydney-(NSW)-570620.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Wentworth-(NSW)-570658.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Leichhardt-(QLD)-570668.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Scullin-(VIC)-570536.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Gippsland-(VIC)-570501.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Kooyong-(VIC)-570516.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Dobell-(NSW)-570537.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Fowler-(NSW)-570543.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/McMillan-(VIC)-570527.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Gilmore-(NSW)-570546.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Werriwa-(NSW)-570659.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Rankin-(QLD)-570699.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Hasluck-(WA)-570586.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/McMahon-(NSW)-570660.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Maribyrnong-(VIC)-570524.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Richmond-(NSW)-570640.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Wannon-(VIC)-570538.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Solomon-(NT)-570593.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Wills-(VIC)-570539.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/La-Trobe-(VIC)-570517.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Lalor-(VIC)-570519.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Mallee-(VIC)-570522.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Chifley-(NSW)-570523.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Grayndler-(NSW)-570548.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/McEwen-(VIC)-570525.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Bonner-(QLD)-570585.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Fadden-(QLD)-570624.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Pearce-(WA)-570594.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Franklin-(TAS)-570613.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/McPherson-(QLD)-570681.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Herbert-(QLD)-570661.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Mackellar-(NSW)-570587.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Wright-(QLD)-570685.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Paterson-(NSW)-570635.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Parkes-(NSW)-570627.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Higgins-(VIC)-570506.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Moore-(WA)-570589.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/OConnor-(WA)-570592.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Hotham-(VIC)-570508.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Macquarie-(NSW)-570595.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Perth-(WA)-570596.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Stirling-(WA)-570598.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Canberra-(ACT)-570599.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Mitchell-(NSW)-570600.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Denison-(TAS)-570611.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Port-Adelaide-(SA)-570562.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Barker-(SA)-570565.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Swan-(WA)-570601.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Brisbane-(QLD)-570602.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Holt-(VIC)-570507.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Sturt-(SA)-570563.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Fraser-(ACT)-570603.html',]

fakepages = ['http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Port-Adelaide-(SA)-570562.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Petrie-(QLD)-570703.html']  

for url in pages:
    html = scraperwiki.scrape(url)
    root = lxml.html.fromstring(html)
    title = root.cssselect("title")[0].text.split('- ')[0].strip()
    titleneat = title.replace('(','').replace(')','')
    print 'Coalition (' + titleneat + ')'
    spans = root.cssselect(".price-link span")
    spanlist = []
    for x in range(0, len(spans)):
        spanlist.append((spans[x].text).strip())
    try:
        labor = spanlist[spanlist.index('Labor (' + titleneat + ')') + 1]
    except Exception as error:
        print error
        labor = 'na' 

    if url == 'http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Kingsford-Smith-(NSW)-570573.html':
        coalition = spanlist[spanlist.index('Coalition (' + titleneat) + 1]
    else:
        try:
            coalition = spanlist[spanlist.index('Coalition (' + titleneat + ')') + 1]
        except:
            coalition = 'na'

    try:
        pup = spanlist[spanlist.index('PUP (' + titleneat + ')') + 1]
    except Exception as error:
        print error
        pup = 'na'

    try:
        greens = spanlist[spanlist.index('Greens (' + titleneat + ')') + 1]
    except Exception as error:
        print error
        greens = 'na'

    try: 
        anyother = spanlist[spanlist.index('Any Other (' + titleneat + ')') + 1]
    except Exception as error:
        print error
        anyother = 'na'

    try:
        spanlist[spanlist.index('KAP (' + titleneat + ')') + 1]
    except Exception as error:
        print error
        kap = 'na'

    print title
    print url
    print spanlist

    data = {}
    data['labor'] = labor
    data['coalition'] = coalition
    data['pup'] = pup
    data['greens'] = greens
    data['kap'] = kap
    data['anyother'] = anyother
    data['source'] = url
    data['electorate'] = title
    scraperwiki.sqlite.save(unique_keys=["electorate"], data=data)
    scraperwiki.sqlite.save_var('upto', url)
import scraperwiki
import lxml.html

pages = ['http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Tangney-(WA)-570604.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/New-England-(NSW)-570605.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Barton-(NSW)-590889.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Goldstein-(VIC)-570503.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Wakefield-(SA)-590930.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Berowra-(NSW)-570403.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Grey-(SA)-570544.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Cowan-(WA)-570577.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Kingston-(SA)-570547.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Bass-(TAS)-570606.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Greenway-(NSW)-570566.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Dunkley-(VIC)-570419.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Makin-(SA)-570549.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Hindmarsh-(SA)-570545.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Aston-(VIC)-570399.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Bendigo-(VIC)-570404.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Groom-(QLD)-570657.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Isaacs-(VIC)-570511.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Shortland-(NSW)-570647.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Ballarat-(VIC)-570400.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Gorton-(VIC)-570504.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Cowper-(NSW)-570529.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Gellibrand-(VIC)-570421.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Flynn-(QLD)-570648.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Sydney-(NSW)-570649.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Batman-(VIC)-570401.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Cook-(NSW)-570526.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Casey-(VIC)-570408.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Mayo-(SA)-570550.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Banks-(NSW)-570398.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Melbourne-Ports-(VIC)-570531.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Lyne-(NSW)-570578.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Bennelong-(NSW)-570402.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Blaxland-(NSW)-570405.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Bruce-(VIC)-570406.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Hunter-(NSW)-570572.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Eden-Monaro-(NSW)-570540.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Hughes-(NSW)-570570.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Fairfax-(QLD)-570631.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Calwell-(VIC)-570407.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Jagajaga-(VIC)-570512.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Fisher-(QLD)-570645.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Hinkler-(QLD)-570663.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Dawson-(QLD)-570616.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Forde-(QLD)-570650.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Lyons-(TAS)-570615.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Chisholm-(VIC)-570409.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Corangamite-(VIC)-570416.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Lilley-(QLD)-570674.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Corio-(VIC)-570417.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Adelaide-(SA)-570564.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Kingsford-Smith-(NSW)-570573.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Reid-(NSW)-570636.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Calare-(NSW)-570513.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Deakin-(VIC)-570418.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Flinders-(VIC)-570420.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Lingiari-(NT)-570590.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Capricornia-(QLD)-570610.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Hume-(NSW)-570571.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Petrie-(QLD)-570703.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Curtin-(WA)-570579.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Brand-(WA)-570574.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Lindsay-(NSW)-570575.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Throsby-(NSW)-570651.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Cunningham-(NSW)-570533.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Indi-(VIC)-570509.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Melbourne-(VIC)-570528.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Page-(NSW)-570622.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Canning-(WA)-570576.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Bradfield-(NSW)-570510.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Charlton-(NSW)-570518.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Wide-Bay-(QLD)-570691.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Menzies-(VIC)-570534.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Moncrieff-(QLD)-570715.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Farrer-(NSW)-570541.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Oxley-(QLD)-570707.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Durack-(WA)-570580.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Forrest-(WA)-570581.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Newcastle-(NSW)-570608.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Dickson-(QLD)-570618.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Riverina-(NSW)-570642.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Warringah-(NSW)-570653.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Kennedy-(QLD)-570664.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Robertson-(NSW)-570646.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Griffith-(QLD)-570654.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Longman-(QLD)-570679.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Moreton-(QLD)-570713.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Boothby-(SA)-570542.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Maranoa-(QLD)-570680.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Ryan-(QLD)-570694.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Blair-(QLD)-570582.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Braddon-(TAS)-570609.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Watson-(NSW)-570656.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Murray-(VIC)-570535.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Macarthur-(NSW)-570583.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Bowman-(QLD)-570591.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/North-Sydney-(NSW)-570620.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Wentworth-(NSW)-570658.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Leichhardt-(QLD)-570668.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Scullin-(VIC)-570536.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Gippsland-(VIC)-570501.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Kooyong-(VIC)-570516.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Dobell-(NSW)-570537.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Fowler-(NSW)-570543.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/McMillan-(VIC)-570527.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Gilmore-(NSW)-570546.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Werriwa-(NSW)-570659.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Rankin-(QLD)-570699.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Hasluck-(WA)-570586.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/McMahon-(NSW)-570660.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Maribyrnong-(VIC)-570524.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Richmond-(NSW)-570640.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Wannon-(VIC)-570538.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Solomon-(NT)-570593.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Wills-(VIC)-570539.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/La-Trobe-(VIC)-570517.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Lalor-(VIC)-570519.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Mallee-(VIC)-570522.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Chifley-(NSW)-570523.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Grayndler-(NSW)-570548.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/McEwen-(VIC)-570525.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Bonner-(QLD)-570585.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Fadden-(QLD)-570624.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Pearce-(WA)-570594.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Franklin-(TAS)-570613.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/McPherson-(QLD)-570681.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Herbert-(QLD)-570661.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Mackellar-(NSW)-570587.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Wright-(QLD)-570685.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Paterson-(NSW)-570635.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Parkes-(NSW)-570627.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Higgins-(VIC)-570506.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Moore-(WA)-570589.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/OConnor-(WA)-570592.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Hotham-(VIC)-570508.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Macquarie-(NSW)-570595.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Perth-(WA)-570596.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Stirling-(WA)-570598.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Canberra-(ACT)-570599.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Mitchell-(NSW)-570600.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Denison-(TAS)-570611.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Port-Adelaide-(SA)-570562.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Barker-(SA)-570565.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Swan-(WA)-570601.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Brisbane-(QLD)-570602.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Holt-(VIC)-570507.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Sturt-(SA)-570563.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Fraser-(ACT)-570603.html',]

fakepages = ['http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Port-Adelaide-(SA)-570562.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Petrie-(QLD)-570703.html']  

for url in pages:
    html = scraperwiki.scrape(url)
    root = lxml.html.fromstring(html)
    title = root.cssselect("title")[0].text.split('- ')[0].strip()
    titleneat = title.replace('(','').replace(')','')
    print 'Coalition (' + titleneat + ')'
    spans = root.cssselect(".price-link span")
    spanlist = []
    for x in range(0, len(spans)):
        spanlist.append((spans[x].text).strip())
    try:
        labor = spanlist[spanlist.index('Labor (' + titleneat + ')') + 1]
    except Exception as error:
        print error
        labor = 'na' 

    if url == 'http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Kingsford-Smith-(NSW)-570573.html':
        coalition = spanlist[spanlist.index('Coalition (' + titleneat) + 1]
    else:
        try:
            coalition = spanlist[spanlist.index('Coalition (' + titleneat + ')') + 1]
        except:
            coalition = 'na'

    try:
        pup = spanlist[spanlist.index('PUP (' + titleneat + ')') + 1]
    except Exception as error:
        print error
        pup = 'na'

    try:
        greens = spanlist[spanlist.index('Greens (' + titleneat + ')') + 1]
    except Exception as error:
        print error
        greens = 'na'

    try: 
        anyother = spanlist[spanlist.index('Any Other (' + titleneat + ')') + 1]
    except Exception as error:
        print error
        anyother = 'na'

    try:
        spanlist[spanlist.index('KAP (' + titleneat + ')') + 1]
    except Exception as error:
        print error
        kap = 'na'

    print title
    print url
    print spanlist

    data = {}
    data['labor'] = labor
    data['coalition'] = coalition
    data['pup'] = pup
    data['greens'] = greens
    data['kap'] = kap
    data['anyother'] = anyother
    data['source'] = url
    data['electorate'] = title
    scraperwiki.sqlite.save(unique_keys=["electorate"], data=data)
    scraperwiki.sqlite.save_var('upto', url)
import scraperwiki
import lxml.html

pages = ['http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Tangney-(WA)-570604.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/New-England-(NSW)-570605.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Barton-(NSW)-590889.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Goldstein-(VIC)-570503.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Wakefield-(SA)-590930.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Berowra-(NSW)-570403.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Grey-(SA)-570544.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Cowan-(WA)-570577.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Kingston-(SA)-570547.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Bass-(TAS)-570606.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Greenway-(NSW)-570566.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Dunkley-(VIC)-570419.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Makin-(SA)-570549.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Hindmarsh-(SA)-570545.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Aston-(VIC)-570399.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Bendigo-(VIC)-570404.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Groom-(QLD)-570657.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Isaacs-(VIC)-570511.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Shortland-(NSW)-570647.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Ballarat-(VIC)-570400.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Gorton-(VIC)-570504.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Cowper-(NSW)-570529.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Gellibrand-(VIC)-570421.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Flynn-(QLD)-570648.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Sydney-(NSW)-570649.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Batman-(VIC)-570401.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Cook-(NSW)-570526.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Casey-(VIC)-570408.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Mayo-(SA)-570550.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Banks-(NSW)-570398.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Melbourne-Ports-(VIC)-570531.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Lyne-(NSW)-570578.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Bennelong-(NSW)-570402.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Blaxland-(NSW)-570405.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Bruce-(VIC)-570406.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Hunter-(NSW)-570572.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Eden-Monaro-(NSW)-570540.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Hughes-(NSW)-570570.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Fairfax-(QLD)-570631.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Calwell-(VIC)-570407.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Jagajaga-(VIC)-570512.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Fisher-(QLD)-570645.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Hinkler-(QLD)-570663.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Dawson-(QLD)-570616.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Forde-(QLD)-570650.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Lyons-(TAS)-570615.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Chisholm-(VIC)-570409.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Corangamite-(VIC)-570416.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Lilley-(QLD)-570674.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Corio-(VIC)-570417.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Adelaide-(SA)-570564.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Kingsford-Smith-(NSW)-570573.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Reid-(NSW)-570636.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Calare-(NSW)-570513.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Deakin-(VIC)-570418.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Flinders-(VIC)-570420.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Lingiari-(NT)-570590.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Capricornia-(QLD)-570610.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Hume-(NSW)-570571.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Petrie-(QLD)-570703.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Curtin-(WA)-570579.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Brand-(WA)-570574.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Lindsay-(NSW)-570575.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Throsby-(NSW)-570651.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Cunningham-(NSW)-570533.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Indi-(VIC)-570509.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Melbourne-(VIC)-570528.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Page-(NSW)-570622.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Canning-(WA)-570576.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Bradfield-(NSW)-570510.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Charlton-(NSW)-570518.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Wide-Bay-(QLD)-570691.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Menzies-(VIC)-570534.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Moncrieff-(QLD)-570715.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Farrer-(NSW)-570541.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Oxley-(QLD)-570707.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Durack-(WA)-570580.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Forrest-(WA)-570581.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Newcastle-(NSW)-570608.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Dickson-(QLD)-570618.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Riverina-(NSW)-570642.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Warringah-(NSW)-570653.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Kennedy-(QLD)-570664.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Robertson-(NSW)-570646.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Griffith-(QLD)-570654.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Longman-(QLD)-570679.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Moreton-(QLD)-570713.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Boothby-(SA)-570542.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Maranoa-(QLD)-570680.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Ryan-(QLD)-570694.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Blair-(QLD)-570582.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Braddon-(TAS)-570609.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Watson-(NSW)-570656.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Murray-(VIC)-570535.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Macarthur-(NSW)-570583.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Bowman-(QLD)-570591.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/North-Sydney-(NSW)-570620.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Wentworth-(NSW)-570658.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Leichhardt-(QLD)-570668.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Scullin-(VIC)-570536.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Gippsland-(VIC)-570501.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Kooyong-(VIC)-570516.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Dobell-(NSW)-570537.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Fowler-(NSW)-570543.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/McMillan-(VIC)-570527.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Gilmore-(NSW)-570546.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Werriwa-(NSW)-570659.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Rankin-(QLD)-570699.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Hasluck-(WA)-570586.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/McMahon-(NSW)-570660.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Maribyrnong-(VIC)-570524.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Richmond-(NSW)-570640.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Wannon-(VIC)-570538.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Solomon-(NT)-570593.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Wills-(VIC)-570539.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/La-Trobe-(VIC)-570517.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Lalor-(VIC)-570519.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Mallee-(VIC)-570522.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Chifley-(NSW)-570523.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Grayndler-(NSW)-570548.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/McEwen-(VIC)-570525.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Bonner-(QLD)-570585.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Fadden-(QLD)-570624.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Pearce-(WA)-570594.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Franklin-(TAS)-570613.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/McPherson-(QLD)-570681.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Herbert-(QLD)-570661.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Mackellar-(NSW)-570587.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Wright-(QLD)-570685.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Paterson-(NSW)-570635.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Parkes-(NSW)-570627.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Higgins-(VIC)-570506.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Moore-(WA)-570589.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/OConnor-(WA)-570592.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Hotham-(VIC)-570508.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Macquarie-(NSW)-570595.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Perth-(WA)-570596.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Stirling-(WA)-570598.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Canberra-(ACT)-570599.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Mitchell-(NSW)-570600.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Denison-(TAS)-570611.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Port-Adelaide-(SA)-570562.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Barker-(SA)-570565.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Swan-(WA)-570601.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Brisbane-(QLD)-570602.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Holt-(VIC)-570507.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Sturt-(SA)-570563.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Fraser-(ACT)-570603.html',]

fakepages = ['http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Port-Adelaide-(SA)-570562.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Petrie-(QLD)-570703.html']  

for url in pages:
    html = scraperwiki.scrape(url)
    root = lxml.html.fromstring(html)
    title = root.cssselect("title")[0].text.split('- ')[0].strip()
    titleneat = title.replace('(','').replace(')','')
    print 'Coalition (' + titleneat + ')'
    spans = root.cssselect(".price-link span")
    spanlist = []
    for x in range(0, len(spans)):
        spanlist.append((spans[x].text).strip())
    try:
        labor = spanlist[spanlist.index('Labor (' + titleneat + ')') + 1]
    except Exception as error:
        print error
        labor = 'na' 

    if url == 'http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Kingsford-Smith-(NSW)-570573.html':
        coalition = spanlist[spanlist.index('Coalition (' + titleneat) + 1]
    else:
        try:
            coalition = spanlist[spanlist.index('Coalition (' + titleneat + ')') + 1]
        except:
            coalition = 'na'

    try:
        pup = spanlist[spanlist.index('PUP (' + titleneat + ')') + 1]
    except Exception as error:
        print error
        pup = 'na'

    try:
        greens = spanlist[spanlist.index('Greens (' + titleneat + ')') + 1]
    except Exception as error:
        print error
        greens = 'na'

    try: 
        anyother = spanlist[spanlist.index('Any Other (' + titleneat + ')') + 1]
    except Exception as error:
        print error
        anyother = 'na'

    try:
        spanlist[spanlist.index('KAP (' + titleneat + ')') + 1]
    except Exception as error:
        print error
        kap = 'na'

    print title
    print url
    print spanlist

    data = {}
    data['labor'] = labor
    data['coalition'] = coalition
    data['pup'] = pup
    data['greens'] = greens
    data['kap'] = kap
    data['anyother'] = anyother
    data['source'] = url
    data['electorate'] = title
    scraperwiki.sqlite.save(unique_keys=["electorate"], data=data)
    scraperwiki.sqlite.save_var('upto', url)
import scraperwiki
import lxml.html

pages = ['http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Tangney-(WA)-570604.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/New-England-(NSW)-570605.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Barton-(NSW)-590889.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Goldstein-(VIC)-570503.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Wakefield-(SA)-590930.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Berowra-(NSW)-570403.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Grey-(SA)-570544.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Cowan-(WA)-570577.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Kingston-(SA)-570547.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Bass-(TAS)-570606.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Greenway-(NSW)-570566.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Dunkley-(VIC)-570419.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Makin-(SA)-570549.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Hindmarsh-(SA)-570545.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Aston-(VIC)-570399.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Bendigo-(VIC)-570404.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Groom-(QLD)-570657.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Isaacs-(VIC)-570511.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Shortland-(NSW)-570647.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Ballarat-(VIC)-570400.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Gorton-(VIC)-570504.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Cowper-(NSW)-570529.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Gellibrand-(VIC)-570421.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Flynn-(QLD)-570648.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Sydney-(NSW)-570649.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Batman-(VIC)-570401.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Cook-(NSW)-570526.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Casey-(VIC)-570408.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Mayo-(SA)-570550.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Banks-(NSW)-570398.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Melbourne-Ports-(VIC)-570531.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Lyne-(NSW)-570578.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Bennelong-(NSW)-570402.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Blaxland-(NSW)-570405.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Bruce-(VIC)-570406.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Hunter-(NSW)-570572.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Eden-Monaro-(NSW)-570540.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Hughes-(NSW)-570570.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Fairfax-(QLD)-570631.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Calwell-(VIC)-570407.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Jagajaga-(VIC)-570512.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Fisher-(QLD)-570645.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Hinkler-(QLD)-570663.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Dawson-(QLD)-570616.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Forde-(QLD)-570650.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Lyons-(TAS)-570615.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Chisholm-(VIC)-570409.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Corangamite-(VIC)-570416.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Lilley-(QLD)-570674.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Corio-(VIC)-570417.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Adelaide-(SA)-570564.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Kingsford-Smith-(NSW)-570573.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Reid-(NSW)-570636.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Calare-(NSW)-570513.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Deakin-(VIC)-570418.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Flinders-(VIC)-570420.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Lingiari-(NT)-570590.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Capricornia-(QLD)-570610.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Hume-(NSW)-570571.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Petrie-(QLD)-570703.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Curtin-(WA)-570579.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Brand-(WA)-570574.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Lindsay-(NSW)-570575.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Throsby-(NSW)-570651.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Cunningham-(NSW)-570533.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Indi-(VIC)-570509.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Melbourne-(VIC)-570528.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Page-(NSW)-570622.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Canning-(WA)-570576.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Bradfield-(NSW)-570510.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Charlton-(NSW)-570518.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Wide-Bay-(QLD)-570691.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Menzies-(VIC)-570534.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Moncrieff-(QLD)-570715.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Farrer-(NSW)-570541.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Oxley-(QLD)-570707.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Durack-(WA)-570580.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Forrest-(WA)-570581.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Newcastle-(NSW)-570608.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Dickson-(QLD)-570618.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Riverina-(NSW)-570642.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Warringah-(NSW)-570653.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Kennedy-(QLD)-570664.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Robertson-(NSW)-570646.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Griffith-(QLD)-570654.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Longman-(QLD)-570679.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Moreton-(QLD)-570713.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Boothby-(SA)-570542.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Maranoa-(QLD)-570680.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Ryan-(QLD)-570694.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Blair-(QLD)-570582.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Braddon-(TAS)-570609.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Watson-(NSW)-570656.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Murray-(VIC)-570535.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Macarthur-(NSW)-570583.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Bowman-(QLD)-570591.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/North-Sydney-(NSW)-570620.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Wentworth-(NSW)-570658.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Leichhardt-(QLD)-570668.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Scullin-(VIC)-570536.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Gippsland-(VIC)-570501.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Kooyong-(VIC)-570516.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Dobell-(NSW)-570537.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Fowler-(NSW)-570543.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/McMillan-(VIC)-570527.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Gilmore-(NSW)-570546.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Werriwa-(NSW)-570659.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Rankin-(QLD)-570699.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Hasluck-(WA)-570586.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/McMahon-(NSW)-570660.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Maribyrnong-(VIC)-570524.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Richmond-(NSW)-570640.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Wannon-(VIC)-570538.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Solomon-(NT)-570593.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Wills-(VIC)-570539.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/La-Trobe-(VIC)-570517.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Lalor-(VIC)-570519.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Mallee-(VIC)-570522.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Chifley-(NSW)-570523.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Grayndler-(NSW)-570548.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/McEwen-(VIC)-570525.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Bonner-(QLD)-570585.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Fadden-(QLD)-570624.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Pearce-(WA)-570594.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Franklin-(TAS)-570613.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/McPherson-(QLD)-570681.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Herbert-(QLD)-570661.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Mackellar-(NSW)-570587.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Wright-(QLD)-570685.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Paterson-(NSW)-570635.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Parkes-(NSW)-570627.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Higgins-(VIC)-570506.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Moore-(WA)-570589.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/OConnor-(WA)-570592.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Hotham-(VIC)-570508.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Macquarie-(NSW)-570595.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Perth-(WA)-570596.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Stirling-(WA)-570598.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Canberra-(ACT)-570599.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Mitchell-(NSW)-570600.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Denison-(TAS)-570611.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Port-Adelaide-(SA)-570562.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Barker-(SA)-570565.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Swan-(WA)-570601.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Brisbane-(QLD)-570602.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Holt-(VIC)-570507.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Sturt-(SA)-570563.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Fraser-(ACT)-570603.html',]

fakepages = ['http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Port-Adelaide-(SA)-570562.html','http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Petrie-(QLD)-570703.html']  

for url in pages:
    html = scraperwiki.scrape(url)
    root = lxml.html.fromstring(html)
    title = root.cssselect("title")[0].text.split('- ')[0].strip()
    titleneat = title.replace('(','').replace(')','')
    print 'Coalition (' + titleneat + ')'
    spans = root.cssselect(".price-link span")
    spanlist = []
    for x in range(0, len(spans)):
        spanlist.append((spans[x].text).strip())
    try:
        labor = spanlist[spanlist.index('Labor (' + titleneat + ')') + 1]
    except Exception as error:
        print error
        labor = 'na' 

    if url == 'http://www.sportsbet.com.au/betting/politics/australian-federal-politics/Kingsford-Smith-(NSW)-570573.html':
        coalition = spanlist[spanlist.index('Coalition (' + titleneat) + 1]
    else:
        try:
            coalition = spanlist[spanlist.index('Coalition (' + titleneat + ')') + 1]
        except:
            coalition = 'na'

    try:
        pup = spanlist[spanlist.index('PUP (' + titleneat + ')') + 1]
    except Exception as error:
        print error
        pup = 'na'

    try:
        greens = spanlist[spanlist.index('Greens (' + titleneat + ')') + 1]
    except Exception as error:
        print error
        greens = 'na'

    try: 
        anyother = spanlist[spanlist.index('Any Other (' + titleneat + ')') + 1]
    except Exception as error:
        print error
        anyother = 'na'

    try:
        spanlist[spanlist.index('KAP (' + titleneat + ')') + 1]
    except Exception as error:
        print error
        kap = 'na'

    print title
    print url
    print spanlist

    data = {}
    data['labor'] = labor
    data['coalition'] = coalition
    data['pup'] = pup
    data['greens'] = greens
    data['kap'] = kap
    data['anyother'] = anyother
    data['source'] = url
    data['electorate'] = title
    scraperwiki.sqlite.save(unique_keys=["electorate"], data=data)
    scraperwiki.sqlite.save_var('upto', url)
