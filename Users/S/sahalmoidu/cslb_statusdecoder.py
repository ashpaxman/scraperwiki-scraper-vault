import urllib, urllib2
statdic = {'014005024000000000000000000000': '00760487', '011015000000000000000000000000': '00600605', '005007023024014000000000000000': '00958558', '007005014000000000000000000000': '00515503', '014005012000000000000000000000': '00629843', '005014024000000000000000000000': '00963020', '005024014000000000000000000000': '00705542', '005025012000000000000000000000': '00942125', '018005014023012000000000000000': '00859522', '005023000000000000000000000000': '00330020', '005014017000000000000000000000': '00665540', '024011012000000000000000000000': '00846194', '006012000000000000000000000000': '00563880', '013000000000000000000000000000': '00796610', '006005023000000000000000000000': '00877637', '011024023012019000000000000000': '00359627', '017014007005000000000000000000': '00958927', '024019005000000000000000000000': '00881504', '006005000000000000000000000000': '00324206', '023014012005000000000000000000': '00575807', '023016000000000000000000000000': '00903935', '005019012024000000000000000000': '00961225', '023012025018005000000000000000': '00818705', '011017012000000000000000000000': '00790386', '012005007014023000000000000000': '00863241', '014005012023018000000000000000': '00760563', '012005018000000000000000000000': '00433400', '005024014017000000000000000000': '00825905', '005018014000000000000000000000': '00436540', '001019000000000000000000000000': '00745903', '014005007006000000000000000000': '00913239', '018000000000000000000000000000': '00241945', '005014000000000000000000000000': '00177730', '012011018000000000000000000000': '00703742', '014005018000000000000000000000': '00515006', '008009000000000000000000000000': '00946039', '005019000000000000000000000000': '00352800', '024005023014000000000000000000': '00675847', '023011000000000000000000000000': '00199210', '005006000000000000000000000000': '00283326', '012011000000000000000000000000': '00251211', '014006005000000000000000000000': '00407800', '010011000000000000000000000000': '00002169', '014005017000000000000000000000': '00704640', '018017000000000000000000000000': '00717233', '023014005000000000000000000000': '00190169', '005008000000000000000000000000': '00912538', '014017018000000000000000000000': '00903337', '012019005000000000000000000000': '00793693', '012005014000000000000000000000': '00181845', '012015000000000000000000000000': '00603811', '011018023012025000000000000000': '00817044', '014023000000000000000000000000': '00667859', '005018000000000000000000000000': '00388819', '006018000000000000000000000000': '00931671', '014012023000000000000000000000': '00813876', '017009005000000000000000000000': '00966350', '014013000000000000000000000000': '00956701', '021024005000000000000000000000': '00791959', '017005018000000000000000000000': '00609341', '019011024018000000000000000000': '00486059', '005007014000000000000000000000': '00656245', '011025000000000000000000000000': '00111964', '023006005012014000000000000000': '00703233', '019024005000000000000000000000': '00858130', '023005014015000000000000000000': '00897506', '014007005000000000000000000000': '00488731', '018011023000000000000000000000': '00613488', '007000000000000000000000000000': '00383299', '023005017000000000000000000000': '00692212', '014007005006000000000000000000': '00821421', '012018000000000000000000000000': '00305016', '017011000000000000000000000000': '00182715', '024016005000000000000000000000': '00753424', '024011012019000000000000000000': '00785866', '024011019025000000000000000000': '00427882', '012005006014000000000000000000': '00908003', '019014000000000000000000000000': '00963999', '012014005007000000000000000000': '00505304', '018019000000000000000000000000': '00574035', '019005014000000000000000000000': '00977486', '020005023000000000000000000000': '00892550', '012017000000000000000000000000': '00663427', '024022000000000000000000000000': '00900685', '006023000000000000000000000000': '00629582', '007005000000000000000000000000': '00677166', '005014012023000000000000000000': '00701641', '007005014023000000000000000000': '00962488', '023005009000000000000000000000': '00835537', '014018023012005000000000000000': '00853328', '011017023000000000000000000000': '00917439', '005014023012000000000000000000': '00167007', '011023000000000000000000000000': '00231591', '017014000000000000000000000000': '00967504', '005018012017000000000000000000': '00793856', '006005014023000000000000000000': '00928831', '023018014000000000000000000000': '00887324', '017006005000000000000000000000': '00946321', '017005023014015000000000000000': '00958035', '005014006023000000000000000000': '00668855', '005016014000000000000000000000': '00958242', '012018015000000000000000000000': '00405420', '023014000000000000000000000000': '00862059', '012011023018000000000000000000': '00858514', '005014016000000000000000000000': '00468619', '007006000000000000000000000000': '00958048', '002011000000000000000000000000': '00000019', '018005014000000000000000000000': '00783603', '005006024023014015000000000000': '00632446', '023006018005014000000000000000': '00913061', '012023005000000000000000000000': '00662423', '016000000000000000000000000000': '00264732', '015000000000000000000000000000': '00841394', '005014019000000000000000000000': '00739763', '001000000000000000000000000000': '00000154', '011023012017000000000000000000': '00834062', '023019012014000000000000000000': '00817597', '014005006023000000000000000000': '00933086', '011019024025000000000000000000': '00376829', '025017000000000000000000000000': '00950911', '006014000000000000000000000000': '00205720', '023015005000000000000000000000': '00708866', '017005014000000000000000000000': '00567836', '011019000000000000000000000000': '00267740', '012018005000000000000000000000': '00803314', '006014023000000000000000000000': '00733248', '011025019018000000000000000000': '00602699', '017005015023000000000000000000': '00766059', '005017023000000000000000000000': '00618654', '023011019000000000000000000000': '00929943', '005014012000000000000000000000': '00441259', '023018000000000000000000000000': '00845330', '023005000000000000000000000000': '00338790', '005012016000000000000000000000': '00894409', '012005025000000000000000000000': '00796883', '005023018000000000000000000000': '00856850', '005006018014023000000000000000': '00926897', '011023018000000000000000000000': '00443738', '025011024000000000000000000000': '00679374', '005023017000000000000000000000': '00794550', '005007000000000000000000000000': '00799404', '021000000000000000000000000000': '00795524', '012014023000000000000000000000': '00401571', '005012018000000000000000000000': '00816586', '017000000000000000000000000000': '00477507', '018012000000000000000000000000': '00244073', '005017000000000000000000000000': '00270172', '014018017000000000000000000000': '00878738', '023012005000000000000000000000': '00637944', '005014018000000000000000000000': '00420917', '014005023018025000000000000000': '00890468', '005013000000000000000000000000': '00858660', '012005023000000000000000000000': '00549900', '012023017000000000000000000000': '00629199', '019018000000000000000000000000': '00735506', '005014006000000000000000000000': '00444356', '011018017012000000000000000000': '00546151', '005014023024000000000000000000': '00932293', '005012023000000000000000000000': '00249614', '011019017000000000000000000000': '00747416', '005023014012000000000000000000': '00818064', '011012023018000000000000000000': '00546094', '012023000000000000000000000000': '00588798', '025005000000000000000000000000': '00863599', '019000000000000000000000000000': '00277118', '027014000000000000000000000000': '00972820', '024011000000000000000000000000': '00351718', '014005023000000000000000000000': '00311543', '014005018012000000000000000000': '00890228', '025014000000000000000000000000': '00969325', '005023006014000000000000000000': '00823160', '018011012000000000000000000000': '00816090', '023005014000000000000000000000': '00720613', '012017005000000000000000000000': '00574013', '012011023000000000000000000000': '00721687', '011016017000000000000000000000': '00875285', '027000000000000000000000000000': '00971701', '023011017000000000000000000000': '00899394', '011012019017000000000000000000': '00523296', '014005012023000000000000000000': '00323556', '012006023000000000000000000000': '00845970', '011008000000000000000000000000': '00149593', '014017000000000000000000000000': '00328508', '014012005000000000000000000000': '00819954', '005012014000000000000000000000': '00587559', '019011000000000000000000000000': '00176849', '008005000000000000000000000000': '00948190', '006012014005000000000000000000': '00588780', '007014023000000000000000000000': '00899033', '024005018000000000000000000000': '00967569', '001011000000000000000000000000': '00000174', '003011000000000000000000000000': '00000013', '005018014023000000000000000000': '00912693', '019005024000000000000000000000': '00947182', '024019014005007012000000000000': '00958739', '005006014023000000000000000000': '00820876', '023005024014000000000000000000': '00733134', '007014005023000000000000000000': '00671592', '023005012014018000000000000000': '00769671', '024011019000000000000000000000': '00558358', '005019012000000000000000000000': '00610666', '005014007000000000000000000000': '00310653', '005012006014023000000000000000': '00929088', '014012000000000000000000000000': '00188288', '006012018000000000000000000000': '00852329', '012005018006014000000000000000': '00903184', '017005000000000000000000000000': '00270533', '005012000000000000000000000000': '00440898', '018011017000000000000000000000': '00515421', '005012023018000000000000000000': '00791304', '011023018012000000000000000000': '00836594', '014024005000000000000000000000': '00931739', '005025014000000000000000000000': '00958017', '023017000000000000000000000000': '00862056', '023005006000000000000000000000': '00927565', '004011000000000000000000000000': '00068270', '023012005018000000000000000000': '00817075', '011019018000000000000000000000': '00419642', '007014000000000000000000000000': '00745950', '019024005014000000000000000000': '00736423', '007014005000000000000000000000': '00966783', '011012018000000000000000000000': '00510429', '014025000000000000000000000000': '00962167', '014005023012000000000000000000': '00655602', '011018017015000000000000000000': '00897317', '005025000000000000000000000000': '00855048', '015012000000000000000000000000': '00889618', '011023012015000000000000000000': '00799032', '005006019000000000000000000000': '00969293', '005014023000000000000000000000': '00177641', '018011012023000000000000000000': '00874987', '011018023000000000000000000000': '00525330', '011023012000000000000000000000': '00505724', '011022000000000000000000000000': '00959412', '017005007014000000000000000000': '00670336', '024011025000000000000000000000': '00815030', '011024025000000000000000000000': '00760925', '011012025000000000000000000000': '00822696', '005018014012023000000000000000': '00716933', '012011024000000000000000000000': '00659601', '005006014000000000000000000000': '00709152', '023011012000000000000000000000': '00404690', '023018005000000000000000000000': '00342513', '022012000000000000000000000000': '00301224', '018012005000000000000000000000': '00948266', '005015023000000000000000000000': '00414762', '019011012000000000000000000000': '00751961', '005017014000000000000000000000': '00855531', '025011024019018000000000000000': '00811474', '005014012017000000000000000000': '00655016', '011024000000000000000000000000': '00424353', '018005014023000000000000000000': '00267640', '014016000000000000000000000000': '00499366', '011019024000000000000000000000': '00260554', '023012014000000000000000000000': '00895194', '003000000000000000000000000000': '00000040', '011018017000000000000000000000': '00820746', '018014005000000000000000000000': '00622558', '005000000000000000000000000000': '00091761', '006000000000000000000000000000': '00293735', '017005023000000000000000000000': '00904995', '011012017023000000000000000000': '00573296', '023012005006000000000000000000': '00862636', '018014005025000000000000000000': '00798397', '025011000000000000000000000000': '00302952', '011024019000000000000000000000': '00523921', '018005023015000000000000000000': '00894150', '011012000000000000000000000000': '00265709', '014018005000000000000000000000': '00636567', '012014005023000000000000000000': '00789757', '019012000000000000000000000000': '00932584', '005023017014000000000000000000': '00916322', '023012000000000000000000000000': '00685246', '011025019000000000000000000000': '00791617', '016005000000000000000000000000': '00377914', '023005018000000000000000000000': '00812190', '014005007000000000000000000000': '00251536', '023014005012000000000000000000': '00803935', '005024017000000000000000000000': '00856257', '014024000000000000000000000000': '00920723', '017012009023000000000000000000': '00807436', '012005018014000000000000000000': '00561754', '005009000000000000000000000000': '00380095', '011023017000000000000000000000': '00564996', '012014006000000000000000000000': '00438117', '011025018000000000000000000000': '00678442', '024025000000000000000000000000': '00442664', '011019025000000000000000000000': '00282469', '025005012000000000000000000000': '00757720', '011017000000000000000000000000': '00299269', '011019022000000000000000000000': '00605687', '014000000000000000000000000000': '00022003', '002000000000000000000000000000': '00001449', '005009018000000000000000000000': '00704552', '004000000000000000000000000000': '00075426', '019005018000000000000000000000': '00923210', '005024000000000000000000000000': '00486786', '014007000000000000000000000000': '00438089', '008000000000000000000000000000': '00929149', '025024005000000000000000000000': '00940004', '011018000000000000000000000000': '00208306', '012005023014017000000000000000': '00734668', '005023014000000000000000000000': '00399195', '017025000000000000000000000000': '00944398', '005023018014000000000000000000': '00778645', '005018006012023000000000000000': '00610382', '017014005000000000000000000000': '00905701', '005006023014000000000000000000': '00893724', '018005012014000000000000000000': '00857245', '005015000000000000000000000000': '00395165', '011016000000000000000000000000': '00818177', '004011019000000000000000000000': '00597956', '014005000000000000000000000000': '00212599', '005024006000000000000000000000': '00963121', '006023012005000000000000000000': '00707280', '005012014019024000000000000000': '00930989', '011018012000000000000000000000': '00417005', '006005014000000000000000000000': '00702605', '009000000000000000000000000000': '00544456', '014019005000000000000000000000': '00937202', '017018005000000000000000000000': '00544136', '005007006014000000000000000000': '00936592', '013005000000000000000000000000': '00735022', '018014000000000000000000000000': '00596617', '024014005000000000000000000000': '00927160', '024014000000000000000000000000': '00966408', '019011024000000000000000000000': '00476152', '024005000000000000000000000000': '00512472', '018006005000000000000000000000': '00763306', '019024000000000000000000000000': '00889734', '005023012000000000000000000000': '00589155', '005016000000000000000000000000': '00772131', '012014000000000000000000000000': '00301390', '014006000000000000000000000000': '00299128', '025000000000000000000000000000': '00380786', '014005006000000000000000000000': '00290870', '023000000000000000000000000000': '00290593', '020000000000000000000000000000': '00841249', '005014018023000000000000000000': '00734253', '023005012000000000000000000000': '00866738', '009023000000000000000000000000': '00531473', '012000000000000000000000000000': '00130546', '009005000000000000000000000000': '00232820', '005023006014012000000000000000': '00929189', '014018000000000000000000000000': '00513529', '011012023000000000000000000000': '00300543', '017011018000000000000000000000': '00292788', '018011000000000000000000000000': '00291259', '012014005000000000000000000000': '00499314', '015014000000000000000000000000': '00609668', '014019025000000000000000000000': '00962693', '014023005000000000000000000000': '00526827', '019011017024000000000000000000': '00890318', '012005007000000000000000000000': '00840216', '024019000000000000000000000000': '00360817', '014005019000000000000000000000': '00769221', '018005000000000000000000000000': '00267234', '019005000000000000000000000000': '00275721', '024019014005000000000000000000': '00397146', '018005017000000000000000000000': '00635515', '011017018000000000000000000000': '00594309', '006014005000000000000000000000': '00618800', '005006023000000000000000000000': '00742075', '014005023015000000000000000000': '00441271', '012005000000000000000000000000': '00387351', '011018019000000000000000000000': '00581629', '011024019012000000000000000000': '00936007', '011012019000000000000000000000': '00785952', '005018023000000000000000000000': '00806281', '019011025000000000000000000000': '00712853', '019005007014000000000000000000': '00959674', '024000000000000000000000000000': '00311228', '005023014015000000000000000000': '00791121', '011012017000000000000000000000': '00819832', '019014005000000000000000000000': '00960049', '005021000000000000000000000000': '00773738', '012023005014000000000000000000': '00647846', '014006005023000000000000000000': '00956259'}

import scraperwiki
import lxml.html
import mechanize

for code in statdic:

    h= statdic[code]
    url = "https://www2.cslb.ca.gov/OnlineServices/CheckLicenseII/LicenseDetail.aspx?LicNum="  + str(h)
    user_agent = 'Mozilla/5.0 (Windows NT 6.0)'

    values = {'name' : 'Michael Foord',
                  'location' : 'India',
                  'language' : 'english' }
    headers = { 'User-Agent' : user_agent , 'Accept' : 'text/html ,application/xhtml+xml, application/xml;q=0.9*/*;q=0.8 ' ,'Accept-Language' : 'en-us,en;q=0.5'}
    data = urllib.urlencode(values)
    #################3#
    prox = '188.40.101.11:3128'
    #proxy_handler = urllib2.ProxyHandler({'https': prox})
    #opener = urllib2.build_opener(proxy_handler)
    #urllib2.install_opener(opener)
    ##################3
    req = urllib2.Request(url, data, headers)
    response = urllib2.urlopen(req)
    html  = response.read()
    ##############
    #br = mechanize.Browser()
    #br.set_proxies({"https": "91.121.27.218:3128"})
    #br.addheaders = [('User-agent', 'Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.1) Gecko/2008071615 Fedora/3.0.1-1.fc9 Firefox/3.0.1')]
    #html =  br.open(url).read()
    
    root = lxml.html.fromstring(html)
    try:
        status  =  root.cssselect("td#Status")[0].text_content()
    except:
        status = 'None'
    try:
        addstat =  root.cssselect("td#AddLicStatus")[0].text_content()
    except:
        addstat = 'None'
    data = {'code':code,
            'lic':h,
            'status' : status,
            'addstat':addstat
            }


    scraperwiki.sqlite.save(unique_keys=['code'], data=data)import urllib, urllib2
statdic = {'014005024000000000000000000000': '00760487', '011015000000000000000000000000': '00600605', '005007023024014000000000000000': '00958558', '007005014000000000000000000000': '00515503', '014005012000000000000000000000': '00629843', '005014024000000000000000000000': '00963020', '005024014000000000000000000000': '00705542', '005025012000000000000000000000': '00942125', '018005014023012000000000000000': '00859522', '005023000000000000000000000000': '00330020', '005014017000000000000000000000': '00665540', '024011012000000000000000000000': '00846194', '006012000000000000000000000000': '00563880', '013000000000000000000000000000': '00796610', '006005023000000000000000000000': '00877637', '011024023012019000000000000000': '00359627', '017014007005000000000000000000': '00958927', '024019005000000000000000000000': '00881504', '006005000000000000000000000000': '00324206', '023014012005000000000000000000': '00575807', '023016000000000000000000000000': '00903935', '005019012024000000000000000000': '00961225', '023012025018005000000000000000': '00818705', '011017012000000000000000000000': '00790386', '012005007014023000000000000000': '00863241', '014005012023018000000000000000': '00760563', '012005018000000000000000000000': '00433400', '005024014017000000000000000000': '00825905', '005018014000000000000000000000': '00436540', '001019000000000000000000000000': '00745903', '014005007006000000000000000000': '00913239', '018000000000000000000000000000': '00241945', '005014000000000000000000000000': '00177730', '012011018000000000000000000000': '00703742', '014005018000000000000000000000': '00515006', '008009000000000000000000000000': '00946039', '005019000000000000000000000000': '00352800', '024005023014000000000000000000': '00675847', '023011000000000000000000000000': '00199210', '005006000000000000000000000000': '00283326', '012011000000000000000000000000': '00251211', '014006005000000000000000000000': '00407800', '010011000000000000000000000000': '00002169', '014005017000000000000000000000': '00704640', '018017000000000000000000000000': '00717233', '023014005000000000000000000000': '00190169', '005008000000000000000000000000': '00912538', '014017018000000000000000000000': '00903337', '012019005000000000000000000000': '00793693', '012005014000000000000000000000': '00181845', '012015000000000000000000000000': '00603811', '011018023012025000000000000000': '00817044', '014023000000000000000000000000': '00667859', '005018000000000000000000000000': '00388819', '006018000000000000000000000000': '00931671', '014012023000000000000000000000': '00813876', '017009005000000000000000000000': '00966350', '014013000000000000000000000000': '00956701', '021024005000000000000000000000': '00791959', '017005018000000000000000000000': '00609341', '019011024018000000000000000000': '00486059', '005007014000000000000000000000': '00656245', '011025000000000000000000000000': '00111964', '023006005012014000000000000000': '00703233', '019024005000000000000000000000': '00858130', '023005014015000000000000000000': '00897506', '014007005000000000000000000000': '00488731', '018011023000000000000000000000': '00613488', '007000000000000000000000000000': '00383299', '023005017000000000000000000000': '00692212', '014007005006000000000000000000': '00821421', '012018000000000000000000000000': '00305016', '017011000000000000000000000000': '00182715', '024016005000000000000000000000': '00753424', '024011012019000000000000000000': '00785866', '024011019025000000000000000000': '00427882', '012005006014000000000000000000': '00908003', '019014000000000000000000000000': '00963999', '012014005007000000000000000000': '00505304', '018019000000000000000000000000': '00574035', '019005014000000000000000000000': '00977486', '020005023000000000000000000000': '00892550', '012017000000000000000000000000': '00663427', '024022000000000000000000000000': '00900685', '006023000000000000000000000000': '00629582', '007005000000000000000000000000': '00677166', '005014012023000000000000000000': '00701641', '007005014023000000000000000000': '00962488', '023005009000000000000000000000': '00835537', '014018023012005000000000000000': '00853328', '011017023000000000000000000000': '00917439', '005014023012000000000000000000': '00167007', '011023000000000000000000000000': '00231591', '017014000000000000000000000000': '00967504', '005018012017000000000000000000': '00793856', '006005014023000000000000000000': '00928831', '023018014000000000000000000000': '00887324', '017006005000000000000000000000': '00946321', '017005023014015000000000000000': '00958035', '005014006023000000000000000000': '00668855', '005016014000000000000000000000': '00958242', '012018015000000000000000000000': '00405420', '023014000000000000000000000000': '00862059', '012011023018000000000000000000': '00858514', '005014016000000000000000000000': '00468619', '007006000000000000000000000000': '00958048', '002011000000000000000000000000': '00000019', '018005014000000000000000000000': '00783603', '005006024023014015000000000000': '00632446', '023006018005014000000000000000': '00913061', '012023005000000000000000000000': '00662423', '016000000000000000000000000000': '00264732', '015000000000000000000000000000': '00841394', '005014019000000000000000000000': '00739763', '001000000000000000000000000000': '00000154', '011023012017000000000000000000': '00834062', '023019012014000000000000000000': '00817597', '014005006023000000000000000000': '00933086', '011019024025000000000000000000': '00376829', '025017000000000000000000000000': '00950911', '006014000000000000000000000000': '00205720', '023015005000000000000000000000': '00708866', '017005014000000000000000000000': '00567836', '011019000000000000000000000000': '00267740', '012018005000000000000000000000': '00803314', '006014023000000000000000000000': '00733248', '011025019018000000000000000000': '00602699', '017005015023000000000000000000': '00766059', '005017023000000000000000000000': '00618654', '023011019000000000000000000000': '00929943', '005014012000000000000000000000': '00441259', '023018000000000000000000000000': '00845330', '023005000000000000000000000000': '00338790', '005012016000000000000000000000': '00894409', '012005025000000000000000000000': '00796883', '005023018000000000000000000000': '00856850', '005006018014023000000000000000': '00926897', '011023018000000000000000000000': '00443738', '025011024000000000000000000000': '00679374', '005023017000000000000000000000': '00794550', '005007000000000000000000000000': '00799404', '021000000000000000000000000000': '00795524', '012014023000000000000000000000': '00401571', '005012018000000000000000000000': '00816586', '017000000000000000000000000000': '00477507', '018012000000000000000000000000': '00244073', '005017000000000000000000000000': '00270172', '014018017000000000000000000000': '00878738', '023012005000000000000000000000': '00637944', '005014018000000000000000000000': '00420917', '014005023018025000000000000000': '00890468', '005013000000000000000000000000': '00858660', '012005023000000000000000000000': '00549900', '012023017000000000000000000000': '00629199', '019018000000000000000000000000': '00735506', '005014006000000000000000000000': '00444356', '011018017012000000000000000000': '00546151', '005014023024000000000000000000': '00932293', '005012023000000000000000000000': '00249614', '011019017000000000000000000000': '00747416', '005023014012000000000000000000': '00818064', '011012023018000000000000000000': '00546094', '012023000000000000000000000000': '00588798', '025005000000000000000000000000': '00863599', '019000000000000000000000000000': '00277118', '027014000000000000000000000000': '00972820', '024011000000000000000000000000': '00351718', '014005023000000000000000000000': '00311543', '014005018012000000000000000000': '00890228', '025014000000000000000000000000': '00969325', '005023006014000000000000000000': '00823160', '018011012000000000000000000000': '00816090', '023005014000000000000000000000': '00720613', '012017005000000000000000000000': '00574013', '012011023000000000000000000000': '00721687', '011016017000000000000000000000': '00875285', '027000000000000000000000000000': '00971701', '023011017000000000000000000000': '00899394', '011012019017000000000000000000': '00523296', '014005012023000000000000000000': '00323556', '012006023000000000000000000000': '00845970', '011008000000000000000000000000': '00149593', '014017000000000000000000000000': '00328508', '014012005000000000000000000000': '00819954', '005012014000000000000000000000': '00587559', '019011000000000000000000000000': '00176849', '008005000000000000000000000000': '00948190', '006012014005000000000000000000': '00588780', '007014023000000000000000000000': '00899033', '024005018000000000000000000000': '00967569', '001011000000000000000000000000': '00000174', '003011000000000000000000000000': '00000013', '005018014023000000000000000000': '00912693', '019005024000000000000000000000': '00947182', '024019014005007012000000000000': '00958739', '005006014023000000000000000000': '00820876', '023005024014000000000000000000': '00733134', '007014005023000000000000000000': '00671592', '023005012014018000000000000000': '00769671', '024011019000000000000000000000': '00558358', '005019012000000000000000000000': '00610666', '005014007000000000000000000000': '00310653', '005012006014023000000000000000': '00929088', '014012000000000000000000000000': '00188288', '006012018000000000000000000000': '00852329', '012005018006014000000000000000': '00903184', '017005000000000000000000000000': '00270533', '005012000000000000000000000000': '00440898', '018011017000000000000000000000': '00515421', '005012023018000000000000000000': '00791304', '011023018012000000000000000000': '00836594', '014024005000000000000000000000': '00931739', '005025014000000000000000000000': '00958017', '023017000000000000000000000000': '00862056', '023005006000000000000000000000': '00927565', '004011000000000000000000000000': '00068270', '023012005018000000000000000000': '00817075', '011019018000000000000000000000': '00419642', '007014000000000000000000000000': '00745950', '019024005014000000000000000000': '00736423', '007014005000000000000000000000': '00966783', '011012018000000000000000000000': '00510429', '014025000000000000000000000000': '00962167', '014005023012000000000000000000': '00655602', '011018017015000000000000000000': '00897317', '005025000000000000000000000000': '00855048', '015012000000000000000000000000': '00889618', '011023012015000000000000000000': '00799032', '005006019000000000000000000000': '00969293', '005014023000000000000000000000': '00177641', '018011012023000000000000000000': '00874987', '011018023000000000000000000000': '00525330', '011023012000000000000000000000': '00505724', '011022000000000000000000000000': '00959412', '017005007014000000000000000000': '00670336', '024011025000000000000000000000': '00815030', '011024025000000000000000000000': '00760925', '011012025000000000000000000000': '00822696', '005018014012023000000000000000': '00716933', '012011024000000000000000000000': '00659601', '005006014000000000000000000000': '00709152', '023011012000000000000000000000': '00404690', '023018005000000000000000000000': '00342513', '022012000000000000000000000000': '00301224', '018012005000000000000000000000': '00948266', '005015023000000000000000000000': '00414762', '019011012000000000000000000000': '00751961', '005017014000000000000000000000': '00855531', '025011024019018000000000000000': '00811474', '005014012017000000000000000000': '00655016', '011024000000000000000000000000': '00424353', '018005014023000000000000000000': '00267640', '014016000000000000000000000000': '00499366', '011019024000000000000000000000': '00260554', '023012014000000000000000000000': '00895194', '003000000000000000000000000000': '00000040', '011018017000000000000000000000': '00820746', '018014005000000000000000000000': '00622558', '005000000000000000000000000000': '00091761', '006000000000000000000000000000': '00293735', '017005023000000000000000000000': '00904995', '011012017023000000000000000000': '00573296', '023012005006000000000000000000': '00862636', '018014005025000000000000000000': '00798397', '025011000000000000000000000000': '00302952', '011024019000000000000000000000': '00523921', '018005023015000000000000000000': '00894150', '011012000000000000000000000000': '00265709', '014018005000000000000000000000': '00636567', '012014005023000000000000000000': '00789757', '019012000000000000000000000000': '00932584', '005023017014000000000000000000': '00916322', '023012000000000000000000000000': '00685246', '011025019000000000000000000000': '00791617', '016005000000000000000000000000': '00377914', '023005018000000000000000000000': '00812190', '014005007000000000000000000000': '00251536', '023014005012000000000000000000': '00803935', '005024017000000000000000000000': '00856257', '014024000000000000000000000000': '00920723', '017012009023000000000000000000': '00807436', '012005018014000000000000000000': '00561754', '005009000000000000000000000000': '00380095', '011023017000000000000000000000': '00564996', '012014006000000000000000000000': '00438117', '011025018000000000000000000000': '00678442', '024025000000000000000000000000': '00442664', '011019025000000000000000000000': '00282469', '025005012000000000000000000000': '00757720', '011017000000000000000000000000': '00299269', '011019022000000000000000000000': '00605687', '014000000000000000000000000000': '00022003', '002000000000000000000000000000': '00001449', '005009018000000000000000000000': '00704552', '004000000000000000000000000000': '00075426', '019005018000000000000000000000': '00923210', '005024000000000000000000000000': '00486786', '014007000000000000000000000000': '00438089', '008000000000000000000000000000': '00929149', '025024005000000000000000000000': '00940004', '011018000000000000000000000000': '00208306', '012005023014017000000000000000': '00734668', '005023014000000000000000000000': '00399195', '017025000000000000000000000000': '00944398', '005023018014000000000000000000': '00778645', '005018006012023000000000000000': '00610382', '017014005000000000000000000000': '00905701', '005006023014000000000000000000': '00893724', '018005012014000000000000000000': '00857245', '005015000000000000000000000000': '00395165', '011016000000000000000000000000': '00818177', '004011019000000000000000000000': '00597956', '014005000000000000000000000000': '00212599', '005024006000000000000000000000': '00963121', '006023012005000000000000000000': '00707280', '005012014019024000000000000000': '00930989', '011018012000000000000000000000': '00417005', '006005014000000000000000000000': '00702605', '009000000000000000000000000000': '00544456', '014019005000000000000000000000': '00937202', '017018005000000000000000000000': '00544136', '005007006014000000000000000000': '00936592', '013005000000000000000000000000': '00735022', '018014000000000000000000000000': '00596617', '024014005000000000000000000000': '00927160', '024014000000000000000000000000': '00966408', '019011024000000000000000000000': '00476152', '024005000000000000000000000000': '00512472', '018006005000000000000000000000': '00763306', '019024000000000000000000000000': '00889734', '005023012000000000000000000000': '00589155', '005016000000000000000000000000': '00772131', '012014000000000000000000000000': '00301390', '014006000000000000000000000000': '00299128', '025000000000000000000000000000': '00380786', '014005006000000000000000000000': '00290870', '023000000000000000000000000000': '00290593', '020000000000000000000000000000': '00841249', '005014018023000000000000000000': '00734253', '023005012000000000000000000000': '00866738', '009023000000000000000000000000': '00531473', '012000000000000000000000000000': '00130546', '009005000000000000000000000000': '00232820', '005023006014012000000000000000': '00929189', '014018000000000000000000000000': '00513529', '011012023000000000000000000000': '00300543', '017011018000000000000000000000': '00292788', '018011000000000000000000000000': '00291259', '012014005000000000000000000000': '00499314', '015014000000000000000000000000': '00609668', '014019025000000000000000000000': '00962693', '014023005000000000000000000000': '00526827', '019011017024000000000000000000': '00890318', '012005007000000000000000000000': '00840216', '024019000000000000000000000000': '00360817', '014005019000000000000000000000': '00769221', '018005000000000000000000000000': '00267234', '019005000000000000000000000000': '00275721', '024019014005000000000000000000': '00397146', '018005017000000000000000000000': '00635515', '011017018000000000000000000000': '00594309', '006014005000000000000000000000': '00618800', '005006023000000000000000000000': '00742075', '014005023015000000000000000000': '00441271', '012005000000000000000000000000': '00387351', '011018019000000000000000000000': '00581629', '011024019012000000000000000000': '00936007', '011012019000000000000000000000': '00785952', '005018023000000000000000000000': '00806281', '019011025000000000000000000000': '00712853', '019005007014000000000000000000': '00959674', '024000000000000000000000000000': '00311228', '005023014015000000000000000000': '00791121', '011012017000000000000000000000': '00819832', '019014005000000000000000000000': '00960049', '005021000000000000000000000000': '00773738', '012023005014000000000000000000': '00647846', '014006005023000000000000000000': '00956259'}

import scraperwiki
import lxml.html
import mechanize

for code in statdic:

    h= statdic[code]
    url = "https://www2.cslb.ca.gov/OnlineServices/CheckLicenseII/LicenseDetail.aspx?LicNum="  + str(h)
    user_agent = 'Mozilla/5.0 (Windows NT 6.0)'

    values = {'name' : 'Michael Foord',
                  'location' : 'India',
                  'language' : 'english' }
    headers = { 'User-Agent' : user_agent , 'Accept' : 'text/html ,application/xhtml+xml, application/xml;q=0.9*/*;q=0.8 ' ,'Accept-Language' : 'en-us,en;q=0.5'}
    data = urllib.urlencode(values)
    #################3#
    prox = '188.40.101.11:3128'
    #proxy_handler = urllib2.ProxyHandler({'https': prox})
    #opener = urllib2.build_opener(proxy_handler)
    #urllib2.install_opener(opener)
    ##################3
    req = urllib2.Request(url, data, headers)
    response = urllib2.urlopen(req)
    html  = response.read()
    ##############
    #br = mechanize.Browser()
    #br.set_proxies({"https": "91.121.27.218:3128"})
    #br.addheaders = [('User-agent', 'Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.1) Gecko/2008071615 Fedora/3.0.1-1.fc9 Firefox/3.0.1')]
    #html =  br.open(url).read()
    
    root = lxml.html.fromstring(html)
    try:
        status  =  root.cssselect("td#Status")[0].text_content()
    except:
        status = 'None'
    try:
        addstat =  root.cssselect("td#AddLicStatus")[0].text_content()
    except:
        addstat = 'None'
    data = {'code':code,
            'lic':h,
            'status' : status,
            'addstat':addstat
            }


    scraperwiki.sqlite.save(unique_keys=['code'], data=data)