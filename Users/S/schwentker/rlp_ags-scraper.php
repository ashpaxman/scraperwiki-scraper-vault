<?php

require 'scraperwiki/simple_html_dom.php';
//mb_internal_encoding("utf8");

$stichtag = "30.04.2011";

// Weisenheim am Sand, Weisenheim am Berg, Windhagen, Worms
//$ags_list = array("0733202050", "0733401501", "0733202049", "0713801077", "0731900000");
//(SHAPE) 07332050, 07332049, 07138077  

//$ags_list = //array("0723201277","0713708209","0713104205","0713505037","0713403502","0733404030","0723202034","0723206250","0723202061","0733704038","0733305084","0713504050","0714307046","0733301078","0713304026","0713102036","0714308502","0713204103","0733205014","0733903041","0713201049","0713704093","0713101501","0714305009","0713206096","0733803009","0713102027","0733103047","0733105070","0733703027","0714003073","0713306086","0734006022","0733303064","0733703066","0723303083","0733401001","0734001034","0733401501","0713170070","0733103041","0733203030","0714307305","0733506034","0723218018","0734001501","0713201201","0733203004","0733603055","0733908021","0733506009","0713504065","0733306030","0731900000","0733604095","0723506074","0723101075","0733203033","0734007219","0723103091","0733901040","0733702076","0714002108","0713402022","0733509043","0723507137","0733904024","0733304013","0723202060","0733203036","0713201035","0713703110","0723204228","0713104502","0713101009","0713808010","0714304023","0713401075","0734005037","0723202086","0713404049","0714306218","0733607086","0714108072","0714302252","0723205041","0733101051","0732000000","0723301030","0733604049","0733604033","0733306075","0714308316","0713702112","0723203114","0734002014","0734008210","0733804008","0714004049","0723202137","0714108083","0723304205","0713403090","0713303204","0713702048","0734003019","0713708216","0713301032","0733224024","0734001010","0723107120","0713704069","0713208008","0723203078","0714002047","0723302050","0723106017","0714106087","0723301046","0734001009","0713403056","0713204116","0713103081","0723503132","0723501047","0733301053","0723106064","0713201067","0713703004","0733705051","0714103057","0714107140","0723201211","0733603094","0723105092","0714304021","0714309249","0723108117","0723305235","0723201214","0723203218","0723106112","0723304224","0723205012","0723106054","0723505062","0713803023","0723302058","0714310275","0723305232","0713505081","0713304035","0714304055","0714310010","0713201087","0714007144","0714106141","0733601103","0723504090","0723205049","0723202036","0723202109","0714007065","0714004062","0713703025","0734005051","0723202030","0714103038","0733104071","0723103101","0713308023","0723303019","0733901062","0723201310","0723201234","0714007106","0733705073","0714105113","0714105096","0733801022","0733601089","0714307075","0723506091","0723206290","0713505041","0723503144","0733305068","0723106058","0713706230","0713706215","0733901063","0713701057","0713305090","0733605004","0713201051","0733101024","0733105030","0723108023","0713307062","0713201056","0733604044","0714007023","0733104009","0714102108","0733405018","0714004130","0713703019","0723206226","0713503087","0713806015","0733203031","0714107070","0733305073","0713701081","0723304216","0733203041","0714305084","0713503005","0713308025","0723106203","0713204112","0733902020","0713102003","0734003053","0733907010","0733155055","0733101001","0733602096","0714004067","0723304233","0713201064","0713303047","0714002084","0714302268","0713204084","0723302033","0714004053","0714304057","0713101050","0733303058","0713302105","0733301023","0733303081","0713805027","0714003147","0714108069","0733106064","0713307116","0713401005","0713806030","0713404088","0713307067","0713501020","0733501011","0733904028","0733304076","0733703032","0714103002","0714309238","0733701024","0723205117","0714304033","0733908068","0713706206","0723501014","0713702087","0713303016","0733504021","0713207076","0733601066","0713304018","0714305001","0723504116","0733303032","0723134134","0713204043","0713704101","0713104073","0723201259","0733306027","0713706219","0713806042","0713501079","0733204044","0733103023","0714004105","0723302209","0714309233","0733601025","0733103048","0723505126","0723202048","0714107084","0723501008","0713445045","0713805070","0723506063","0734005024","0733602082","0723102072","0733404004","0723206329","0723206236","0714103045","0713806066","0723206279","0723204087","0723305241","0734008214","0733206020","0714304013","0723304226","0713101051","0713206013","0733603002","0714108121","0733907060","0713305020","0713401026","0723106019","0713505010","0713404012","0723301070","0733604043","0713101032","0733703025","0713201001","0713101042","0713206034","0723504050","0733603024","0713206102","0714007119","0713104041","0713101052","0734001045","0713403081","0713504022","0713101044","0723202091","0713705223","0723206280","0713404037","0734003205","0714004109","0723304220","0723301021","0723301067","0714007126","0723205068","0723501093","0713505076","0713502011","0723108003","0713702053","0713701096","0713806002","0733701033","0713804501","0723301064","0733702079","0733904015","0723506015","0733402002","0733706047","0714004071","0733906042","0733607042","0733103054","0733506046","0723103104","0723304203","0713402050","0723301025","0713402053","0713402002","0733106056","0714304034","0723304212","0713302027","0733604001","0733908056","0723502040","0733604074","0733601099","0723205073","0713505001","0734006016","0714002043","0723204282","0733301036","0733102018","0733607023","0733206013","0723501030","0714004128","0713403019","0723302204","0733404020","0713307072","0713803034","0723205011","0713503034","0713306068","0713805058","0733804018","0723503055","0733701064","0733104015","0723505028","0713204041","0733702037","0723108010","0713102039","0733805026","0723305007","0714302257","0723507051","0713306015","0714004029","0733705040","0723203063","0733705042","0723502119","0733601046","0734001004","0714302223","0714309219","0733908002","0714103049","0734008226","0733304057","0733203040","0713401007","0713306048","0733301067","0733825025","0713101086","0723103116","0723101090","0713306044","0733602101","0731700000","0733801006","0733702018","0733506033","0714007115","0713207045","0723201258","0713808065","0713702023","0723507073","0731200000","0713101030","0713401027","0723503143","0714106003","0714007099","0714308290","0714003009","0713403082","0733602047","0714107035","0723507069","0713206044","0723203037","0733304005","0713403064","0733902034","0733704068","0733707041","0733402021","0723106006","0723202044","0723502081","0713804055","0714004163","0714107012","0714002075","0723203093","0714108112","0713403014","0734007055","0714307061","0713305024","0714007101","0713403003","0733105017","0714106026","0733105035","0723504085","0713304054","0713706208","0723201298","0723302056","0714007058","0714305007","0713403040","0723106083","0714003042","0713208105","0723205047","0723201249","0723304202","0733803015","0713307064","0734008208","0714102042","0713201046","0723205054","0723301017","0734004038","0714310012","0713306107","0723301074","0733703028","0734008209","0713201114","0713306061","0713404043","0733602056","0713104054","0723206256","0723103127","0714302306","0723504103","0723203019","0713501086","0733305008","0713502084","0723106079","0731100000","0733101042","0723202015","0714007076","0714101044","0713101026","0713805057","0723204135","0714004145","0723304222","0714304052","0714302299","0713706207","0714108114","0733301051","0723503095","0713706231","0713204023","0713705227","0713401021","0733703035","0713703077","0733907033","0723301006","0714105036","0733106058","0713402085","0714006155","0733702055","0713101033","0733601106","0733701017","0734002020","0733501202","0714004044","0733104036","0723304206","0714104095","0713104209","0713308108","0713703035","0733401023","0723507001","0734007041","0714007100","0723203103","0723202124","0723202133","0723202020","0723202099","0723207006","0723202125","0714302265","0714105001","0723201263","0733405006","0723103065","0714106135","0733301021","0733305028","0733602008","0733101027","0713505061","0723103026","0733404034","0734007017","0733405032","0714105018","0733305025","0723205138","0713806071","0723103096","0714303040","0714307085","0733604065","0714002014","0733304047","0714103029","0733902026","0714304039","0723205116","0714004107","0733506025","0713505003","0713707224","0723504046","0713303203","0714105011","0723302036","0713806005","0714308263","0733304031","0733305077","0733702019","0723201293","0714309298","0723101071","0713503078","0713505077","0713303077","0713504075","0713205030","0713402058","0713807062","0733604014","0714107047","0713505073","0733301055","0733603088","0733702006","0713402034","0713104210","0714007121","0733304056","0713305092","0723202079","0723305239","0714303032","0711100000","0733202005","0723204076","0713708202","0713402062","0734003052","0714308281","0733603051","0723106202","0723201294","0713402048","0733702029","0713102017","0723506078","0723101012","0714005096","0714007158","0714006025","0714006161","0733501201","0733705007","0714310073","0733501003","0733901044","0723205085","0733401036","0733604100","0714107107","0713301078","0714106127","0713303046","0723108111","0733904013","0713503083","0723101008","0733903016","0714308232","0713805052","0713804068","0723102033","0713204032","0723203131","0713501012","0723301014","0714107120","0713703105","0714103133","0733305037","0713505074","0733907018","0733805021","0733705050","0713103014","0713201047","0733803002","0714005035","0713206007","0733106068","0733604013","0723201285","0714310003","0714108079","0733306069","0723102005","0713303042","0713302039","0713101004","0723504135","0713504016","0723201253","0723103074","0723206222","0713404087","0733605016","0713503048","0714007077","0713805064","0733505031","0714004081","0723206288","0733604075","0713307005","0733601067","0733904201","0733908022","0733707023","0713202098","0733304062","0713403093","0713204065","0723102110","0723108037","0723506083","0733505002","0714105032","0714101098","0723201260","0714104125","0733104037","0733303018","0723205106","0714105088","0714304065","0723304010","0723304244","0734005217","0714302258","0723105086","0713304056","0733205037","0713306006","0713504031","0714004007","0713101065","0714002156","0714103014","0733901036","0714309314","0723201212","0713306088","0714004006","0713101021","0733702049","0733206046","0733304035","0714107105","0733603018","0713701088","0733101005","0714307066","0713704008","0733104011","0733402008","0733907037","0713706504","0713306021","0723301016","0734005220","0733203023","0733303006","0733703020","0713805074","0713201110","0714101025","0714107080","0713204085","0713201086","0723206305","0714003001","0713503008","0714107131","0714105101","0734002049","0733203006","0714310049","0733301083","0713206038","0714304026","0733603015","0713402024","0723301052","0713302070","0713403039","0713302003","0713504014","0733305065","0733502205","0723207104","0733106029","0714302236","0714002149","0723201247","0713201099","0714107055","0714301297","0733801001","0723305237","0713201052","0714107094","0714002087","0714004086","0723507048","0714304005","0723107501","0734002047","0723504038","0714107063","0733105072","0713806054","0713706220","0723101126","0733305203","0733605092","0723201287","0714303030","0723504044","0733606017","0734007216","0723106032","0723205016","0723101125","0714308251","0713307022","0723106042","0723301065","0723205089","0733101007","0723201291","0714104020","0714004048","0714105117","0733703002","0733301050","0733607090","0734008223","0734001043","0713104202","0734001502","0723201217","0713101022","0714004154","0723301063","0723505118","0714006104","0713802024","0734004003","0713208080","0713402010","0723202013","0714302241","0723202045","0723206208","0713708222","0733703077","0733603006","0713204060","0733406016","0714302310","0714004141","0734006050","0733707061","0713301037","0733508020","0713703055","0733604030","0733603052","0713301104","0723503133","0723107029","0723202062","0713101072","0714306282","0713305058","0713503030","0723201255","0733509049","0733906031","0713403083","0733304007","0714103061","0733104006","0713802038","0733603070","0723202118","0714305082","0734005035","0713306089","0733101014","0733509005","0733602031","0723505002","0713404030","0713501060","0733802011","0713101084","0714309213","0734008212","0733601003","0713303096","0723301068","0733602037","0723301084","0723206307","0714106129","0713201106","0713403077","0714307022","0733703084","0723506060","0714004041","0733202019","0713501025","0713402072","0713702501","0723106123","0733702045","0713705221","0713768068","0733406025","0723102020","0714007166","0713303202","0713201033","0714001501","0723204071","0714105073","0714309289","0713502038","0714002016","0713504053","0723303053","0723501114","0723103114","0713306013","0713806026","0733404013","0723304048","0723305023","0713102068","0713402031","0723501092","0733105062","0733508038","0713502026","0733202015","0713701056","0723103044","0714105068","0733101067","0733604045","0733509006","0733704044","0713306014","0713503089","0713102029","0714302313","0713807073","0733904066","0733301054","0714107015","0723106078","0733604035","0733908004","0723101066","0713201118","0723202501","0723201220","0713703079","0713703092","0723102057","0713101082","0723205069","0714004050","0714309226","0713305051","0714105050","0733607005","0723505122","0723202017","0733305061","0713102047","0713303063","0713104204","0713805013","0733801014","0713808007","0733305066","0723207289","0723202039","0733106033","0733203029","0714301216","0733504045","0714307029","0733104028","0713503057","0713404079","0723206284","0723206296","0714108004","0713201004","0713201017","0714105034","0723205025","0723108031","0723103095","0713103006","0733607087","0723304234","0713306036","0733201035","0714002063","0723205005","0723202092","0723502140","0734001002","0714004030","0714308273","0734003026","0723301081","0723205127","0723108107","0733304010","0713404004","0714004082","0713101058","0723107014","0721100000","0723106204","0713201115","0733505022","0723202026","0723304003","0723108085","0733303012","0714101071","0723206230","0733105075","0723507501","0713502052","0733702046","0713501036","0733606010","0714007008","0714104065","0713403095","0723505154","0733206022","0733101020","0714106139","0723201201","0713402001","0723102067","0733405033","0733901007","0723501036","0714305062","0713502051","0714302240","0733703021","0734004031","0733303001","0723206209","0714002045","0733908029","0723205112","0713402078","0714108099","0714101041","0723206223","0714307056","0723103100","0733701074","0713403059","0733701081","0733904035","0713204016","0714302287","0723206231","0714103062","0723504010","0733507035","0714108122","0713306100","0723205031","0734004027","0734003048","0714106091","0713204083","0714103022","0713305065","0734006025","0733604062","0713505013","0713403091","0733820020","0733106073","0723506022","0714104089","0723303229","0733607085","0723101040","0714005068","0714305059","0723201254","0713706201","0733305201","0723205042","0733507029","0713306101","0723204035","0733907049","0734004007","0733817017","0713404092","0723202098","0713303038","0723108103","0713306004","0733507041","0714004040","0733305016","0713107007","0723203033","0733603039","0733604061","0713404065","0734007042","0723203002","0733403024","0714303031","0714308304","0733901045","0733802007","0733906047","0713402061","0733907011","0733101052","0714304053","0723206216","0733103003","0733802010","0713807008","0713501007","0713703011","0713806043","0733902006","0723501153","0713308091","0733902039","0714307064","0723205130","0734008206","0713201069","0714104093","0713502046","0713104059","0733903051","0723301043","0723204129","0713206091","0723203225","0723505082","0714105039","0733903046","0714005148","0713801003","0713504094","0713708228","0714107085","0713208054","0723205088","0723301011","0733906067","0714302204","0714306303","0723303038","0733509024","0713101074","0733104049","0723206320","0733907053","0723304221","0713307050","0723204075","0714103503","0713303059","0733603091","0733306020","0733203038","0733104039","0714005138","0713207012","0713703036","0723302223","0723504124","0723102068","0733705043","0733101050","0723108503","0723201262","0733506014","0733103066","0723303005","0723206308","0714103059","0713208011","0723205122","0713703203","0713302007","0713703074","0713503501","0714007056","0723505057","0714307044","0714307069","0714105126","0714005003","0733101012","0713202042","0733602501","0733106063","0723506120","0714309284","0733305034","0723106018","0733607048","0734001039","0723105105","0723206327","0713101066","0713501021","0713805025","0733803012","0733306011","0713204055","0714104102","0713703113","0723105207","0713402011","0733202049","0713101005","0723304218","0733303026","0713502502","0733605011","0723201221","0714002089","0723101133","0723205040","0723108024","0713303205","0713703061","0713204078","0714007150","0723205003","0713204097","0723304201","0733508044","0733707014","0713302071","0733604050","0723504141","0723502072","0714007113","0733304039","0714007012","0733301043","0723206265","0731500000","0714107104","0733705026","0723206295","0713403060","0723204101","0713307009","0723206276","0723107124","0713403028","0723501005","0723505098","0713502040","0723101041","0733304045","0714309288","0713502043","0714305038","0713504066","0723203053","0723301071","0713204093","0723205090","0723202027","0713101069","0723305214","0733306071","0714003095","0723205128","0713307501","0733604104","0723205038","0713306098","0723201309","0713104206","0713201053","0713503035","0733204007","0713307055","0714101201","0713101085","0714108115","0723505136","0723103036","0714105118","0713505070","0723101087","0714007123","0733904059","0713303073","0714104043","0733304022","0734003040","0733306009","0713201022","0713101062","0713702029","0723506134","0714004129","0713403041","0734008227","0713803031","0733305024","0734004032","0714310042","0733906057","0713204119","0714304024","0713302045","0733303041","0733203003","0714107116","0723103021","0733106059","0713307082","0713104055","0723503148","0733403022","0713501090","0713102040","0733607073","0714306246","0723204273","0714302294","0713702114","0713707226","0733607069","0714302296","0714304079","0723108022","0723201301","0713104060","0733203021","0723506108","0723201240","0713504082","0723206304","0733903001","0733601071","0733602041","0713307066","0733303017","0723504070","0723503068","0723201261","0714107009","0713707229","0713303008","0723101136","0713303201","0714004090","0713101037","0733901038","0734006012","0713201057","0723506125","0713805040","0713306109","0713102011","0723202100","0723205094","0714004151","0713201062","0723108108","0713803069","0713308110","0723305219","0713704106","0723202057","0733603084","0733804003","0713305083","0713505068","0723207055","0714308058","0714302267","0723201213","0723206321","0723506019","0713201109","0733601068","0714302269","0733701083","0714107100","0733705022","0723207010","0714309209","0714004111","0723201270","0713702086","0733101025","0733907025","0714103064","0723305035","0723302026","0713801044","0713306002","0714007092","0713104016","0713303113","0733701080","0713401008","0733105060","0723204306","0713402018","0723205080","0734008213","0723101030","0733507042","0713307057","0713808076","0714007039","0713104211","0723206300","0714302301","0714103052","0713308085","0723304213","0713101079","0723507094","0713403009","0714304072","0723101077","0714002205","0723201233","0733303501","0733905061","0733305202","0714106128","0723202134","0713702041","0713702070","0714004094","0723302227","0733906054","0714302235","0733202028","0723103080","0714004164","0734007224","0733305502","0713201040","0734006054","0734007018","0723202074","0733703015","0733306503","0713205107","0713205071","0713205108","0713205024","0713250050","0713203018","0713207063","0713202006","0723301008","0723304215","0713204089","0714307078","0723106093","0713403013","0713501029","0713303043","0714302212","0713808006","0723304210","0723203082","0723202052","0723502033","0723507151","0723106122","0713101083","0713803012","0723107206","0714309308","0734008202","0733202026","0714304020","0723301042","0723504037","0731400000","0733504204","0733702056","0714103076","0713201070","0733101043","0723304207","0723304037","0734001021","0733905005","0713802063","0723502105","0733604029","0733905027","0733906032","0733106019","0723501112","0713306033","0734003028","0733605027","0714103077","0723205004","0713303010","0713804041","0713190090","0733604058","0733404005","0733603034","0733101026","0713703034","0723201248","0713101018","0733605032","0723108504","0733301049","0723502003","0713703001","0733505018","0733403009","0714304051","0713201094","0713805050","0733701067","0733101008","0713301106","0713403067","0723204043","0713505032","0723303029","0733202008","0733703048","0723202083","0723204210","0713502028","0713404069","0723101070","0723504080","0713404076","0713305049","0734002030","0723506115","0713805048","0713801080","0713204104","0733306080","0734008201","0714308037","0713103025","0723202097","0733908065","0734008203","0733903019","0723304217","0713207072","0733604057","0713402029","0723503101","0713702030","0713504009","0713401054","0714305068","0713201082","0713703060","0714309207","0723505052","0733101031","0733907012","0723201229","0714304027","0733106061","0714103124","0713201081","0723502043","0733306033","0714306245","0714108016","0733603077","0713207037","0714004146","0713703049","0713707218","0714006112","0733901003","0713204100","0723106035","0733201043","0731600000","0733503010","0733202002","0733201009","0714007020","0713806072","0713304114","0714309230","0723506026","0713703043","0723205121","0714107067","0713703006","0713705204","0713706212","0713505019","0733301003","0733702008","0723102132","0733505012","0713403055","0734007225","0714005127","0733402027","0723108053","0733509040","0723205110","0713504072","0713403066","0723205056","0733503015","0714004028","0713703003","0733602107","0733504037","0723301055","0714302261","0714107137","0713206077","0714006116","0714003010","0723205095","0723301077","0714107060","0713505004","0714302229","0714107110","0714308011","0713305011","0714004122","0713505054","0713804037","0723506067","0713503002","0723304208","0714106046","0713702095","0713305084","0733819019","0714108138","0734008218","0733102045","0723108069","0723502058","0714309228","0723108113","0723301061","0723103082","0723301501","0714306271","0733509019","0713352052","0733102038","0714107502","0714304054","0723204105","0713101001","0713505088","0723101081","0713308095","0714307019","0723201297","0714304071","0713101008","0714302259","0733302038","0733301079","0714002031","0733102002","0714310047","0723103025","0713502045","0713101034","0723305028","0714002005","0713101075","0713805011","0714107037","0714302225","0714106058","0714307045","0723503096","0723303076","0714308220","0714107040","0713805014","0713503018","0733605076","0733908202","0713703097","0723204070","0714307041","0714003153","0723103046","0714304008","0713807019","0733607036","0723206272","0713177077","0733406011","0733304040","0733101032","0734008207","0713305081","0714003202","0713101028","0713703066","0733601009","0723303054","0714006133","0733904064","0713404017","0713305060","0723304242","0713307053","0714101006","0733505027","0713808047","0714002093","0723203065","0714309254","0733305004","0714308080","0733607072","0723201245","0723205008","0723503146","0713505071","0713204090","0713301031","0713306040","0714002110","0723207311","0714108024","0733702072","0723305022","0723302211","0723202014","0723202119","0713306115","0713404035","0713502042","0723202077","0723506004","0714308266","0713302030","0733106004","0733508030","0733601081","0714307015","0723304032","0723206332","0714105054","0713204029","0723301075","0733304046","0713204088","0723205022","0733602064","0723108013","0713308093","0713703007","0733604040","0723206266","0733504047","0733705082","0723201246","0714106103","0723502142","0723202115","0733507013","0723506077","0733506017","0733702005","0733702062","0723206328","0714107134","0733604060","0713804075","0723201267","0733101021","0713703014","0713502093","0733702058","0733601079","0733203010","0714302250","0723204331","0714103053","0713806053","0713308103","0733702060","0713504056","0714308501","0723504056","0714002117","0723202120","0713702089","0714004024","0713501017","0723201264","0733908050","0713102002","0723108007","0713304087","0713307102","0714007118","0733604038","0713401074","0723205084","0733203042","0723201333","0713805078","0714310060","0723502123","0723301031","0733901058","0733704039","0733803013","0713404044","0713502067","0714103130","0723202032","0713501069","0713402063","0723205102","0714105010","0723501045","0714005037","0714108109","0713706217","0723204203","0713706205","0713308028","0713501024","0714106132","0714007070","0723505131","0723301062","0733705012","0713501027","0713402057","0733703036","0733602054","0734006044","0713307094","0723206292","0713306019","0714103005","0713102049","0713703099","0714007134","0714007015","0723207050","0733906017","0733805005","0723302060","0713201074","0733101010","0734006015","0714309307","0713201031","0723303002","0733930030","0714003064","0723304236","0713702065","0723301027","0713401036","0733706052","0714003046","0714002201","0714104081","0723302004","0713402084","0714007139","0723204113","0713306117","0713206014","0713201501","0714307221","0713403086","0733823023","0723206318","0723301020","0731800000","0713208117","0714304036","0714306309","0733509501","0713206010","0733103046","0714106111","0714309293","0713402015","0714107092","0733404031","0713504044","0714003055","0714310028","0713402071","0733804004","0723304228","0713403006","0733406015","0713201061","0723103009","0713805059","0713505092","0713301012","0714304048","0713706214","0733101053","0713403032","0714108136","0713301080","0714107019","0714105074","0723205132","0733306042","0713402080","0733101044","0714107078","0733301072","0713402016","0723206224","0723301040","0714302202","0723205064","0714004159","0713204005","0723101016","0713802004","0714105013","0723101056","0713104201","0714106082","0733204001","0714301279","0713806061","0714007002","0734008221","0734007215","0734005222","0714004165","0714309312","0714307025","0713503085","0714106027","0713201092","0733305014","0713702027","0723108050","0723108001","0713501015","0713401033","0733816016","0714302262","0733503048","0713402070","0734003008","0723304225","0733607053","0713403052","0723202021","0713202111","0713402094","0714103030","0713708211","0733909009","0713505064","0733907043","0714307018","0733702071","0734001001","0733702059","0734003036","0714307067","0713204015","0733303074","0714305050","0723202046","0733702013","0733607019","0714102023","0733604012","0714002060","0713402023","0713307111","0714308203","0713801077","0714106106","0714108031","0714308074","0713305001","0713504062","0714308239","0713402042","0714101086","0723203028","0714309247","0714007079","0714103021","0723301034","0733504023","0723206227","0723505104","0714005027","0714302215","0723502152","0734007204","0733703011","0713205039","0733501203","0713206028","0714005125","0713201048","0733306048","0723206238","0714006080","0714005011","0714005085","0723205096","0723205072","0723205067","0723205059","0723202111","0723207123","0723202024","0723202058","0723202081","0723207107","0713502033","0723201315","0713305017","0714003018","0723108062","0733102034","0713803201","0713201058","0713402020","0723102502","0713401073","0713504063","0714107097","0733508016","0714002098","0714106033","0714004120","0733701078","0733601021","0733606102","0733204027","0723303080","0733403012","0713505039","0723204007","0733607105","0723103049","0733205016","0713702080","0714309200","0714308210","0723204313","0713804009","0713501049","0723301079","0733225025","0714002140","0723201322","0723206202","0723206302","0713806036","0723301039","0713101076","0733204047","0723206283","0723206206","0723206271","0734008211","0714301243","0714306291","0714306295","0714306214","0714306244","0714301206","0714301211","0714301300","0714301280","0714301248","0714301270","0714301253","0713202002","0713203101","0713203113","0713203075","0723101076","0713201027","0713401068","0723501035","0713205073","0714301264","0714302260","0714302276","0714302205","0714306285","0714306256","0713203068","0714301255","0714301277","0713203079","0714301231","0714301234","0714306283","0714306315","0714306278","0714301222","0714306274","0714309242","0714306237","0714306272","0714306286","0714306302","0714306311","0713203026","0713203019","0713203036","0714301227","0723203108","0734005023","0733903048","0723202009","0733701054","0714310081","0723301018","0714003204","0723205001","0713302074","0713505080","0713306075","0733903008","0713205066","0713205059","0713205095","0713205025","0713205020","0733302060","0733302019","0733405017","0733407007","0733201039","0723505025","0723505149","0723503106","0723507027","0723504107","0723504100","0713845045","0713708225","0723504021","0713306112","0723507111","0713101015","0723305041","0733703069","0733205048","0713403089","0713403047","0713403046","0734001011","0734001029","0733502004","0733503007","0733705065","0733705009","0733701501","0733701001","0713104208","0723108051","0714306292","0733106065","0713503091","0733603098","0734002057","0714102066","0714305006","0723205066","0713301069","0733705031","0713502058","0723304243","0734007228","0714309224","0713703063","0713303041","0723102004","0713401051","0723106115","0733502026","0733502028","0733603097","0734002005","0714104051","0723202029","0733601022","0714304077","0713403038","0731300000","0714003021","0733202050","0714310070","0733201017","0733706070","0713307076","0733101022","0714002102","0733203012","0723304230","0733405028","0714002036","0733205032","0733205034","0723301049","0713306099","0713403025","0713702102","0713502023","0714308208","0733401014","0714003131","0734002006","0723504129","0713201009","0734001033","0723305240","0723202126","0714004135","0723206207","0733205018","0714101008","0714102501","0714175075"
//);

// Crashs:
// 0733401501, Wörth am Rhein, RS: 073340501501

//Wörth_am_Rhein_Mainz_AGS_Infothek, Mainz_RS
//$ags_list = array("0733400501", "0731500000", "073150000000", );



// für $start_ags bei Scraper-Abbruch abgeborchenen Kreis-Link eintragen
//$start_ags = "07132";
//$start_ags = "07233"; // Kreis Vulkaneifel
$start_ags = "07338";


$url1 = "http://www.infothek.statistik.rlp.de/neu/MeineHeimat/meineGemeinde.aspx?id=3537";

//Übersichtsseite scrapen:
$html1_content = scraperwiki::scrape($url1);
$html1 = str_get_html($html1_content);


$kreis_nr = 1;

foreach ($html1->find("map area") as $kreis) { 

    $kreis_titel = utf8_decode($kreis->title);
    $kreis_link = $kreis->href;
    $kreis_ags = decode_key($kreis_link);

    print("KREIS-NR ".$kreis_nr." (AGS = ".$kreis_ags.")\n");
    if ($kreis_ags!=$start_ags && $kreis_nr==1) {
        print("Kreis ".$kreis_ags. " übersprungen.\n");
        continue;
    }
    $kreis_nr = $kreis_nr + 1;


    // ****** KREISE ******

    if (strlen($kreis_ags)==10){
         scraperwiki::save_sqlite(array("AGS_rlp"),array("AGS_rlp"=>$kreis_ags, "Name_lang"=>$kreis_titel));
         print("Gespeichert: ".$kreis_titel." mit AGS_rlp ".$kreis_ags."\n");
   }
    else {
        print("KREIS".$kreis_titel." aufsplitten:\n");
 
        // ****** VERBANDSGEMEINDEN ******
        //Übersichtsseite scrapen:
        $html2_content = scraperwiki::scrape($kreis_link);
        $html2 = str_get_html($html2_content);

        foreach ($html2->find("map area") as $vgemeinde) {

            $vgemeinde_titel = utf8_decode($vgemeinde->title);
            $vgemeinde_link = $vgemeinde->href;
            $vgemeinde_ags = decode_key($vgemeinde_link);

            if (strlen($vgemeinde_ags)==10){
                 scraperwiki::save_sqlite(array("AGS_rlp"),array("AGS_rlp"=>$vgemeinde_ags, "Name_lang"=>$vgemeinde_titel));
                 print("Gespeichert: ".$vgemeinde_titel." mit AGS_rlp ".$vgemeinde_ags."\n");
             }
            else {
                print("--> ".$vgemeinde_titel." aufsplitten:"."\n");

                // ****** GEMEINDEN ******
                //Übersichtsseite scrapen:
                $html3_content = scraperwiki::scrape($vgemeinde_link);
                $html3 = str_get_html($html3_content);

                foreach ($html3->find("map area") as $gemeinde) {
                    $gemeinde_titel = utf8_decode($gemeinde->title);
                    $gemeinde_link = $gemeinde->href;
                    $gemeinde_ags = decode_key($gemeinde_link);

                    if (strlen($gemeinde_ags)==10){
                         scraperwiki::save_sqlite(array("AGS_rlp"),array("AGS_rlp"=>$gemeinde_ags, "Name_lang"=>$gemeinde_titel));
                         print("Gespeichert: ".$gemeinde_titel." mit AGS_rlp ".$gemeinde_ags."\n");
                     }
                    else {
                        print(" ********* FEHLER !!! ********");
                    }
                }
            }
        }

    }
}





function decode_key($string){
// http://www.infothek.statistik.rlp.de//neu/MeineHeimat/detailInfo.aspx?topic=1&key=0731800000&l=3&id=3537
    $start = strpos($string, "&key=")+5;
    $end = strpos($string, "&", $start);
    $kags = substr($string, $start, $end-$start);
    return $kags;
}


function umlaute($string){
  $upas = Array("&#xFC;" => "ü", "&uuml;" => "ü", "&#xE4;" => "ä" ,"&auml;" => "ä", "&#xF6;" => "ö", "&ouml;" => "ö", "&Auml;" => "Ä", "&Uuml;" => "Ü", "&Ouml;" => "Ö","&#xDF;" => "ß" , "&szlig;" => "ß");
  return strtr($string, $upas);
}

?><?php

require 'scraperwiki/simple_html_dom.php';
//mb_internal_encoding("utf8");

$stichtag = "30.04.2011";

// Weisenheim am Sand, Weisenheim am Berg, Windhagen, Worms
//$ags_list = array("0733202050", "0733401501", "0733202049", "0713801077", "0731900000");
//(SHAPE) 07332050, 07332049, 07138077  

//$ags_list = //array("0723201277","0713708209","0713104205","0713505037","0713403502","0733404030","0723202034","0723206250","0723202061","0733704038","0733305084","0713504050","0714307046","0733301078","0713304026","0713102036","0714308502","0713204103","0733205014","0733903041","0713201049","0713704093","0713101501","0714305009","0713206096","0733803009","0713102027","0733103047","0733105070","0733703027","0714003073","0713306086","0734006022","0733303064","0733703066","0723303083","0733401001","0734001034","0733401501","0713170070","0733103041","0733203030","0714307305","0733506034","0723218018","0734001501","0713201201","0733203004","0733603055","0733908021","0733506009","0713504065","0733306030","0731900000","0733604095","0723506074","0723101075","0733203033","0734007219","0723103091","0733901040","0733702076","0714002108","0713402022","0733509043","0723507137","0733904024","0733304013","0723202060","0733203036","0713201035","0713703110","0723204228","0713104502","0713101009","0713808010","0714304023","0713401075","0734005037","0723202086","0713404049","0714306218","0733607086","0714108072","0714302252","0723205041","0733101051","0732000000","0723301030","0733604049","0733604033","0733306075","0714308316","0713702112","0723203114","0734002014","0734008210","0733804008","0714004049","0723202137","0714108083","0723304205","0713403090","0713303204","0713702048","0734003019","0713708216","0713301032","0733224024","0734001010","0723107120","0713704069","0713208008","0723203078","0714002047","0723302050","0723106017","0714106087","0723301046","0734001009","0713403056","0713204116","0713103081","0723503132","0723501047","0733301053","0723106064","0713201067","0713703004","0733705051","0714103057","0714107140","0723201211","0733603094","0723105092","0714304021","0714309249","0723108117","0723305235","0723201214","0723203218","0723106112","0723304224","0723205012","0723106054","0723505062","0713803023","0723302058","0714310275","0723305232","0713505081","0713304035","0714304055","0714310010","0713201087","0714007144","0714106141","0733601103","0723504090","0723205049","0723202036","0723202109","0714007065","0714004062","0713703025","0734005051","0723202030","0714103038","0733104071","0723103101","0713308023","0723303019","0733901062","0723201310","0723201234","0714007106","0733705073","0714105113","0714105096","0733801022","0733601089","0714307075","0723506091","0723206290","0713505041","0723503144","0733305068","0723106058","0713706230","0713706215","0733901063","0713701057","0713305090","0733605004","0713201051","0733101024","0733105030","0723108023","0713307062","0713201056","0733604044","0714007023","0733104009","0714102108","0733405018","0714004130","0713703019","0723206226","0713503087","0713806015","0733203031","0714107070","0733305073","0713701081","0723304216","0733203041","0714305084","0713503005","0713308025","0723106203","0713204112","0733902020","0713102003","0734003053","0733907010","0733155055","0733101001","0733602096","0714004067","0723304233","0713201064","0713303047","0714002084","0714302268","0713204084","0723302033","0714004053","0714304057","0713101050","0733303058","0713302105","0733301023","0733303081","0713805027","0714003147","0714108069","0733106064","0713307116","0713401005","0713806030","0713404088","0713307067","0713501020","0733501011","0733904028","0733304076","0733703032","0714103002","0714309238","0733701024","0723205117","0714304033","0733908068","0713706206","0723501014","0713702087","0713303016","0733504021","0713207076","0733601066","0713304018","0714305001","0723504116","0733303032","0723134134","0713204043","0713704101","0713104073","0723201259","0733306027","0713706219","0713806042","0713501079","0733204044","0733103023","0714004105","0723302209","0714309233","0733601025","0733103048","0723505126","0723202048","0714107084","0723501008","0713445045","0713805070","0723506063","0734005024","0733602082","0723102072","0733404004","0723206329","0723206236","0714103045","0713806066","0723206279","0723204087","0723305241","0734008214","0733206020","0714304013","0723304226","0713101051","0713206013","0733603002","0714108121","0733907060","0713305020","0713401026","0723106019","0713505010","0713404012","0723301070","0733604043","0713101032","0733703025","0713201001","0713101042","0713206034","0723504050","0733603024","0713206102","0714007119","0713104041","0713101052","0734001045","0713403081","0713504022","0713101044","0723202091","0713705223","0723206280","0713404037","0734003205","0714004109","0723304220","0723301021","0723301067","0714007126","0723205068","0723501093","0713505076","0713502011","0723108003","0713702053","0713701096","0713806002","0733701033","0713804501","0723301064","0733702079","0733904015","0723506015","0733402002","0733706047","0714004071","0733906042","0733607042","0733103054","0733506046","0723103104","0723304203","0713402050","0723301025","0713402053","0713402002","0733106056","0714304034","0723304212","0713302027","0733604001","0733908056","0723502040","0733604074","0733601099","0723205073","0713505001","0734006016","0714002043","0723204282","0733301036","0733102018","0733607023","0733206013","0723501030","0714004128","0713403019","0723302204","0733404020","0713307072","0713803034","0723205011","0713503034","0713306068","0713805058","0733804018","0723503055","0733701064","0733104015","0723505028","0713204041","0733702037","0723108010","0713102039","0733805026","0723305007","0714302257","0723507051","0713306015","0714004029","0733705040","0723203063","0733705042","0723502119","0733601046","0734001004","0714302223","0714309219","0733908002","0714103049","0734008226","0733304057","0733203040","0713401007","0713306048","0733301067","0733825025","0713101086","0723103116","0723101090","0713306044","0733602101","0731700000","0733801006","0733702018","0733506033","0714007115","0713207045","0723201258","0713808065","0713702023","0723507073","0731200000","0713101030","0713401027","0723503143","0714106003","0714007099","0714308290","0714003009","0713403082","0733602047","0714107035","0723507069","0713206044","0723203037","0733304005","0713403064","0733902034","0733704068","0733707041","0733402021","0723106006","0723202044","0723502081","0713804055","0714004163","0714107012","0714002075","0723203093","0714108112","0713403014","0734007055","0714307061","0713305024","0714007101","0713403003","0733105017","0714106026","0733105035","0723504085","0713304054","0713706208","0723201298","0723302056","0714007058","0714305007","0713403040","0723106083","0714003042","0713208105","0723205047","0723201249","0723304202","0733803015","0713307064","0734008208","0714102042","0713201046","0723205054","0723301017","0734004038","0714310012","0713306107","0723301074","0733703028","0734008209","0713201114","0713306061","0713404043","0733602056","0713104054","0723206256","0723103127","0714302306","0723504103","0723203019","0713501086","0733305008","0713502084","0723106079","0731100000","0733101042","0723202015","0714007076","0714101044","0713101026","0713805057","0723204135","0714004145","0723304222","0714304052","0714302299","0713706207","0714108114","0733301051","0723503095","0713706231","0713204023","0713705227","0713401021","0733703035","0713703077","0733907033","0723301006","0714105036","0733106058","0713402085","0714006155","0733702055","0713101033","0733601106","0733701017","0734002020","0733501202","0714004044","0733104036","0723304206","0714104095","0713104209","0713308108","0713703035","0733401023","0723507001","0734007041","0714007100","0723203103","0723202124","0723202133","0723202020","0723202099","0723207006","0723202125","0714302265","0714105001","0723201263","0733405006","0723103065","0714106135","0733301021","0733305028","0733602008","0733101027","0713505061","0723103026","0733404034","0734007017","0733405032","0714105018","0733305025","0723205138","0713806071","0723103096","0714303040","0714307085","0733604065","0714002014","0733304047","0714103029","0733902026","0714304039","0723205116","0714004107","0733506025","0713505003","0713707224","0723504046","0713303203","0714105011","0723302036","0713806005","0714308263","0733304031","0733305077","0733702019","0723201293","0714309298","0723101071","0713503078","0713505077","0713303077","0713504075","0713205030","0713402058","0713807062","0733604014","0714107047","0713505073","0733301055","0733603088","0733702006","0713402034","0713104210","0714007121","0733304056","0713305092","0723202079","0723305239","0714303032","0711100000","0733202005","0723204076","0713708202","0713402062","0734003052","0714308281","0733603051","0723106202","0723201294","0713402048","0733702029","0713102017","0723506078","0723101012","0714005096","0714007158","0714006025","0714006161","0733501201","0733705007","0714310073","0733501003","0733901044","0723205085","0733401036","0733604100","0714107107","0713301078","0714106127","0713303046","0723108111","0733904013","0713503083","0723101008","0733903016","0714308232","0713805052","0713804068","0723102033","0713204032","0723203131","0713501012","0723301014","0714107120","0713703105","0714103133","0733305037","0713505074","0733907018","0733805021","0733705050","0713103014","0713201047","0733803002","0714005035","0713206007","0733106068","0733604013","0723201285","0714310003","0714108079","0733306069","0723102005","0713303042","0713302039","0713101004","0723504135","0713504016","0723201253","0723103074","0723206222","0713404087","0733605016","0713503048","0714007077","0713805064","0733505031","0714004081","0723206288","0733604075","0713307005","0733601067","0733904201","0733908022","0733707023","0713202098","0733304062","0713403093","0713204065","0723102110","0723108037","0723506083","0733505002","0714105032","0714101098","0723201260","0714104125","0733104037","0733303018","0723205106","0714105088","0714304065","0723304010","0723304244","0734005217","0714302258","0723105086","0713304056","0733205037","0713306006","0713504031","0714004007","0713101065","0714002156","0714103014","0733901036","0714309314","0723201212","0713306088","0714004006","0713101021","0733702049","0733206046","0733304035","0714107105","0733603018","0713701088","0733101005","0714307066","0713704008","0733104011","0733402008","0733907037","0713706504","0713306021","0723301016","0734005220","0733203023","0733303006","0733703020","0713805074","0713201110","0714101025","0714107080","0713204085","0713201086","0723206305","0714003001","0713503008","0714107131","0714105101","0734002049","0733203006","0714310049","0733301083","0713206038","0714304026","0733603015","0713402024","0723301052","0713302070","0713403039","0713302003","0713504014","0733305065","0733502205","0723207104","0733106029","0714302236","0714002149","0723201247","0713201099","0714107055","0714301297","0733801001","0723305237","0713201052","0714107094","0714002087","0714004086","0723507048","0714304005","0723107501","0734002047","0723504038","0714107063","0733105072","0713806054","0713706220","0723101126","0733305203","0733605092","0723201287","0714303030","0723504044","0733606017","0734007216","0723106032","0723205016","0723101125","0714308251","0713307022","0723106042","0723301065","0723205089","0733101007","0723201291","0714104020","0714004048","0714105117","0733703002","0733301050","0733607090","0734008223","0734001043","0713104202","0734001502","0723201217","0713101022","0714004154","0723301063","0723505118","0714006104","0713802024","0734004003","0713208080","0713402010","0723202013","0714302241","0723202045","0723206208","0713708222","0733703077","0733603006","0713204060","0733406016","0714302310","0714004141","0734006050","0733707061","0713301037","0733508020","0713703055","0733604030","0733603052","0713301104","0723503133","0723107029","0723202062","0713101072","0714306282","0713305058","0713503030","0723201255","0733509049","0733906031","0713403083","0733304007","0714103061","0733104006","0713802038","0733603070","0723202118","0714305082","0734005035","0713306089","0733101014","0733509005","0733602031","0723505002","0713404030","0713501060","0733802011","0713101084","0714309213","0734008212","0733601003","0713303096","0723301068","0733602037","0723301084","0723206307","0714106129","0713201106","0713403077","0714307022","0733703084","0723506060","0714004041","0733202019","0713501025","0713402072","0713702501","0723106123","0733702045","0713705221","0713768068","0733406025","0723102020","0714007166","0713303202","0713201033","0714001501","0723204071","0714105073","0714309289","0713502038","0714002016","0713504053","0723303053","0723501114","0723103114","0713306013","0713806026","0733404013","0723304048","0723305023","0713102068","0713402031","0723501092","0733105062","0733508038","0713502026","0733202015","0713701056","0723103044","0714105068","0733101067","0733604045","0733509006","0733704044","0713306014","0713503089","0713102029","0714302313","0713807073","0733904066","0733301054","0714107015","0723106078","0733604035","0733908004","0723101066","0713201118","0723202501","0723201220","0713703079","0713703092","0723102057","0713101082","0723205069","0714004050","0714309226","0713305051","0714105050","0733607005","0723505122","0723202017","0733305061","0713102047","0713303063","0713104204","0713805013","0733801014","0713808007","0733305066","0723207289","0723202039","0733106033","0733203029","0714301216","0733504045","0714307029","0733104028","0713503057","0713404079","0723206284","0723206296","0714108004","0713201004","0713201017","0714105034","0723205025","0723108031","0723103095","0713103006","0733607087","0723304234","0713306036","0733201035","0714002063","0723205005","0723202092","0723502140","0734001002","0714004030","0714308273","0734003026","0723301081","0723205127","0723108107","0733304010","0713404004","0714004082","0713101058","0723107014","0721100000","0723106204","0713201115","0733505022","0723202026","0723304003","0723108085","0733303012","0714101071","0723206230","0733105075","0723507501","0713502052","0733702046","0713501036","0733606010","0714007008","0714104065","0713403095","0723505154","0733206022","0733101020","0714106139","0723201201","0713402001","0723102067","0733405033","0733901007","0723501036","0714305062","0713502051","0714302240","0733703021","0734004031","0733303001","0723206209","0714002045","0733908029","0723205112","0713402078","0714108099","0714101041","0723206223","0714307056","0723103100","0733701074","0713403059","0733701081","0733904035","0713204016","0714302287","0723206231","0714103062","0723504010","0733507035","0714108122","0713306100","0723205031","0734004027","0734003048","0714106091","0713204083","0714103022","0713305065","0734006025","0733604062","0713505013","0713403091","0733820020","0733106073","0723506022","0714104089","0723303229","0733607085","0723101040","0714005068","0714305059","0723201254","0713706201","0733305201","0723205042","0733507029","0713306101","0723204035","0733907049","0734004007","0733817017","0713404092","0723202098","0713303038","0723108103","0713306004","0733507041","0714004040","0733305016","0713107007","0723203033","0733603039","0733604061","0713404065","0734007042","0723203002","0733403024","0714303031","0714308304","0733901045","0733802007","0733906047","0713402061","0733907011","0733101052","0714304053","0723206216","0733103003","0733802010","0713807008","0713501007","0713703011","0713806043","0733902006","0723501153","0713308091","0733902039","0714307064","0723205130","0734008206","0713201069","0714104093","0713502046","0713104059","0733903051","0723301043","0723204129","0713206091","0723203225","0723505082","0714105039","0733903046","0714005148","0713801003","0713504094","0713708228","0714107085","0713208054","0723205088","0723301011","0733906067","0714302204","0714306303","0723303038","0733509024","0713101074","0733104049","0723206320","0733907053","0723304221","0713307050","0723204075","0714103503","0713303059","0733603091","0733306020","0733203038","0733104039","0714005138","0713207012","0713703036","0723302223","0723504124","0723102068","0733705043","0733101050","0723108503","0723201262","0733506014","0733103066","0723303005","0723206308","0714103059","0713208011","0723205122","0713703203","0713302007","0713703074","0713503501","0714007056","0723505057","0714307044","0714307069","0714105126","0714005003","0733101012","0713202042","0733602501","0733106063","0723506120","0714309284","0733305034","0723106018","0733607048","0734001039","0723105105","0723206327","0713101066","0713501021","0713805025","0733803012","0733306011","0713204055","0714104102","0713703113","0723105207","0713402011","0733202049","0713101005","0723304218","0733303026","0713502502","0733605011","0723201221","0714002089","0723101133","0723205040","0723108024","0713303205","0713703061","0713204078","0714007150","0723205003","0713204097","0723304201","0733508044","0733707014","0713302071","0733604050","0723504141","0723502072","0714007113","0733304039","0714007012","0733301043","0723206265","0731500000","0714107104","0733705026","0723206295","0713403060","0723204101","0713307009","0723206276","0723107124","0713403028","0723501005","0723505098","0713502040","0723101041","0733304045","0714309288","0713502043","0714305038","0713504066","0723203053","0723301071","0713204093","0723205090","0723202027","0713101069","0723305214","0733306071","0714003095","0723205128","0713307501","0733604104","0723205038","0713306098","0723201309","0713104206","0713201053","0713503035","0733204007","0713307055","0714101201","0713101085","0714108115","0723505136","0723103036","0714105118","0713505070","0723101087","0714007123","0733904059","0713303073","0714104043","0733304022","0734003040","0733306009","0713201022","0713101062","0713702029","0723506134","0714004129","0713403041","0734008227","0713803031","0733305024","0734004032","0714310042","0733906057","0713204119","0714304024","0713302045","0733303041","0733203003","0714107116","0723103021","0733106059","0713307082","0713104055","0723503148","0733403022","0713501090","0713102040","0733607073","0714306246","0723204273","0714302294","0713702114","0713707226","0733607069","0714302296","0714304079","0723108022","0723201301","0713104060","0733203021","0723506108","0723201240","0713504082","0723206304","0733903001","0733601071","0733602041","0713307066","0733303017","0723504070","0723503068","0723201261","0714107009","0713707229","0713303008","0723101136","0713303201","0714004090","0713101037","0733901038","0734006012","0713201057","0723506125","0713805040","0713306109","0713102011","0723202100","0723205094","0714004151","0713201062","0723108108","0713803069","0713308110","0723305219","0713704106","0723202057","0733603084","0733804003","0713305083","0713505068","0723207055","0714308058","0714302267","0723201213","0723206321","0723506019","0713201109","0733601068","0714302269","0733701083","0714107100","0733705022","0723207010","0714309209","0714004111","0723201270","0713702086","0733101025","0733907025","0714103064","0723305035","0723302026","0713801044","0713306002","0714007092","0713104016","0713303113","0733701080","0713401008","0733105060","0723204306","0713402018","0723205080","0734008213","0723101030","0733507042","0713307057","0713808076","0714007039","0713104211","0723206300","0714302301","0714103052","0713308085","0723304213","0713101079","0723507094","0713403009","0714304072","0723101077","0714002205","0723201233","0733303501","0733905061","0733305202","0714106128","0723202134","0713702041","0713702070","0714004094","0723302227","0733906054","0714302235","0733202028","0723103080","0714004164","0734007224","0733305502","0713201040","0734006054","0734007018","0723202074","0733703015","0733306503","0713205107","0713205071","0713205108","0713205024","0713250050","0713203018","0713207063","0713202006","0723301008","0723304215","0713204089","0714307078","0723106093","0713403013","0713501029","0713303043","0714302212","0713808006","0723304210","0723203082","0723202052","0723502033","0723507151","0723106122","0713101083","0713803012","0723107206","0714309308","0734008202","0733202026","0714304020","0723301042","0723504037","0731400000","0733504204","0733702056","0714103076","0713201070","0733101043","0723304207","0723304037","0734001021","0733905005","0713802063","0723502105","0733604029","0733905027","0733906032","0733106019","0723501112","0713306033","0734003028","0733605027","0714103077","0723205004","0713303010","0713804041","0713190090","0733604058","0733404005","0733603034","0733101026","0713703034","0723201248","0713101018","0733605032","0723108504","0733301049","0723502003","0713703001","0733505018","0733403009","0714304051","0713201094","0713805050","0733701067","0733101008","0713301106","0713403067","0723204043","0713505032","0723303029","0733202008","0733703048","0723202083","0723204210","0713502028","0713404069","0723101070","0723504080","0713404076","0713305049","0734002030","0723506115","0713805048","0713801080","0713204104","0733306080","0734008201","0714308037","0713103025","0723202097","0733908065","0734008203","0733903019","0723304217","0713207072","0733604057","0713402029","0723503101","0713702030","0713504009","0713401054","0714305068","0713201082","0713703060","0714309207","0723505052","0733101031","0733907012","0723201229","0714304027","0733106061","0714103124","0713201081","0723502043","0733306033","0714306245","0714108016","0733603077","0713207037","0714004146","0713703049","0713707218","0714006112","0733901003","0713204100","0723106035","0733201043","0731600000","0733503010","0733202002","0733201009","0714007020","0713806072","0713304114","0714309230","0723506026","0713703043","0723205121","0714107067","0713703006","0713705204","0713706212","0713505019","0733301003","0733702008","0723102132","0733505012","0713403055","0734007225","0714005127","0733402027","0723108053","0733509040","0723205110","0713504072","0713403066","0723205056","0733503015","0714004028","0713703003","0733602107","0733504037","0723301055","0714302261","0714107137","0713206077","0714006116","0714003010","0723205095","0723301077","0714107060","0713505004","0714302229","0714107110","0714308011","0713305011","0714004122","0713505054","0713804037","0723506067","0713503002","0723304208","0714106046","0713702095","0713305084","0733819019","0714108138","0734008218","0733102045","0723108069","0723502058","0714309228","0723108113","0723301061","0723103082","0723301501","0714306271","0733509019","0713352052","0733102038","0714107502","0714304054","0723204105","0713101001","0713505088","0723101081","0713308095","0714307019","0723201297","0714304071","0713101008","0714302259","0733302038","0733301079","0714002031","0733102002","0714310047","0723103025","0713502045","0713101034","0723305028","0714002005","0713101075","0713805011","0714107037","0714302225","0714106058","0714307045","0723503096","0723303076","0714308220","0714107040","0713805014","0713503018","0733605076","0733908202","0713703097","0723204070","0714307041","0714003153","0723103046","0714304008","0713807019","0733607036","0723206272","0713177077","0733406011","0733304040","0733101032","0734008207","0713305081","0714003202","0713101028","0713703066","0733601009","0723303054","0714006133","0733904064","0713404017","0713305060","0723304242","0713307053","0714101006","0733505027","0713808047","0714002093","0723203065","0714309254","0733305004","0714308080","0733607072","0723201245","0723205008","0723503146","0713505071","0713204090","0713301031","0713306040","0714002110","0723207311","0714108024","0733702072","0723305022","0723302211","0723202014","0723202119","0713306115","0713404035","0713502042","0723202077","0723506004","0714308266","0713302030","0733106004","0733508030","0733601081","0714307015","0723304032","0723206332","0714105054","0713204029","0723301075","0733304046","0713204088","0723205022","0733602064","0723108013","0713308093","0713703007","0733604040","0723206266","0733504047","0733705082","0723201246","0714106103","0723502142","0723202115","0733507013","0723506077","0733506017","0733702005","0733702062","0723206328","0714107134","0733604060","0713804075","0723201267","0733101021","0713703014","0713502093","0733702058","0733601079","0733203010","0714302250","0723204331","0714103053","0713806053","0713308103","0733702060","0713504056","0714308501","0723504056","0714002117","0723202120","0713702089","0714004024","0713501017","0723201264","0733908050","0713102002","0723108007","0713304087","0713307102","0714007118","0733604038","0713401074","0723205084","0733203042","0723201333","0713805078","0714310060","0723502123","0723301031","0733901058","0733704039","0733803013","0713404044","0713502067","0714103130","0723202032","0713501069","0713402063","0723205102","0714105010","0723501045","0714005037","0714108109","0713706217","0723204203","0713706205","0713308028","0713501024","0714106132","0714007070","0723505131","0723301062","0733705012","0713501027","0713402057","0733703036","0733602054","0734006044","0713307094","0723206292","0713306019","0714103005","0713102049","0713703099","0714007134","0714007015","0723207050","0733906017","0733805005","0723302060","0713201074","0733101010","0734006015","0714309307","0713201031","0723303002","0733930030","0714003064","0723304236","0713702065","0723301027","0713401036","0733706052","0714003046","0714002201","0714104081","0723302004","0713402084","0714007139","0723204113","0713306117","0713206014","0713201501","0714307221","0713403086","0733823023","0723206318","0723301020","0731800000","0713208117","0714304036","0714306309","0733509501","0713206010","0733103046","0714106111","0714309293","0713402015","0714107092","0733404031","0713504044","0714003055","0714310028","0713402071","0733804004","0723304228","0713403006","0733406015","0713201061","0723103009","0713805059","0713505092","0713301012","0714304048","0713706214","0733101053","0713403032","0714108136","0713301080","0714107019","0714105074","0723205132","0733306042","0713402080","0733101044","0714107078","0733301072","0713402016","0723206224","0723301040","0714302202","0723205064","0714004159","0713204005","0723101016","0713802004","0714105013","0723101056","0713104201","0714106082","0733204001","0714301279","0713806061","0714007002","0734008221","0734007215","0734005222","0714004165","0714309312","0714307025","0713503085","0714106027","0713201092","0733305014","0713702027","0723108050","0723108001","0713501015","0713401033","0733816016","0714302262","0733503048","0713402070","0734003008","0723304225","0733607053","0713403052","0723202021","0713202111","0713402094","0714103030","0713708211","0733909009","0713505064","0733907043","0714307018","0733702071","0734001001","0733702059","0734003036","0714307067","0713204015","0733303074","0714305050","0723202046","0733702013","0733607019","0714102023","0733604012","0714002060","0713402023","0713307111","0714308203","0713801077","0714106106","0714108031","0714308074","0713305001","0713504062","0714308239","0713402042","0714101086","0723203028","0714309247","0714007079","0714103021","0723301034","0733504023","0723206227","0723505104","0714005027","0714302215","0723502152","0734007204","0733703011","0713205039","0733501203","0713206028","0714005125","0713201048","0733306048","0723206238","0714006080","0714005011","0714005085","0723205096","0723205072","0723205067","0723205059","0723202111","0723207123","0723202024","0723202058","0723202081","0723207107","0713502033","0723201315","0713305017","0714003018","0723108062","0733102034","0713803201","0713201058","0713402020","0723102502","0713401073","0713504063","0714107097","0733508016","0714002098","0714106033","0714004120","0733701078","0733601021","0733606102","0733204027","0723303080","0733403012","0713505039","0723204007","0733607105","0723103049","0733205016","0713702080","0714309200","0714308210","0723204313","0713804009","0713501049","0723301079","0733225025","0714002140","0723201322","0723206202","0723206302","0713806036","0723301039","0713101076","0733204047","0723206283","0723206206","0723206271","0734008211","0714301243","0714306291","0714306295","0714306214","0714306244","0714301206","0714301211","0714301300","0714301280","0714301248","0714301270","0714301253","0713202002","0713203101","0713203113","0713203075","0723101076","0713201027","0713401068","0723501035","0713205073","0714301264","0714302260","0714302276","0714302205","0714306285","0714306256","0713203068","0714301255","0714301277","0713203079","0714301231","0714301234","0714306283","0714306315","0714306278","0714301222","0714306274","0714309242","0714306237","0714306272","0714306286","0714306302","0714306311","0713203026","0713203019","0713203036","0714301227","0723203108","0734005023","0733903048","0723202009","0733701054","0714310081","0723301018","0714003204","0723205001","0713302074","0713505080","0713306075","0733903008","0713205066","0713205059","0713205095","0713205025","0713205020","0733302060","0733302019","0733405017","0733407007","0733201039","0723505025","0723505149","0723503106","0723507027","0723504107","0723504100","0713845045","0713708225","0723504021","0713306112","0723507111","0713101015","0723305041","0733703069","0733205048","0713403089","0713403047","0713403046","0734001011","0734001029","0733502004","0733503007","0733705065","0733705009","0733701501","0733701001","0713104208","0723108051","0714306292","0733106065","0713503091","0733603098","0734002057","0714102066","0714305006","0723205066","0713301069","0733705031","0713502058","0723304243","0734007228","0714309224","0713703063","0713303041","0723102004","0713401051","0723106115","0733502026","0733502028","0733603097","0734002005","0714104051","0723202029","0733601022","0714304077","0713403038","0731300000","0714003021","0733202050","0714310070","0733201017","0733706070","0713307076","0733101022","0714002102","0733203012","0723304230","0733405028","0714002036","0733205032","0733205034","0723301049","0713306099","0713403025","0713702102","0713502023","0714308208","0733401014","0714003131","0734002006","0723504129","0713201009","0734001033","0723305240","0723202126","0714004135","0723206207","0733205018","0714101008","0714102501","0714175075"
//);

// Crashs:
// 0733401501, Wörth am Rhein, RS: 073340501501

//Wörth_am_Rhein_Mainz_AGS_Infothek, Mainz_RS
//$ags_list = array("0733400501", "0731500000", "073150000000", );



// für $start_ags bei Scraper-Abbruch abgeborchenen Kreis-Link eintragen
//$start_ags = "07132";
//$start_ags = "07233"; // Kreis Vulkaneifel
$start_ags = "07338";


$url1 = "http://www.infothek.statistik.rlp.de/neu/MeineHeimat/meineGemeinde.aspx?id=3537";

//Übersichtsseite scrapen:
$html1_content = scraperwiki::scrape($url1);
$html1 = str_get_html($html1_content);


$kreis_nr = 1;

foreach ($html1->find("map area") as $kreis) { 

    $kreis_titel = utf8_decode($kreis->title);
    $kreis_link = $kreis->href;
    $kreis_ags = decode_key($kreis_link);

    print("KREIS-NR ".$kreis_nr." (AGS = ".$kreis_ags.")\n");
    if ($kreis_ags!=$start_ags && $kreis_nr==1) {
        print("Kreis ".$kreis_ags. " übersprungen.\n");
        continue;
    }
    $kreis_nr = $kreis_nr + 1;


    // ****** KREISE ******

    if (strlen($kreis_ags)==10){
         scraperwiki::save_sqlite(array("AGS_rlp"),array("AGS_rlp"=>$kreis_ags, "Name_lang"=>$kreis_titel));
         print("Gespeichert: ".$kreis_titel." mit AGS_rlp ".$kreis_ags."\n");
   }
    else {
        print("KREIS".$kreis_titel." aufsplitten:\n");
 
        // ****** VERBANDSGEMEINDEN ******
        //Übersichtsseite scrapen:
        $html2_content = scraperwiki::scrape($kreis_link);
        $html2 = str_get_html($html2_content);

        foreach ($html2->find("map area") as $vgemeinde) {

            $vgemeinde_titel = utf8_decode($vgemeinde->title);
            $vgemeinde_link = $vgemeinde->href;
            $vgemeinde_ags = decode_key($vgemeinde_link);

            if (strlen($vgemeinde_ags)==10){
                 scraperwiki::save_sqlite(array("AGS_rlp"),array("AGS_rlp"=>$vgemeinde_ags, "Name_lang"=>$vgemeinde_titel));
                 print("Gespeichert: ".$vgemeinde_titel." mit AGS_rlp ".$vgemeinde_ags."\n");
             }
            else {
                print("--> ".$vgemeinde_titel." aufsplitten:"."\n");

                // ****** GEMEINDEN ******
                //Übersichtsseite scrapen:
                $html3_content = scraperwiki::scrape($vgemeinde_link);
                $html3 = str_get_html($html3_content);

                foreach ($html3->find("map area") as $gemeinde) {
                    $gemeinde_titel = utf8_decode($gemeinde->title);
                    $gemeinde_link = $gemeinde->href;
                    $gemeinde_ags = decode_key($gemeinde_link);

                    if (strlen($gemeinde_ags)==10){
                         scraperwiki::save_sqlite(array("AGS_rlp"),array("AGS_rlp"=>$gemeinde_ags, "Name_lang"=>$gemeinde_titel));
                         print("Gespeichert: ".$gemeinde_titel." mit AGS_rlp ".$gemeinde_ags."\n");
                     }
                    else {
                        print(" ********* FEHLER !!! ********");
                    }
                }
            }
        }

    }
}





function decode_key($string){
// http://www.infothek.statistik.rlp.de//neu/MeineHeimat/detailInfo.aspx?topic=1&key=0731800000&l=3&id=3537
    $start = strpos($string, "&key=")+5;
    $end = strpos($string, "&", $start);
    $kags = substr($string, $start, $end-$start);
    return $kags;
}


function umlaute($string){
  $upas = Array("&#xFC;" => "ü", "&uuml;" => "ü", "&#xE4;" => "ä" ,"&auml;" => "ä", "&#xF6;" => "ö", "&ouml;" => "ö", "&Auml;" => "Ä", "&Uuml;" => "Ü", "&Ouml;" => "Ö","&#xDF;" => "ß" , "&szlig;" => "ß");
  return strtr($string, $upas);
}

?>